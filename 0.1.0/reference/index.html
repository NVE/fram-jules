
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="FRAM JuLES API documentation site">
      
      
        <meta name="author" content="NVE">
      
      
      
        <link rel="prev" href="..">
      
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Code Reference - FRAM JuLES</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#code-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FRAM JuLES" class="md-header__button md-logo" aria-label="FRAM JuLES" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FRAM JuLES
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Code Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/NVE/fram-jules" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    NVE/fram-jules
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FRAM JuLES" class="md-nav__button md-logo" aria-label="FRAM JuLES" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    FRAM JuLES
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NVE/fram-jules" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    NVE/fram-jules
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Code Reference
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Code Reference
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#framjules" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;framjules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" framjules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulES
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulES
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES.get_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_config
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.activate_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;activate_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.activate_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;activate_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.deactivate_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;deactivate_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.deactivate_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;deactivate_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_clearing_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_clearing_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_end_value_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_end_value_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_long_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_long_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_med_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_med_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_short_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_short_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_subsystem_master_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_subsystem_master_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_subsystem_sub_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_subsystem_sub_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_force_julia_install" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_force_julia_install
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_jules_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_jules_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_depot_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_depot_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_env_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_env_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_exe_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_exe_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_short_term_aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_aggregations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_short_term_storage_cutoff_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_storage_cutoff_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_skipmax_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_skipmax_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_time_resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_time_resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_tulipa_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_tulipa_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.is_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.is_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_all_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_all_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_clearing_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_clearing_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_end_value_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_end_value_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_long_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_long_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_med_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_med_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_short_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_short_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_subsystem_master_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_subsystem_master_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_subsystem_sub_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_subsystem_sub_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_force_julia_install" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_force_julia_install
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_jules_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_jules_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_depot_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_depot_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_env_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_env_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_exe_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_exe_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_short_term_aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_term_aggregations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_skipmax_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_skipmax_days
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESTimeResolution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESTimeResolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESTimeResolution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESTimeResolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_content_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_content_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_adaptive_blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_adaptive_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_adaptive_blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_adaptive_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_lookahead_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_lookahead_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_med_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_lookahead_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_lookahead_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_med_days
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;loaders
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;time_vector_loaders
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" time_vector_loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.DemandJulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DemandJulESH5TimeVectorLoader
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESH5TimeVectorLoader
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESH5TimeVectorLoader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__eq__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__hash__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_fingerprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_fingerprint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_index" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_index
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_reference_period" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_reference_period
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_unit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_max_level" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_max_level
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_zero_one_profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_zero_one_profile
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.SupplyJulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SupplyJulESH5TimeVectorLoader
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;solve_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" solve_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESAggregator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESAggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESAggregator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESAggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.assert_equal_storages" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;assert_equal_storages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESNames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESNames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames.JulESNames" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESNames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESNames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames.JulESNames.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SolveHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SolveHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SolveHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SolveHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.build" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.configure" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;configure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_build_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_build_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_config_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_config_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_results_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_results_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_run_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.fill_graph_infos" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fill_graph_infos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_initial_storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_initial_storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_market_node_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_market_node_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_storage_node_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_storage_node_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_basic_node_flow_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_basic_node_flow_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_jules_id_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_jules_id_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_market_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_market_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_results" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_results
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_global_eneq_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_global_eneq_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_initial_storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_initial_storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_unit_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_unit_info
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;build_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" build_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.BuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;BuildHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BuildHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.BuildHandler.BuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BuildHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.DataElementAppender" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;DataElementAppender
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DataElementAppender">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DataElementAppender
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.SerialBuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialBuildHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialBuildHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialBuildHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;dataclasses
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" dataclasses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.ComponentInfo" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ComponentInfo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.DomainModels" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DomainModels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.GraphInfos" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GraphInfos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.NodeFlowGraphs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;NodeFlowGraphs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;results_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" results_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler.SerialResultsHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialResultsHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialResultsHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler.SerialResultsHandler.SerialResultsHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialResultsHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;run_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" run_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler.SerialRunHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialRunHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialRunHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler.SerialRunHandler.SerialRunHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialRunHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#framjules" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;framjules
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" framjules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulES
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulES
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulES">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulES.JulES.get_config" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_config
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.activate_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;activate_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.activate_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;activate_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.deactivate_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;deactivate_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.deactivate_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;deactivate_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_clearing_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_clearing_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_end_value_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_end_value_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_long_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_long_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_med_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_med_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_short_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_short_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_subsystem_master_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_subsystem_master_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_debug_subsystem_sub_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_debug_subsystem_sub_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_force_julia_install" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_force_julia_install
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_jules_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_jules_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_depot_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_depot_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_env_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_env_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_julia_exe_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_julia_exe_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_short_term_aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_aggregations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_short_term_storage_cutoff_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_storage_cutoff_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_skipmax_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_skipmax_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_time_resolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_time_resolution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.get_tulipa_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_tulipa_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.is_cache_db" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_cache_db
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.is_skip_install_dependencies" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_skip_install_dependencies
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_all_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_all_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_clearing_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_clearing_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_end_value_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_end_value_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_long_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_long_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_med_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_med_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_short_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_short_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_subsystem_master_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_subsystem_master_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_debug_subsystem_sub_opt_solver" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_debug_subsystem_sub_opt_solver
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_force_julia_install" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_force_julia_install
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_jules_version" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_jules_version
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_depot_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_depot_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_env_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_env_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_julia_exe_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_julia_exe_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_short_term_aggregations" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_term_aggregations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESConfig.JulESConfig.set_skipmax_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_skipmax_days
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESTimeResolution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESTimeResolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESTimeResolution
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESTimeResolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_clearing_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_content_dict" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_content_dict
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_adaptive_blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_adaptive_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_blocks" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_adaptive_blocks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_hours" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_adaptive_hours
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_med_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_med_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_short_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_lookahead_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_lookahead_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.get_target_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_target_med_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_clearing_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_market_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_market_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_short_storage_minutes" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_short_storage_minutes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_ev_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_ev_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_long_storage_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_long_storage_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_lookahead_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_lookahead_days
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.JulESTimeResolution.JulESTimeResolution.set_target_med_days" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_target_med_days
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;loaders
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;time_vector_loaders
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" time_vector_loaders">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.DemandJulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DemandJulESH5TimeVectorLoader
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESH5TimeVectorLoader
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESH5TimeVectorLoader">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__eq__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__eq__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__hash__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__hash__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.clear_cache" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;clear_cache
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_fingerprint" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_fingerprint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_index" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_index
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_metadata" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_metadata
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_reference_period" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_reference_period
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_unit" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_unit
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_values" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_max_level" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_max_level
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_zero_one_profile" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;is_zero_one_profile
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.loaders.time_vector_loaders.SupplyJulESH5TimeVectorLoader" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SupplyJulESH5TimeVectorLoader
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;solve_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" solve_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESAggregator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESAggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESAggregator
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESAggregator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.assert_equal_storages" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;assert_equal_storages
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_long_term_model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_medium_term_model
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_aggregation_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_aggregation_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_graph_map" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_graph_map
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;get_short_term_model
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;JulESNames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESNames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames.JulESNames" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;JulESNames
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" JulESNames">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.JulESNames.JulESNames.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SolveHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SolveHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SolveHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SolveHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;__init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.build" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;build
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.configure" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;configure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_build_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_build_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_config_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_config_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_results_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_results_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.create_run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;create_run_handler
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.fill_graph_infos" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;fill_graph_infos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;run
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_initial_storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_initial_storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_market_node_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_market_node_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_agg_storage_node_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_agg_storage_node_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_basic_node_flow_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_basic_node_flow_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_jules_id_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_jules_id_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_market_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_market_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_results" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_results
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_global_eneq_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_global_eneq_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_info
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_sss_initial_storage" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_sss_initial_storage
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.SolveHandler.SolveHandler.set_unit_info" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-method"></code>&nbsp;set_unit_info
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;build_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" build_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.BuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;BuildHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" BuildHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.BuildHandler.BuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;BuildHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.DataElementAppender" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;DataElementAppender
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" DataElementAppender">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DataElementAppender
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.SerialBuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialBuildHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialBuildHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialBuildHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;dataclasses
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" dataclasses">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.ComponentInfo" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;ComponentInfo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.DomainModels" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;DomainModels
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.GraphInfos" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;GraphInfos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.dataclasses.NodeFlowGraphs" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;NodeFlowGraphs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;results_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" results_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler.SerialResultsHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialResultsHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialResultsHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.results_handler.SerialResultsHandler.SerialResultsHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialResultsHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;run_handler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" run_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler.SerialRunHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;SerialRunHandler
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label=" SerialRunHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#framjules.solve_handler.run_handler.SerialRunHandler.SerialRunHandler" class="md-nav__link">
    <span class="md-ellipsis">
      
        <code class="doc-symbol doc-symbol-toc doc-symbol-class"></code>&nbsp;SerialRunHandler
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="code-reference">Code Reference</h1>


<div class="doc doc-object doc-module">



<h2 id="framjules" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>framjules</code>


</h2>

    <div class="doc doc-contents first">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h3 id="framjules.JulES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>JulES</code>


</h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="framjules.JulES.JulES" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulES</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.solvers.Solver">Solver</span></code></p>



        <p>Solver class for JulES - a fundamental energy market simulation model for operational planning.</p>
<p>The JulES solver takes a populated Model, and uses the configuration set by the user in JulESConfig to run
JulES and read results back into the Model. The main steps of the JulES solver class are described below:
1. Transform Model into JulES compatible Components (SolveHandler)
2. Build JulES input files (BuildHandler)
3. Configure JulES according to the JulESConfig (ConfigHandler)
4. Run JulES (and setup Julia environment if needed) (RunHandler)
5. Read results from JulES back into the Model (ResultsHandler)</p>
<p>SolveHandler - Initialize
- Transform the Model Components into JulES compatible Components. JulES uses the main Components
Node and Flow to represent the energy system.
- If Aggregators are set in JulEConfig.short_term_aggregations, make an aggregated version of Model. The JulES,
algorithm has different problems that will use different Models. The clearing, stochastic subsystem and end
value problems will use the full detailed Model, while the price prognosis problem will use the aggregated Model.
SolveHandler also makes the mappings between the detailed and aggregated Models to couple the problems.
- JulES only support the commodities Power, Hydro and Battery at the moment. All commodities in Model will be mapped
to these. The main property of the commodity in JulES is the horizon (with type, duration and resolution). Power is
the default commodity, and all commodities with no storage will be mapped to Power. Battery represents short-term
storage commodities with a detailed time resolution, while Hydro represents long-term storage commodities with a
coarser time resolution.
- Identify storagesystems (e.g. watersheds or batteries), and identify if they are long-term or short-term
storage systems. Storage systems are short-term if all storages in the subsystem have lower storage duration than
JulESConfig.get_short_term_storage_cutoff_hours(). All storage subsystems in the same category
(short-term or long-term) will get the same storage commodities and horizons, problem structure and end-condition
type.
    - Short-term: StochSubsystem, startequalstop, no skipmed, Battery commodity, short horizon duration.
    - Long-term: EVP and/or StochSubsystem, endvalues from ppp, skipmed, Hydro commodity, long horizon duration.
- TODO: This implementation is built around the first JulES version and will be improved in the future.
We would like to add more tailored configurations for each storage system. Also make models for each problem and
subsystem in JulES, not just a detailed and aggregated version of Model that JulES has to derive all problems from.</p>
<p>BuildHandler - Build JulES input files.
- Write JulES input files for the detailed and aggregated elements, together with their timevectors.
- Write JulES input files for detailed and aggregated start storages.
- Write JulES input file for the mapping between detailed and aggregated storages.</p>
<p>ConfigHandler - Configure JulES according to the JulESConfig set by the user and the Model.
- Simulation mode, simulation periods, weather years and scenario generation.
- Number of CPU cores to use, parallelization settings and optimization solvers.
- Problem structure and horizons for each problem and commodity. Horizon type, duration and resolution.
    - The problem structure will in most cases consist of the following, which are run for each simulation step:
        - Deterministic price prognosis problems for each weather scenario
        - Deterministic end value problems for each storage subsystem and weather scenario
        - Stochastic (two-stage) subsystems problem for each storage subsystem
        - Market clearing problem
    - Exception 1: If there are no storages in the system, only the market clearing problem will be run.
        TODO: Should also check if there are other constraints coupling time periods.
        Then we need the price prognosis problems.
    - Exception 2: If there is only exogenous market nodes only stochastic subsystem problems will not be run.
    - TODO: Improve configuration possibilities for the different problem structure cases.
- Result settings.
- Turn on or off various JulES features.</p>
<p>See JulES documentation at https://nve.github.io/JulES/ for more.</p>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            __init__() -> None (framjules.JulES.JulES.__init__)" href="#framjules.JulES.JulES.__init__">__init__</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Initializes the solver with default configuration.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="            get_config() -> JulESConfig (framjules.JulES.JulES.get_config)" href="#framjules.JulES.JulES.get_config">get_config</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Returns the internal configuration object for customization.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><span title="framjules.JulES.JulES.solve">solve</span></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Model): Solves the given model using JulES. Parent class method (Solver).</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/JulES.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulES</span><span class="p">(</span><span class="n">Solver</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Solver class for JulES - a fundamental energy market simulation model for operational planning.</span>

<span class="sd">    The JulES solver takes a populated Model, and uses the configuration set by the user in JulESConfig to run</span>
<span class="sd">    JulES and read results back into the Model. The main steps of the JulES solver class are described below:</span>
<span class="sd">    1. Transform Model into JulES compatible Components (SolveHandler)</span>
<span class="sd">    2. Build JulES input files (BuildHandler)</span>
<span class="sd">    3. Configure JulES according to the JulESConfig (ConfigHandler)</span>
<span class="sd">    4. Run JulES (and setup Julia environment if needed) (RunHandler)</span>
<span class="sd">    5. Read results from JulES back into the Model (ResultsHandler)</span>

<span class="sd">    SolveHandler - Initialize</span>
<span class="sd">    - Transform the Model Components into JulES compatible Components. JulES uses the main Components</span>
<span class="sd">    Node and Flow to represent the energy system.</span>
<span class="sd">    - If Aggregators are set in JulEConfig.short_term_aggregations, make an aggregated version of Model. The JulES,</span>
<span class="sd">    algorithm has different problems that will use different Models. The clearing, stochastic subsystem and end</span>
<span class="sd">    value problems will use the full detailed Model, while the price prognosis problem will use the aggregated Model.</span>
<span class="sd">    SolveHandler also makes the mappings between the detailed and aggregated Models to couple the problems.</span>
<span class="sd">    - JulES only support the commodities Power, Hydro and Battery at the moment. All commodities in Model will be mapped</span>
<span class="sd">    to these. The main property of the commodity in JulES is the horizon (with type, duration and resolution). Power is</span>
<span class="sd">    the default commodity, and all commodities with no storage will be mapped to Power. Battery represents short-term</span>
<span class="sd">    storage commodities with a detailed time resolution, while Hydro represents long-term storage commodities with a</span>
<span class="sd">    coarser time resolution.</span>
<span class="sd">    - Identify storagesystems (e.g. watersheds or batteries), and identify if they are long-term or short-term</span>
<span class="sd">    storage systems. Storage systems are short-term if all storages in the subsystem have lower storage duration than</span>
<span class="sd">    JulESConfig.get_short_term_storage_cutoff_hours(). All storage subsystems in the same category</span>
<span class="sd">    (short-term or long-term) will get the same storage commodities and horizons, problem structure and end-condition</span>
<span class="sd">    type.</span>
<span class="sd">        - Short-term: StochSubsystem, startequalstop, no skipmed, Battery commodity, short horizon duration.</span>
<span class="sd">        - Long-term: EVP and/or StochSubsystem, endvalues from ppp, skipmed, Hydro commodity, long horizon duration.</span>
<span class="sd">    - TODO: This implementation is built around the first JulES version and will be improved in the future.</span>
<span class="sd">    We would like to add more tailored configurations for each storage system. Also make models for each problem and</span>
<span class="sd">    subsystem in JulES, not just a detailed and aggregated version of Model that JulES has to derive all problems from.</span>

<span class="sd">    BuildHandler - Build JulES input files.</span>
<span class="sd">    - Write JulES input files for the detailed and aggregated elements, together with their timevectors.</span>
<span class="sd">    - Write JulES input files for detailed and aggregated start storages.</span>
<span class="sd">    - Write JulES input file for the mapping between detailed and aggregated storages.</span>

<span class="sd">    ConfigHandler - Configure JulES according to the JulESConfig set by the user and the Model.</span>
<span class="sd">    - Simulation mode, simulation periods, weather years and scenario generation.</span>
<span class="sd">    - Number of CPU cores to use, parallelization settings and optimization solvers.</span>
<span class="sd">    - Problem structure and horizons for each problem and commodity. Horizon type, duration and resolution.</span>
<span class="sd">        - The problem structure will in most cases consist of the following, which are run for each simulation step:</span>
<span class="sd">            - Deterministic price prognosis problems for each weather scenario</span>
<span class="sd">            - Deterministic end value problems for each storage subsystem and weather scenario</span>
<span class="sd">            - Stochastic (two-stage) subsystems problem for each storage subsystem</span>
<span class="sd">            - Market clearing problem</span>
<span class="sd">        - Exception 1: If there are no storages in the system, only the market clearing problem will be run.</span>
<span class="sd">            TODO: Should also check if there are other constraints coupling time periods.</span>
<span class="sd">            Then we need the price prognosis problems.</span>
<span class="sd">        - Exception 2: If there is only exogenous market nodes only stochastic subsystem problems will not be run.</span>
<span class="sd">        - TODO: Improve configuration possibilities for the different problem structure cases.</span>
<span class="sd">    - Result settings.</span>
<span class="sd">    - Turn on or off various JulES features.</span>

<span class="sd">    See JulES documentation at https://nve.github.io/JulES/ for more.</span>

<span class="sd">    Methods:</span>
<span class="sd">        __init__(): Initializes the solver with default configuration.</span>
<span class="sd">        get_config(): Returns the internal configuration object for customization.</span>
<span class="sd">        solve(model: Model): Solves the given model using JulES. Parent class method (Solver).</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create new JulES solver with default config set.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">JulESConfig</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JulESConfig</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get internal config object. Modify this to configure JulES.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_solve</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="n">SolveHandler</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;SolveHandler time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>  <span class="c1"># Stop profiling</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">dump_stats</span><span class="p">(</span><span class="s2">&quot;profile_solvehandler_init.prof&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>  <span class="c1"># Stop profiling</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">dump_stats</span><span class="p">(</span><span class="s2">&quot;profile_solvehandler_build.prof&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;configure time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">loaders</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">Loader</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="n">add_loaders</span><span class="p">(</span><span class="n">loaders</span><span class="p">,</span> <span class="n">model</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">loader</span> <span class="ow">in</span> <span class="n">loaders</span><span class="p">:</span>
            <span class="n">loader</span><span class="o">.</span><span class="n">clear_cache</span><span class="p">()</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;clear_cache time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;run time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span> <span class="o">=</span> <span class="n">cProfile</span><span class="o">.</span><span class="n">Profile</span><span class="p">()</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">set_results</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_PROFILE_PERFORMANCE</span><span class="p">:</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>  <span class="c1"># Stop profiling</span>
            <span class="n">profiler</span><span class="o">.</span><span class="n">dump_stats</span><span class="p">(</span><span class="s2">&quot;profile_solvehandler_results.prof&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_results time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JulES._solve time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="framjules.JulES.JulES.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Create new JulES solver with default config set.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulES.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create new JulES solver with default config set.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">JulESConfig</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulES.JulES.get_config" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_config</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">JulESConfig</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get internal config object. Modify this to configure JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulES.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JulESConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get internal config object. Modify this to configure JulES.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="framjules.JulESConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>JulESConfig</code>


</h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="framjules.JulESConfig.JulESConfig" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulESConfig</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.solvers.SolverConfig">SolverConfig</span></code></p>



        <p>Class containing all config for JulES. Subclass of SolverConfig.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulESConfig</span><span class="p">(</span><span class="n">SolverConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class containing all config for JulES. Subclass of SolverConfig.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create new JulESConfig object.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_time_resolution</span> <span class="o">=</span> <span class="n">JulESTimeResolution</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_duration_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_duration_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_duration_medium_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">364</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_duration_long_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">364</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_market_resolution_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_market_resolution_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_market_num_blocks_medium_term</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_market_num_blocks_long_term</span> <span class="o">=</span> <span class="mi">4</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_medium_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_long_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_storage_cutoff_hours</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">7</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_market_duration_minutes</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage_duration_minutes</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lookahead_days</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">365</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_detail_level</span> <span class="o">=</span> <span class="s2">&quot;fast&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_warn_skipmax_days</span> <span class="o">=</span> <span class="mi">32</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_skipmax_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">days</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set number of days between calculation of medium and long term storage values.</span>

<span class="sd">        This can speed up a simulation as medium and long term price prognosis problems, and long term</span>
<span class="sd">        storage value problems are solved less often. The cost is less good storage values. The longer between</span>
<span class="sd">        re-calculation of storage values, the bigger negative impact on simulation result quality.</span>

<span class="sd">        If skipmax_days = 6 and clearing_days = 2, JulES will calculate medium and long</span>
<span class="sd">        term storage values every 3rd simulation step.</span>

<span class="sd">        Short term price prognosis problems and storage values problems (i.e. for batteries) are not affected by this</span>
<span class="sd">        setting, and are calculated every simulation step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warn_skipmax_days</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;Unusually high value for skipmax_days: &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Medium and long term storage values updated only </span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">th day. &quot;</span>
                <span class="s2">&quot;This can give poor simulation results due to poor storage utilization.&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span> <span class="o">=</span> <span class="n">days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_skipmax_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get number of days between calculation of medium and long term storage values.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if install julia dependencies will be skipped during JulES.solve.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">activate_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tell JulES to not install julia dependencies, assuming they are already installed.</span>

<span class="sd">        Default is to install.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deactivate_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tell JulES to install julia dependencies. (This is the default).&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if JulES is allowed to use a cache to store precomputed values while building.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">activate_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Activates use of cache db.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">deactivate_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Activates use of db without cache.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_time_resolution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JulESTimeResolution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get time resolution object. Modify this to modify time resolution of JulES.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time_resolution</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_storage_cutoff_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return number of hours.</span>

<span class="sd">        JulES will classify all storage subsystems with max storage duration less than cutoff as short term subsystems.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_storage_cutoff_hours</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_jules_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jules_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tulipa_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set which version of JulES and/or TuLiPa to use.</span>

<span class="sd">        Can be a git branch name, or a local path to a git repo which will activate development mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">jules_branch</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">tulipa_branch</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">jules_branch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span> <span class="o">=</span> <span class="n">jules_branch</span>
        <span class="k">if</span> <span class="n">tulipa_branch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="o">=</span> <span class="n">tulipa_branch</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_jules_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get JulES version.</span>

<span class="sd">        Can be a git branch name, or a local path to a git repo for use in development mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_tulipa_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get TuLiPa git branch.</span>

<span class="sd">        Can be a git branch name, or a local path to a git repo for use in development mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_julia_depot_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set folder where Julia installs new packages.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_julia_depot_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get folder where Julia installs new packages.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_julia_env_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set which Julia environment to use.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_julia_env_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Julia environment being used.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_julia_exe_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set which Julia installation to use.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span> <span class="o">=</span> <span class="n">path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_julia_exe_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Julia installation being used.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_force_julia_install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set bool for force new julia install.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span> <span class="o">=</span> <span class="n">flag</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_force_julia_install</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get bool for force new julia install.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_supported_aggregators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">aggr</span> <span class="ow">in</span> <span class="n">aggregators</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aggr</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_SUPPORTED_AGGREGATORS</span><span class="p">)):</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Aggregator of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">aggr</span><span class="p">)</span><span class="si">}</span><span class="s2"> is not supported in JulES.&quot;</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;Supported types are: </span><span class="si">{</span><span class="n">_SUPPORTED_AGGREGATORS</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_short_term_aggregations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set aggregations to create the short term model used in the price prognosis problems.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_supported_aggregators</span><span class="p">(</span><span class="n">aggregators</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span> <span class="o">=</span> <span class="n">aggregators</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_aggregations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get aggregations to create the short term model used in the price prognosis problems.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Debug optimization solvers of the different JulES problems.</span>
<span class="sd">    Helpful if problems are encountered during solving, most commonly infeasibility issues.</span>
<span class="sd">    Replaces TuLiPa.HiGHS_Prob with TuLiPa.JuMP_Prob which has better debugging features:</span>
<span class="sd">    - More checks while building the optimization problem</span>
<span class="sd">    - If infeasible, solve the problem again with relaxed constraints (with penalties) and return the broken constraints</span>
<span class="sd">    - Outputs the optimization problem with variable and constraint names from FRAM</span>
<span class="sd">    At the cost of performance, as JuMP_Prob is slower than HiGHS_Prob.</span>

<span class="sd">    JulES will now automatically switch to JuMP_Prob if HiGHS_Prob fails, but these can still be used for testing</span>
<span class="sd">    and debugging.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_all_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug all optimization solvers.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_short_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the short-term optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_short_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the short-term optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_med_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the medium-term optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_med_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the medium-term optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_long_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the long-term optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_long_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the long-term optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_end_value_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the end value optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_end_value_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the end value optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_subsystem_master_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the subsystem master optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_subsystem_master_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the subsystem master optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_subsystem_sub_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the subsystem sub optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_subsystem_sub_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the subsystem sub optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_debug_clearing_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set whether to debug the clearing optimization solver.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_debug_clearing_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get whether to debug the clearing optimization solver.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Create new JulESConfig object.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create new JulESConfig object.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_time_resolution</span> <span class="o">=</span> <span class="n">JulESTimeResolution</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_duration_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_duration_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_duration_medium_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">364</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_duration_long_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">364</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_market_resolution_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_market_resolution_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_market_num_blocks_medium_term</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_market_num_blocks_long_term</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_clearing</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_short_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_medium_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_storage_resolution_long_term</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">28</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_storage_cutoff_hours</span> <span class="o">=</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">7</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_market_duration_minutes</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">60</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_storage_duration_minutes</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_lookahead_days</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="mi">365</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_detail_level</span> <span class="o">=</span> <span class="s2">&quot;fast&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_warn_skipmax_days</span> <span class="o">=</span> <span class="mi">32</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.activate_cache_db" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">activate_cache_db</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Activates use of cache db.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">activate_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Activates use of cache db.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.activate_skip_install_dependencies" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">activate_skip_install_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Tell JulES to not install julia dependencies, assuming they are already installed.</p>
<p>Default is to install.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">activate_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tell JulES to not install julia dependencies, assuming they are already installed.</span>

<span class="sd">    Default is to install.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.deactivate_cache_db" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">deactivate_cache_db</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Activates use of db without cache.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deactivate_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Activates use of db without cache.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.deactivate_skip_install_dependencies" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">deactivate_skip_install_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Tell JulES to install julia dependencies. (This is the default).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">deactivate_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tell JulES to install julia dependencies. (This is the default).&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_clearing_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_clearing_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the clearing optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_clearing_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the clearing optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_end_value_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_end_value_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the end value optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_end_value_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the end value optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_long_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_long_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the long-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_long_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the long-term optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_med_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_med_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the medium-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_med_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the medium-term optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_short_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_short_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the short-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_short_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the short-term optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_subsystem_master_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_subsystem_master_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the subsystem master optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_subsystem_master_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the subsystem master optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_debug_subsystem_sub_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_debug_subsystem_sub_opt_solver</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get whether to debug the subsystem sub optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_debug_subsystem_sub_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get whether to debug the subsystem sub optimization solver.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_force_julia_install" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_force_julia_install</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get bool for force new julia install.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_force_julia_install</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get bool for force new julia install.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_jules_version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_jules_version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get JulES version.</p>
<p>Can be a git branch name, or a local path to a git repo for use in development mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_jules_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get JulES version.</span>

<span class="sd">    Can be a git branch name, or a local path to a git repo for use in development mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_julia_depot_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_julia_depot_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get folder where Julia installs new packages.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_julia_depot_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get folder where Julia installs new packages.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_julia_env_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_julia_env_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get Julia environment being used.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_julia_env_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get Julia environment being used.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_julia_exe_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_julia_exe_path</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get Julia installation being used.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_julia_exe_path</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get Julia installation being used.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_short_term_aggregations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_term_aggregations</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">]</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get aggregations to create the short term model used in the price prognosis problems.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_aggregations</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get aggregations to create the short term model used in the price prognosis problems.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_short_term_storage_cutoff_hours" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_term_storage_cutoff_hours</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Return number of hours.</p>
<p>JulES will classify all storage subsystems with max storage duration less than cutoff as short term subsystems.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_storage_cutoff_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return number of hours.</span>

<span class="sd">    JulES will classify all storage subsystems with max storage duration less than cutoff as short term subsystems.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_storage_cutoff_hours</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_skipmax_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_skipmax_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get number of days between calculation of medium and long term storage values.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_skipmax_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of days between calculation of medium and long term storage values.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_time_resolution" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_time_resolution</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">JulESTimeResolution</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get time resolution object. Modify this to modify time resolution of JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_time_resolution</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">JulESTimeResolution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get time resolution object. Modify this to modify time resolution of JulES.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time_resolution</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.get_tulipa_version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_tulipa_version</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get TuLiPa git branch.</p>
<p>Can be a git branch name, or a local path to a git repo for use in development mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_tulipa_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get TuLiPa git branch.</span>

<span class="sd">    Can be a git branch name, or a local path to a git repo for use in development mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.is_cache_db" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">is_cache_db</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Return True if JulES is allowed to use a cache to store precomputed values while building.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_cache_db</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if JulES is allowed to use a cache to store precomputed values while building.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_cache_db</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.is_skip_install_dependencies" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">is_skip_install_dependencies</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Return True if install julia dependencies will be skipped during JulES.solve.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_skip_install_dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True if install julia dependencies will be skipped during JulES.solve.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_install_dependencies</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_all_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_all_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug all optimization solvers.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_all_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug all optimization solvers.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_clearing_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_clearing_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the clearing optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_clearing_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the clearing optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_clearing_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_end_value_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_end_value_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the end value optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_end_value_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the end value optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_end_value_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_long_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_long_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the long-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_long_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the long-term optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_long_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_med_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_med_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the medium-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_med_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the medium-term optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_med_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_short_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_short_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the short-term optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_short_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the short-term optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_short_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_subsystem_master_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_subsystem_master_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the subsystem master optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_subsystem_master_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the subsystem master optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_master_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_debug_subsystem_sub_opt_solver" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_debug_subsystem_sub_opt_solver</span><span class="p">(</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set whether to debug the subsystem sub optimization solver.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_debug_subsystem_sub_opt_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set whether to debug the subsystem sub optimization solver.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_debug_subsystem_sub_opt_solver</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_force_julia_install" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_force_julia_install</span><span class="p">(</span><span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set bool for force new julia install.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_force_julia_install</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set bool for force new julia install.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_force_julia_install</span> <span class="o">=</span> <span class="n">flag</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_jules_version" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_jules_version</span><span class="p">(</span><span class="n">jules_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tulipa_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set which version of JulES and/or TuLiPa to use.</p>
<p>Can be a git branch name, or a local path to a git repo which will activate development mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_jules_version</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jules_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">tulipa_branch</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set which version of JulES and/or TuLiPa to use.</span>

<span class="sd">    Can be a git branch name, or a local path to a git repo which will activate development mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">jules_branch</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">tulipa_branch</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">jules_branch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span> <span class="o">=</span> <span class="n">jules_branch</span>
    <span class="k">if</span> <span class="n">tulipa_branch</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="o">=</span> <span class="n">tulipa_branch</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_branch_tulipa</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_branch_jules</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_julia_depot_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_julia_depot_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set folder where Julia installs new packages.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_julia_depot_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set folder where Julia installs new packages.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_depot_path</span> <span class="o">=</span> <span class="n">path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_julia_env_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_julia_env_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set which Julia environment to use.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_julia_env_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set which Julia environment to use.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_env_path</span> <span class="o">=</span> <span class="n">path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_julia_exe_path" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_julia_exe_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set which Julia installation to use.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_julia_exe_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set which Julia installation to use.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">Path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_julia_exe_path</span> <span class="o">=</span> <span class="n">path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_short_term_aggregations" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_short_term_aggregations</span><span class="p">(</span><span class="n">aggregators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set aggregations to create the short term model used in the price prognosis problems.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_short_term_aggregations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">aggregators</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set aggregations to create the short term model used in the price prognosis problems.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_supported_aggregators</span><span class="p">(</span><span class="n">aggregators</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_term_aggregations</span> <span class="o">=</span> <span class="n">aggregators</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESConfig.JulESConfig.set_skipmax_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_skipmax_days</span><span class="p">(</span><span class="n">days</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set number of days between calculation of medium and long term storage values.</p>
<p>This can speed up a simulation as medium and long term price prognosis problems, and long term
storage value problems are solved less often. The cost is less good storage values. The longer between
re-calculation of storage values, the bigger negative impact on simulation result quality.</p>
<p>If skipmax_days = 6 and clearing_days = 2, JulES will calculate medium and long
term storage values every 3rd simulation step.</p>
<p>Short term price prognosis problems and storage values problems (i.e. for batteries) are not affected by this
setting, and are calculated every simulation step.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESConfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_skipmax_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">days</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set number of days between calculation of medium and long term storage values.</span>

<span class="sd">    This can speed up a simulation as medium and long term price prognosis problems, and long term</span>
<span class="sd">    storage value problems are solved less often. The cost is less good storage values. The longer between</span>
<span class="sd">    re-calculation of storage values, the bigger negative impact on simulation result quality.</span>

<span class="sd">    If skipmax_days = 6 and clearing_days = 2, JulES will calculate medium and long</span>
<span class="sd">    term storage values every 3rd simulation step.</span>

<span class="sd">    Short term price prognosis problems and storage values problems (i.e. for batteries) are not affected by this</span>
<span class="sd">    setting, and are calculated every simulation step.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">days</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">days</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_warn_skipmax_days</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;Unusually high value for skipmax_days: &quot;</span>
            <span class="sa">f</span><span class="s2">&quot;Medium and long term storage values updated only </span><span class="si">{</span><span class="n">days</span><span class="si">}</span><span class="s2">th day. &quot;</span>
            <span class="s2">&quot;This can give poor simulation results due to poor storage utilization.&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skipmax_days</span> <span class="o">=</span> <span class="n">days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="framjules.JulESTimeResolution" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>JulESTimeResolution</code>


</h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h4 id="framjules.JulESTimeResolution.JulESTimeResolution" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulESTimeResolution</code>


</h4>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.Base">Base</span></code></p>



        <p>Time resolution settings for JulES (only some are modifiable).</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulESTimeResolution</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Time resolution settings for JulES (only some are modifiable).&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create instance with default values.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_days</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">=</span> <span class="mi">5</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_incremented_divisor</span><span class="p">(</span>
            <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
            <span class="n">divisor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="p">,</span>
            <span class="n">num_increments</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_blocks</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_hours</span> <span class="o">=</span> <span class="mi">6</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_blocks</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_hours</span> <span class="o">=</span> <span class="mi">6</span>

        <span class="n">med_days</span><span class="p">,</span> <span class="n">long_days</span><span class="p">,</span> <span class="n">med_storage_days</span><span class="p">,</span> <span class="n">long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_med_long_days_and_storage_days</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span> <span class="o">=</span> <span class="n">med_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span> <span class="o">=</span> <span class="n">long_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span> <span class="o">=</span> <span class="n">med_storage_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span> <span class="o">=</span> <span class="n">long_storage_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_target_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set prefered value for length in days of end value problems.</span>

<span class="sd">        Will choose a close valid value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_target_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set prefered value for long_storage_days.</span>

<span class="sd">        Will choose a close valid value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_target_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set prefered value for horizon length in days in medium prognosis problem.</span>

<span class="sd">        Will choose a close valid value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_num_period</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set length of clearing problem in days.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="n">x</span>

        <span class="n">clearing_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="p">,</span> <span class="n">clearing_minutes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span><span class="p">,</span> <span class="n">clearing_minutes</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">clearing_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;clearing_market_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; in clearing_days in minutes (</span><span class="si">{</span><span class="n">clearing_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">clearing_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;clearing_storage_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; in clearing_days in minutes (</span><span class="si">{</span><span class="n">clearing_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_short_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set length of short term prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">=</span> <span class="n">x</span>

        <span class="n">short_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span><span class="p">,</span> <span class="n">short_minutes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span><span class="p">,</span> <span class="n">short_minutes</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">short_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;short_market_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; in short_days in minutes (</span><span class="si">{</span><span class="n">short_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">short_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;short_storage_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
                <span class="sa">f</span><span class="s2">&quot; in short_days in minutes (</span><span class="si">{</span><span class="n">short_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set target length of prognosis problems in days.</span>

<span class="sd">        Will set med_days and long_days and make sure their sum is minimum this length.</span>

<span class="sd">        Will set short_days if target_lookahead_days &lt; short_days.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span> <span class="o">=</span> <span class="n">x</span>

        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_short_days</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="n">med_days</span><span class="p">,</span> <span class="n">long_days</span><span class="p">,</span> <span class="n">med_storage_days</span><span class="p">,</span> <span class="n">long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_med_long_days_and_storage_days</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span> <span class="o">=</span> <span class="n">med_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span> <span class="o">=</span> <span class="n">long_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span> <span class="o">=</span> <span class="n">med_storage_days</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span> <span class="o">=</span> <span class="n">long_storage_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set market period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_hourly</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set storage period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_short_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set market period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_short_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set storage period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get length of clearing problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get length of short prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get target (minimum) length of prognosis problems in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get length of medium prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get length of long prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_med_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get storage period length in medium prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get storage period length in long prognosis problem in days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get market period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get storage period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get market period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get storage period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_adaptive_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get number of market periods long prognosis problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_blocks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_adaptive_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get resolution in hours used in clustering of market period blocks in medium prognosis problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_hours</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_med_adaptive_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get number of market periods long prognosis problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_blocks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_med_adaptive_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get resolution in hours used in clustering of market period blocks in medium prognosis problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_hours</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get prefered value for long_storage_days.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get prefered value for horizon length of medium prognosis problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_target_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get prefered value for horizon length of end value problem.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get number of days in horizon of end value problems.&quot;&quot;&quot;</span>
        <span class="n">target_horizon_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_ev_days</span><span class="p">()</span>
        <span class="n">long_period_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_storage_days</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">target_horizon_days</span> <span class="o">/</span> <span class="n">long_period_days</span><span class="p">)</span> <span class="o">*</span> <span class="n">long_period_days</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_content_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return dict of all settings. Useful to get an overview.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;clearing_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_days</span><span class="p">(),</span>
            <span class="s2">&quot;short_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_days</span><span class="p">(),</span>
            <span class="s2">&quot;med_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_days</span><span class="p">(),</span>
            <span class="s2">&quot;long_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_days</span><span class="p">(),</span>
            <span class="s2">&quot;long_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_storage_days</span><span class="p">(),</span>
            <span class="s2">&quot;med_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_storage_days</span><span class="p">(),</span>
            <span class="s2">&quot;clearing_market_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">(),</span>
            <span class="s2">&quot;clearing_storage_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_storage_minutes</span><span class="p">(),</span>
            <span class="s2">&quot;short_market_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_market_minutes</span><span class="p">(),</span>
            <span class="s2">&quot;short_storage_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_storage_minutes</span><span class="p">(),</span>
            <span class="s2">&quot;long_adaptive_blocks&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_adaptive_blocks</span><span class="p">(),</span>
            <span class="s2">&quot;long_adaptive_hours&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_adaptive_hours</span><span class="p">(),</span>
            <span class="s2">&quot;med_adaptive_blocks&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_adaptive_blocks</span><span class="p">(),</span>
            <span class="s2">&quot;med_adaptive_hours&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_adaptive_hours</span><span class="p">(),</span>
            <span class="s2">&quot;target_lookahead_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_lookahead_days</span><span class="p">(),</span>
            <span class="s2">&quot;target_long_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_long_storage_days</span><span class="p">(),</span>
            <span class="s2">&quot;target_med_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_med_days</span><span class="p">(),</span>
            <span class="s2">&quot;target_ev_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_ev_days</span><span class="p">(),</span>
            <span class="s2">&quot;ev_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ev_days</span><span class="p">(),</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_med_long_days_and_storage_days</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">target_lookahead_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">clearing_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">short_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the valid configuration that is closest to the user supplied targets.&quot;&quot;&quot;</span>
        <span class="n">med_period</span> <span class="o">=</span> <span class="n">clearing_days</span> <span class="o">+</span> <span class="n">short_days</span>

        <span class="n">possible_med_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_possible_med_pairs</span><span class="p">(</span><span class="n">med_period</span><span class="p">,</span> <span class="n">target_lookahead_days</span><span class="p">,</span> <span class="n">short_days</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">possible_med_pairs</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">clearing_days</span> <span class="o">+</span> <span class="n">short_days</span><span class="p">]</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">candidates</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">med_period</span><span class="p">,</span> <span class="n">med_num_periods</span> <span class="ow">in</span> <span class="n">possible_med_pairs</span><span class="p">:</span>
            <span class="n">possible_long_pairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_possible_long_pairs</span><span class="p">(</span>
                <span class="n">med_period</span><span class="p">,</span>
                <span class="n">med_num_periods</span><span class="p">,</span>
                <span class="n">target_lookahead_days</span><span class="p">,</span>
                <span class="n">short_days</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">long_period</span><span class="p">,</span> <span class="n">long_num_periods</span> <span class="ow">in</span> <span class="n">possible_long_pairs</span><span class="p">:</span>
                <span class="n">med_days</span> <span class="o">=</span> <span class="n">med_period</span> <span class="o">*</span> <span class="n">med_num_periods</span>
                <span class="n">long_days</span> <span class="o">=</span> <span class="n">long_period</span> <span class="o">*</span> <span class="n">long_num_periods</span>
                <span class="n">candidate</span> <span class="o">=</span> <span class="p">(</span><span class="n">med_days</span><span class="p">,</span> <span class="n">long_days</span><span class="p">,</span> <span class="n">med_period</span><span class="p">,</span> <span class="n">long_period</span><span class="p">)</span>
                <span class="n">candidates</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">candidate</span><span class="p">)</span>

        <span class="n">target_med_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_med_days</span><span class="p">()</span>
        <span class="n">target_long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_long_storage_days</span><span class="p">()</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">distance_from_targets</span><span class="p">(</span><span class="n">candidate</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">:</span>
            <span class="n">med_days</span> <span class="o">=</span> <span class="n">candidate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">long_storage_days</span> <span class="o">=</span> <span class="n">candidate</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
            <span class="n">med_square_diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">target_med_days</span> <span class="o">-</span> <span class="n">med_days</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">long_square_diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">target_long_storage_days</span> <span class="o">-</span> <span class="n">long_storage_days</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="k">return</span> <span class="n">med_square_diff</span> <span class="o">+</span> <span class="n">long_square_diff</span>

        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">distance_from_targets</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_possible_med_pairs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">med_period</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">target_lookahead_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">short_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fuzz number of med storage periods to get more candidates.&quot;&quot;&quot;</span>
        <span class="n">target_med_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_med_days</span><span class="p">()</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">target_med_days</span> <span class="o">/</span> <span class="n">med_period</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]:</span>
            <span class="n">implied_target_lookahead_days</span> <span class="o">=</span> <span class="n">med_period</span> <span class="o">*</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">short_days</span>
            <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">implied_target_lookahead_days</span> <span class="o">&lt;=</span> <span class="n">target_lookahead_days</span><span class="p">:</span>
                <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">med_period</span><span class="p">,</span> <span class="n">m</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_possible_long_pairs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">med_period</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">med_num_periods</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">target_lookahead_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">short_days</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find valid long pairs. Valid if long_period is divisor of med_days.&quot;&quot;&quot;</span>
        <span class="n">target_long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_long_storage_days</span><span class="p">()</span>
        <span class="n">med_days</span> <span class="o">=</span> <span class="n">med_period</span> <span class="o">*</span> <span class="n">med_num_periods</span>
        <span class="n">divisors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_divisors</span><span class="p">(</span><span class="n">med_days</span><span class="p">)</span>
        <span class="n">divisors</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">divisors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">abs</span><span class="p">(</span><span class="n">target_long_storage_days</span> <span class="o">-</span> <span class="n">x</span><span class="p">))</span>
        <span class="n">divisors</span> <span class="o">=</span> <span class="n">divisors</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
        <span class="n">out</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">long_period</span> <span class="ow">in</span> <span class="n">divisors</span><span class="p">:</span>
            <span class="n">long_num_periods</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">target_lookahead_days</span> <span class="o">-</span> <span class="n">med_days</span> <span class="o">-</span> <span class="n">short_days</span><span class="p">)</span> <span class="o">/</span> <span class="n">long_period</span><span class="p">)</span>
            <span class="n">out</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">long_period</span><span class="p">,</span> <span class="n">long_num_periods</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">out</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_divisors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return sorted list of divisors of n.</span>

<span class="sd">        Inspiration from: https://stackoverflow.com/questions/171765/what-is-the-best-way-to-get-all-the-divisors-of-a-number</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">divs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">divs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="o">/</span> <span class="n">i</span><span class="p">)])</span>
        <span class="n">divs</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">n</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">divs</span><span class="p">)))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_incremented_divisor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">divisor</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">num_increments</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get divisor of n num_increments greater than k if &lt;= n else n.&quot;&quot;&quot;</span>
        <span class="n">divs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_divisors</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">divs</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">divisor</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">divisor</span><span class="si">}</span><span class="s2"> is not a divisor of </span><span class="si">{</span><span class="n">n</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
        <span class="k">return</span> <span class="n">divs</span><span class="p">[</span><span class="nb">min</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="n">num_increments</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">divs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_hourly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span><span class="o">.</span><span class="n">is_integer</span><span class="p">():</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Currently, JulES only support hourly resolutions.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Create instance with default values.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create instance with default values.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_days</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">7</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">7</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span> <span class="o">=</span> <span class="mi">365</span> <span class="o">*</span> <span class="mi">3</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">=</span> <span class="mi">5</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">3</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_incremented_divisor</span><span class="p">(</span>
        <span class="n">n</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
        <span class="n">divisor</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="p">,</span>
        <span class="n">num_increments</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_blocks</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_hours</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_blocks</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_hours</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="n">med_days</span><span class="p">,</span> <span class="n">long_days</span><span class="p">,</span> <span class="n">med_storage_days</span><span class="p">,</span> <span class="n">long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_med_long_days_and_storage_days</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span> <span class="o">=</span> <span class="n">med_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span> <span class="o">=</span> <span class="n">long_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span> <span class="o">=</span> <span class="n">med_storage_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span> <span class="o">=</span> <span class="n">long_storage_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_clearing_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get length of clearing problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get length of clearing problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_market_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_clearing_market_minutes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get market period length in clearing problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get market period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_clearing_storage_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_clearing_storage_minutes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get storage period length in clearing problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_clearing_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get storage period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_content_dict" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_content_dict</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Return dict of all settings. Useful to get an overview.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_content_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return dict of all settings. Useful to get an overview.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;clearing_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_days</span><span class="p">(),</span>
        <span class="s2">&quot;short_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_days</span><span class="p">(),</span>
        <span class="s2">&quot;med_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_days</span><span class="p">(),</span>
        <span class="s2">&quot;long_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_days</span><span class="p">(),</span>
        <span class="s2">&quot;long_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_storage_days</span><span class="p">(),</span>
        <span class="s2">&quot;med_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_storage_days</span><span class="p">(),</span>
        <span class="s2">&quot;clearing_market_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">(),</span>
        <span class="s2">&quot;clearing_storage_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_clearing_storage_minutes</span><span class="p">(),</span>
        <span class="s2">&quot;short_market_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_market_minutes</span><span class="p">(),</span>
        <span class="s2">&quot;short_storage_minutes&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_short_storage_minutes</span><span class="p">(),</span>
        <span class="s2">&quot;long_adaptive_blocks&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_adaptive_blocks</span><span class="p">(),</span>
        <span class="s2">&quot;long_adaptive_hours&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_adaptive_hours</span><span class="p">(),</span>
        <span class="s2">&quot;med_adaptive_blocks&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_adaptive_blocks</span><span class="p">(),</span>
        <span class="s2">&quot;med_adaptive_hours&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_med_adaptive_hours</span><span class="p">(),</span>
        <span class="s2">&quot;target_lookahead_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_lookahead_days</span><span class="p">(),</span>
        <span class="s2">&quot;target_long_storage_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_long_storage_days</span><span class="p">(),</span>
        <span class="s2">&quot;target_med_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_med_days</span><span class="p">(),</span>
        <span class="s2">&quot;target_ev_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_ev_days</span><span class="p">(),</span>
        <span class="s2">&quot;ev_days&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_ev_days</span><span class="p">(),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_ev_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_ev_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get number of days in horizon of end value problems.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of days in horizon of end value problems.&quot;&quot;&quot;</span>
    <span class="n">target_horizon_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_target_ev_days</span><span class="p">()</span>
    <span class="n">long_period_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_long_storage_days</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">target_horizon_days</span> <span class="o">/</span> <span class="n">long_period_days</span><span class="p">)</span> <span class="o">*</span> <span class="n">long_period_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_blocks" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_adaptive_blocks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get number of market periods long prognosis problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_adaptive_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of market periods long prognosis problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_blocks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_long_adaptive_hours" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_adaptive_hours</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get resolution in hours used in clustering of market period blocks in medium prognosis problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_adaptive_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get resolution in hours used in clustering of market period blocks in medium prognosis problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_adaptive_hours</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_long_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get length of long prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get length of long prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_long_storage_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_storage_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get storage period length in long prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get storage period length in long prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_blocks" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_med_adaptive_blocks</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get number of market periods long prognosis problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_med_adaptive_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of market periods long prognosis problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_blocks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_med_adaptive_hours" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_med_adaptive_hours</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get resolution in hours used in clustering of market period blocks in medium prognosis problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_med_adaptive_hours</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get resolution in hours used in clustering of market period blocks in medium prognosis problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_adaptive_hours</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_med_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_med_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get length of medium prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get length of medium prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_med_storage_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_med_storage_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get storage period length in medium prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_med_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get storage period length in medium prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_short_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get length of short prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get length of short prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_short_market_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_market_minutes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get market period length in short prognosis problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get market period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_short_storage_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_storage_minutes</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get storage period length in short prognosis problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get storage period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_target_ev_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_target_ev_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get prefered value for horizon length of end value problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get prefered value for horizon length of end value problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_target_long_storage_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_target_long_storage_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get prefered value for long_storage_days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get prefered value for long_storage_days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_target_lookahead_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_target_lookahead_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get target (minimum) length of prognosis problems in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get target (minimum) length of prognosis problems in days.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.get_target_med_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_target_med_days</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Get prefered value for horizon length of medium prognosis problem.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_target_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get prefered value for horizon length of medium prognosis problem.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_clearing_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set length of clearing problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set length of clearing problem in days.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">=</span> <span class="n">x</span>

    <span class="n">clearing_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="p">,</span> <span class="n">clearing_minutes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span><span class="p">,</span> <span class="n">clearing_minutes</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">clearing_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;clearing_market_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; in clearing_days in minutes (</span><span class="si">{</span><span class="n">clearing_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">clearing_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;clearing_storage_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; in clearing_days in minutes (</span><span class="si">{</span><span class="n">clearing_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_market_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_clearing_market_minutes</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set market period length in clearing problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set market period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_hourly</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_market_minutes</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_clearing_storage_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_clearing_storage_minutes</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set storage period length in clearing problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_clearing_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set storage period length in clearing problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_storage_minutes</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_short_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_short_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set length of short term prognosis problem in days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_short_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set length of short term prognosis problem in days.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">=</span> <span class="n">x</span>

    <span class="n">short_minutes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span><span class="p">,</span> <span class="n">short_minutes</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span><span class="p">,</span> <span class="n">short_minutes</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">short_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;short_market_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; in short_days in minutes (</span><span class="si">{</span><span class="n">short_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">short_minutes</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;short_storage_minutes (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span><span class="si">}</span><span class="s2">) does not go up&quot;</span>
            <span class="sa">f</span><span class="s2">&quot; in short_days in minutes (</span><span class="si">{</span><span class="n">short_minutes</span><span class="si">}</span><span class="s2">).&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_short_market_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_short_market_minutes</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set market period length in short prognosis problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_short_market_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set market period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_market_minutes</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_short_storage_minutes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_short_storage_minutes</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set storage period length in short prognosis problem in minutes. Currently only support whole hours.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_short_storage_minutes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set storage period length in short prognosis problem in minutes. Currently only support whole hours.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short_storage_minutes</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_target_ev_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_target_ev_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set prefered value for length in days of end value problems.</p>
<p>Will choose a close valid value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_target_ev_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set prefered value for length in days of end value problems.</span>

<span class="sd">    Will choose a close valid value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_ev_days</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_target_long_storage_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_target_long_storage_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set prefered value for long_storage_days.</p>
<p>Will choose a close valid value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_target_long_storage_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set prefered value for long_storage_days.</span>

<span class="sd">    Will choose a close valid value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_long_storage_days</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_target_lookahead_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_target_lookahead_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set target length of prognosis problems in days.</p>
<p>Will set med_days and long_days and make sure their sum is minimum this length.</p>
<p>Will set short_days if target_lookahead_days &lt; short_days.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_target_lookahead_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set target length of prognosis problems in days.</span>

<span class="sd">    Will set med_days and long_days and make sure their sum is minimum this length.</span>

<span class="sd">    Will set short_days if target_lookahead_days &lt; short_days.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_short_days</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="n">med_days</span><span class="p">,</span> <span class="n">long_days</span><span class="p">,</span> <span class="n">med_storage_days</span><span class="p">,</span> <span class="n">long_storage_days</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_med_long_days_and_storage_days</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_target_lookahead_days</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_med_days</span> <span class="o">=</span> <span class="n">med_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_days</span> <span class="o">=</span> <span class="n">long_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_med_storage_days</span> <span class="o">=</span> <span class="n">med_storage_days</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_storage_days</span> <span class="o">=</span> <span class="n">long_storage_days</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h5 id="framjules.JulESTimeResolution.JulESTimeResolution.set_target_med_days" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_target_med_days</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h5>


    <div class="doc doc-contents ">

        <p>Set prefered value for horizon length in days in medium prognosis problem.</p>
<p>Will choose a close valid value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/JulESTimeResolution.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_target_med_days</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set prefered value for horizon length in days in medium prognosis problem.</span>

<span class="sd">    Will choose a close valid value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_int</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">lower_bound</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing_days</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_days</span><span class="p">,</span> <span class="n">upper_bound</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_target_med_num_period</span> <span class="o">=</span> <span class="n">x</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="framjules.loaders" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>loaders</code>


</h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h4 id="framjules.loaders.time_vector_loaders" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>time_vector_loaders</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h5 id="framjules.loaders.time_vector_loaders.DemandJulESH5TimeVectorLoader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DemandJulESH5TimeVectorLoader</code>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            JulESH5TimeVectorLoader (framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader)" href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader">JulESH5TimeVectorLoader</a></code></p>



        <p>Workaround to get demand results and at the same time avoid name conflicts.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DemandJulESH5TimeVectorLoader</span><span class="p">(</span><span class="n">JulESH5TimeVectorLoader</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Workaround to get demand results and at the same time avoid name conflicts.&quot;&quot;&quot;</span>

    <span class="n">_SUPPORTED_SUFFIXES</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.h5&quot;</span><span class="p">]</span>
    <span class="n">_SEARCH_FIELDS</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;demandnames&quot;</span><span class="p">,</span> <span class="s2">&quot;priceindex&quot;</span><span class="p">,</span> <span class="s2">&quot;demandvalues&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_DEFAULT_INDEX</span> <span class="o">=</span> <span class="s2">&quot;priceindex&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulESH5TimeVectorLoader</code>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.loaders.loaders.FileLoader">FileLoader</span></code>, <code><span title="framcore.loaders.loaders.TimeVectorLoader">TimeVectorLoader</span></code></p>



        <p>Loader for JulES H5 files containing time vectors.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulESH5TimeVectorLoader</span><span class="p">(</span><span class="n">FileLoader</span><span class="p">,</span> <span class="n">TimeVectorLoader</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Loader for JulES H5 files containing time vectors.&quot;&quot;&quot;</span>

    <span class="n">_SUPPORTED_SUFFIXES</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.h5&quot;</span><span class="p">]</span>
    <span class="c1"># find time vector id in one of the names, then use the corresponding names to get the data</span>
    <span class="n">_SEARCH_FIELDS</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;areanames&quot;</span><span class="p">,</span> <span class="s2">&quot;priceindex&quot;</span><span class="p">,</span> <span class="s2">&quot;pricematrix&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;batnames&quot;</span><span class="p">,</span> <span class="s2">&quot;batindex&quot;</span><span class="p">,</span> <span class="s2">&quot;batmatrix&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;resnames&quot;</span><span class="p">,</span> <span class="s2">&quot;resindex&quot;</span><span class="p">,</span> <span class="s2">&quot;resmatrix_water&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;othernames_Vars_Power&quot;</span><span class="p">,</span> <span class="s2">&quot;priceindex&quot;</span><span class="p">,</span> <span class="s2">&quot;othervalues_Vars_Power&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;othernames_Vars_Hydro&quot;</span><span class="p">,</span> <span class="s2">&quot;resindex&quot;</span><span class="p">,</span> <span class="s2">&quot;othervalues_Vars_Hydro&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
        <span class="p">(</span>
            <span class="s2">&quot;storagenames&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stateindex&quot;</span><span class="p">,</span>
            <span class="s2">&quot;storagevalues_main&quot;</span><span class="p">,</span>
            <span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_DEFAULT_INDEX</span> <span class="o">=</span> <span class="s2">&quot;priceindex&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">units</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
        <span class="n">relative_loc</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_whole_years</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize the NVEH5TimeVectorLoader.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">relative_loc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TimeIndex</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_units</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_whole_years</span> <span class="o">=</span> <span class="n">is_whole_years</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clear cached data.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_reference_period</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_max_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
        <span class="k">return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_zero_one_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the values for a given vector id.</span>

<span class="sd">        Args:</span>
<span class="sd">            vector_id: (str)</span>

<span class="sd">        Returns:</span>
<span class="sd">            NDArray: Values for the vector id.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_exsists</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_multiple_fields</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vector_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span>
            <span class="n">id_field</span><span class="p">,</span> <span class="n">values_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_id_values_field</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="n">id_field</span><span class="p">]])</span>
                <span class="n">values_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">values_field</span><span class="p">])</span>
                <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">id_</span><span class="p">:</span> <span class="n">values_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">id_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ids</span><span class="p">)}</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
        <span class="c1"># index may not use all values</span>
        <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_index</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
        <span class="n">vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">vector</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeIndex</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Find the time index for a given vector id.</span>

<span class="sd">        Args:</span>
<span class="sd">            vector_id: (str)</span>

<span class="sd">        Returns:</span>
<span class="sd">            TimeIndex</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_id_exsists</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>  <span class="c1"># calls get_ids which calls _get_ids which sets _id_fields_map</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_multiple_fields</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>  <span class="c1"># therefore we can use this afterwards</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">index_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">index_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">):</span>
                <span class="n">t0</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span>
                <span class="n">t1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">(</span>
                    <span class="n">start_time</span><span class="o">=</span><span class="n">t0</span><span class="p">,</span>
                    <span class="n">period_duration</span><span class="o">=</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">,</span>
                    <span class="n">num_periods</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">]),</span>
                    <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">is_whole_years</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_whole_years</span><span class="p">:</span>
                    <span class="c1"># start time for each period</span>
                    <span class="n">datetime_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">]]</span>
                    <span class="n">period_duration</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">datetime_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                    <span class="c1"># add end index since JulES index represents periods</span>
                    <span class="n">datetime_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datetime_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">period_duration</span><span class="p">)</span>
                    <span class="n">num_periods</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">datetime_list</span><span class="p">)</span>

                    <span class="c1"># find last index before new iso year</span>
                    <span class="n">last_in_year_ix</span> <span class="o">=</span> <span class="n">num_periods</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="k">while</span> <span class="n">last_in_year_ix</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">last_in_year_ix</span> <span class="o">-=</span> <span class="mi">1</span>
                        <span class="n">this_period</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span><span class="p">]</span>
                        <span class="n">next_period</span> <span class="o">=</span> <span class="n">this_period</span> <span class="o">+</span> <span class="n">period_duration</span>
                        <span class="n">this_year</span> <span class="o">=</span> <span class="n">this_period</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
                        <span class="n">next_year</span> <span class="o">=</span> <span class="n">next_period</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
                        <span class="k">if</span> <span class="n">next_year</span> <span class="o">&gt;</span> <span class="n">this_year</span><span class="p">:</span>
                            <span class="k">break</span>

                    <span class="n">last_in_year</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span><span class="p">]</span>

                    <span class="n">first_next_year</span> <span class="o">=</span> <span class="n">last_in_year</span><span class="o">.</span><span class="n">fromisocalendar</span><span class="p">(</span><span class="n">last_in_year</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">last_in_year</span> <span class="o">+</span> <span class="n">period_duration</span> <span class="o">==</span> <span class="n">first_next_year</span><span class="p">:</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">(</span>
                            <span class="n">start_time</span><span class="o">=</span><span class="n">datetime_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                            <span class="n">period_duration</span><span class="o">=</span><span class="n">period_duration</span><span class="p">,</span>
                            <span class="n">num_periods</span><span class="o">=</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                            <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="n">last_in_year</span> <span class="o">+</span> <span class="n">period_duration</span> <span class="o">&gt;</span> <span class="n">first_next_year</span><span class="p">:</span>
                        <span class="c1"># TODO: test (only reachable without profiles as ProfileTimeIndex enforces whole years)</span>
                        <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_next_year</span>
                        <span class="k">del</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">2</span> <span class="p">:]</span>  <span class="c1"># (slice delete does not error when out-of-bounds)</span>
                        <span class="n">index</span> <span class="o">=</span> <span class="n">ListTimeIndex</span><span class="p">(</span>
                            <span class="n">datetime_list</span><span class="o">=</span><span class="n">datetime_list</span><span class="p">,</span>
                            <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                            <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">n</span> <span class="o">=</span> <span class="n">last_in_year_ix</span>
                        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Unexpected last_in_year + period_duration &lt; first_next_year.</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;vector_id = </span><span class="si">{</span><span class="n">vector_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;last_in_year = </span><span class="si">{</span><span class="n">last_in_year</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;period_duration = </span><span class="si">{</span><span class="n">period_duration</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;first_next_year = </span><span class="si">{</span><span class="n">first_next_year</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;datetime_list around last_in_year_ix = </span><span class="si">{</span><span class="n">datetime_list</span><span class="p">[</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="p">)</span>
                        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="n">index_field</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="n">index_field</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the unit of the time vector.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get metadata from the file.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_id_values_field</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">search_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">search_fields</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">search_fields</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_id_fields_map</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_id_fields_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">search_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">search_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">new_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">item</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="n">search_name</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]</span>
                        <span class="k">for</span> <span class="n">vector_id</span> <span class="ow">in</span> <span class="n">new_ids</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">vector_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">search_name</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">search_name</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_multiple_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_create_id_fields_map</span><span class="p">()</span>
        <span class="c1"># check if the vector id is found in multiple fields.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">[</span><span class="n">vector_id</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Vector ID </span><span class="si">{</span><span class="n">vector_id</span><span class="si">}</span><span class="s2"> found in multiple fields: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span><span class="si">}</span><span class="s2">. &quot;</span>
                <span class="s2">&quot;Could not determine which field to use.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_fingerprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fingerprint</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the fingerprint of the NVEH5TimeVectorLoader.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check if self and other are equal.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return hash of NVEH5TimeVectorLoader object.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span>
                <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span><span class="p">),</span>
            <span class="p">),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__eq__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__eq__</span><span class="p">(</span><span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Check if self and other are equal.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="nb">object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if self and other are equal.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">get_source</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__hash__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__hash__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return hash of NVEH5TimeVectorLoader object.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return hash of NVEH5TimeVectorLoader object.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span>
        <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span>
            <span class="nb">frozenset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_SEARCH_FIELDS</span><span class="p">),</span>
        <span class="p">),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">units</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">relative_loc</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">is_whole_years</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize the NVEH5TimeVectorLoader.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">units</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">relative_loc</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">is_whole_years</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize the NVEH5TimeVectorLoader.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">relative_loc</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TimeIndex</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_units</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_is_whole_years</span> <span class="o">=</span> <span class="n">is_whole_years</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">set</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.clear_cache" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">clear_cache</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Clear cached data.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">clear_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear cached data.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_fingerprint" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_fingerprint</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Fingerprint</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the fingerprint of the NVEH5TimeVectorLoader.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_fingerprint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Fingerprint</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the fingerprint of the NVEH5TimeVectorLoader.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_index</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeIndex</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Find the time index for a given vector id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vector_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(str)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="framcore.timeindexes.TimeIndex">TimeIndex</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>TimeIndex</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TimeIndex</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the time index for a given vector id.</span>

<span class="sd">    Args:</span>
<span class="sd">        vector_id: (str)</span>

<span class="sd">    Returns:</span>
<span class="sd">        TimeIndex</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id_exsists</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>  <span class="c1"># calls get_ids which calls _get_ids which sets _id_fields_map</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_multiple_fields</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>  <span class="c1"># therefore we can use this afterwards</span>
    <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">index_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id_fields_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="p">(</span><span class="n">index_field</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">):</span>
            <span class="n">t0</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">t1</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">(</span>
                <span class="n">start_time</span><span class="o">=</span><span class="n">t0</span><span class="p">,</span>
                <span class="n">period_duration</span><span class="o">=</span><span class="n">t1</span> <span class="o">-</span> <span class="n">t0</span><span class="p">,</span>
                <span class="n">num_periods</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">]),</span>
                <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">index</span><span class="o">.</span><span class="n">is_whole_years</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_whole_years</span><span class="p">:</span>
                <span class="c1"># start time for each period</span>
                <span class="n">datetime_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">decode</span><span class="p">(),</span> <span class="n">fmt</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="n">index_field</span><span class="p">]]</span>
                <span class="n">period_duration</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">datetime_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

                <span class="c1"># add end index since JulES index represents periods</span>
                <span class="n">datetime_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datetime_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">period_duration</span><span class="p">)</span>
                <span class="n">num_periods</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">datetime_list</span><span class="p">)</span>

                <span class="c1"># find last index before new iso year</span>
                <span class="n">last_in_year_ix</span> <span class="o">=</span> <span class="n">num_periods</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">while</span> <span class="n">last_in_year_ix</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">last_in_year_ix</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="n">this_period</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span><span class="p">]</span>
                    <span class="n">next_period</span> <span class="o">=</span> <span class="n">this_period</span> <span class="o">+</span> <span class="n">period_duration</span>
                    <span class="n">this_year</span> <span class="o">=</span> <span class="n">this_period</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
                    <span class="n">next_year</span> <span class="o">=</span> <span class="n">next_period</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
                    <span class="k">if</span> <span class="n">next_year</span> <span class="o">&gt;</span> <span class="n">this_year</span><span class="p">:</span>
                        <span class="k">break</span>

                <span class="n">last_in_year</span> <span class="o">=</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span><span class="p">]</span>

                <span class="n">first_next_year</span> <span class="o">=</span> <span class="n">last_in_year</span><span class="o">.</span><span class="n">fromisocalendar</span><span class="p">(</span><span class="n">last_in_year</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">last_in_year</span> <span class="o">+</span> <span class="n">period_duration</span> <span class="o">==</span> <span class="n">first_next_year</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">(</span>
                        <span class="n">start_time</span><span class="o">=</span><span class="n">datetime_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                        <span class="n">period_duration</span><span class="o">=</span><span class="n">period_duration</span><span class="p">,</span>
                        <span class="n">num_periods</span><span class="o">=</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">last_in_year</span> <span class="o">+</span> <span class="n">period_duration</span> <span class="o">&gt;</span> <span class="n">first_next_year</span><span class="p">:</span>
                    <span class="c1"># TODO: test (only reachable without profiles as ProfileTimeIndex enforces whole years)</span>
                    <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">first_next_year</span>
                    <span class="k">del</span> <span class="n">datetime_list</span><span class="p">[</span><span class="n">last_in_year_ix</span> <span class="o">+</span> <span class="mi">2</span> <span class="p">:]</span>  <span class="c1"># (slice delete does not error when out-of-bounds)</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">ListTimeIndex</span><span class="p">(</span>
                        <span class="n">datetime_list</span><span class="o">=</span><span class="n">datetime_list</span><span class="p">,</span>
                        <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">extrapolate_first_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">extrapolate_last_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">n</span> <span class="o">=</span> <span class="n">last_in_year_ix</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Unexpected last_in_year + period_duration &lt; first_next_year.</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;vector_id = </span><span class="si">{</span><span class="n">vector_id</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;last_in_year = </span><span class="si">{</span><span class="n">last_in_year</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;period_duration = </span><span class="si">{</span><span class="n">period_duration</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;first_next_year = </span><span class="si">{</span><span class="n">first_next_year</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;datetime_list around last_in_year_ix = </span><span class="si">{</span><span class="n">datetime_list</span><span class="p">[</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="n">index_field</span><span class="p">]</span> <span class="o">=</span> <span class="n">index</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_index</span><span class="p">[</span><span class="n">index_field</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_metadata" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_metadata</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get metadata from the file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_metadata</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get metadata from the file.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_reference_period" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_reference_period</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return None.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_reference_period</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_unit" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_unit</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the unit of the time vector.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the unit of the time vector.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.get_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_values</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Find the values for a given vector id.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>vector_id</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>(str)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>NDArray</code></td>            <td>
                  <code><span title="numpy.typing.NDArray">NDArray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Values for the vector id.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDArray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the values for a given vector id.</span>

<span class="sd">    Args:</span>
<span class="sd">        vector_id: (str)</span>

<span class="sd">    Returns:</span>
<span class="sd">        NDArray: Values for the vector id.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_id_exsists</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_multiple_fields</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">vector_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span>
        <span class="n">id_field</span><span class="p">,</span> <span class="n">values_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_id_values_field</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_source</span><span class="p">(),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">item</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="n">id_field</span><span class="p">]])</span>
            <span class="n">values_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">values_field</span><span class="p">])</span>
            <span class="n">new_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">id_</span><span class="p">:</span> <span class="n">values_matrix</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">id_</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ids</span><span class="p">)}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
    <span class="c1"># index may not use all values</span>
    <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_index</span><span class="p">(</span><span class="n">vector_id</span><span class="p">)</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">vector_id</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">vector</span><span class="p">[:</span><span class="n">n</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_max_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">is_max_level</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return None.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_max_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader.is_zero_one_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">is_zero_one_profile</span><span class="p">(</span><span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Return None.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_zero_one_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return None.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="framjules.loaders.time_vector_loaders.SupplyJulESH5TimeVectorLoader" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SupplyJulESH5TimeVectorLoader</code>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            JulESH5TimeVectorLoader (framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader)" href="#framjules.loaders.time_vector_loaders.JulESH5TimeVectorLoader">JulESH5TimeVectorLoader</a></code></p>



        <p>Workaround to get supply results and at the same time avoid name conflicts.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/loaders/time_vector_loaders.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SupplyJulESH5TimeVectorLoader</span><span class="p">(</span><span class="n">JulESH5TimeVectorLoader</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Workaround to get supply results and at the same time avoid name conflicts.&quot;&quot;&quot;</span>

    <span class="n">_SUPPORTED_SUFFIXES</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;.h5&quot;</span><span class="p">]</span>
    <span class="n">_SEARCH_FIELDS</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;supplynames&quot;</span><span class="p">,</span> <span class="s2">&quot;priceindex&quot;</span><span class="p">,</span> <span class="s2">&quot;supplyvalues&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>
    <span class="p">]</span>
    <span class="n">_DEFAULT_INDEX</span> <span class="o">=</span> <span class="s2">&quot;priceindex&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h3 id="framjules.solve_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>solve_handler</code>


</h3>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.JulESAggregator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>JulESAggregator</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.JulESAggregator.JulESAggregator" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulESAggregator</code>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.Base">Base</span></code></p>



        <p>Class for defining and calculating aggregated Model instances based on a clearing Model.</p>
<p>In JulES, the clearing Model is the main Model we simulate and collect results from. JulES also has short,
medium and long term price prognosis problems, which needs aggregated Models to be solved efficiently.
This class helps create and manage these aggregated Models.</p>


<details class="note" open>
  <summary>Note</summary>
  <ul>
<li>Short term price prognosis Model is aggregated from a Clearing Model and a list of Aggregators.</li>
<li>Medium term price prognosis Model is aggregated from the Short term Model and a list of Aggregators.</li>
<li>Long term price prognosis Model is aggregated from the medium term Model and a list of Aggregators.</li>
<li>Storages must be the same in all aggregations</li>
<li>At the moment the short, medium, and long term Models are the same, du to limitations in JulES (TODO)</li>
</ul>
</details>







              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulESAggregator</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for defining and calculating aggregated Model instances based on a clearing Model.</span>

<span class="sd">    In JulES, the clearing Model is the main Model we simulate and collect results from. JulES also has short,</span>
<span class="sd">    medium and long term price prognosis problems, which needs aggregated Models to be solved efficiently.</span>
<span class="sd">    This class helps create and manage these aggregated Models.</span>

<span class="sd">    Note:</span>
<span class="sd">        - Short term price prognosis Model is aggregated from a Clearing Model and a list of Aggregators.</span>
<span class="sd">        - Medium term price prognosis Model is aggregated from the Short term Model and a list of Aggregators.</span>
<span class="sd">        - Long term price prognosis Model is aggregated from the medium term Model and a list of Aggregators.</span>
<span class="sd">        - Storages must be the same in all aggregations</span>
<span class="sd">        - At the moment the short, medium, and long term Models are the same, du to limitations in JulES (TODO)</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span>
        <span class="n">short</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
        <span class="n">medium</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
        <span class="n">long</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a JulESAggregator instance.</span>

<span class="sd">        Args:</span>
<span class="sd">            clearing (Model): The clearing Model to aggregate from.</span>
<span class="sd">            short (list[Aggregator]): List of aggregations to create the short term price prognosis Model from clearing.</span>
<span class="sd">            medium (list[Aggregator]): List of aggregations to create the medium term price prognosis Model from short</span>
<span class="sd">            long (list[Aggregator]): List of aggregations to create the long term price prognosis Model from medium.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span> <span class="o">=</span> <span class="n">clearing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">=</span> <span class="n">short</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span> <span class="o">=</span> <span class="n">medium</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long</span> <span class="o">=</span> <span class="n">long</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for short term Model.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for medium term Model.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for long term Model.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to short term Model.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to medium term Model.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to long term Model.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_graph_map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">graph_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of short term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
            <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_aggregation_map</span><span class="p">(),</span>
            <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
            <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
            <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">(),</span>
            <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_short</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_graph_map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">graph_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of medium term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
            <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_aggregation_map</span><span class="p">(),</span>
            <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
            <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
            <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">(),</span>
            <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_medium</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_graph_map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">graph_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of long term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
            <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_long_term_aggregation_map</span><span class="p">(),</span>
            <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
            <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
            <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_long_term_model</span><span class="p">(),</span>
            <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_long</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">assert_equal_storages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">simpler_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">simpler_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">simpler_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check that all Nodes with Storages are preserved between short, medium and long term Models.</span>

<span class="sd">        Args:</span>
<span class="sd">            simpler_short (dict[str, Component]): Short term Model Components.</span>
<span class="sd">            simpler_medium (dict[str, Component]): Medium term Model Components.</span>
<span class="sd">            simpler_long (dict[str, Component]): Long term Model Components.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the Models have differing Storages.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">short_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_short</span><span class="p">)</span>
        <span class="n">medium_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_medium</span><span class="p">)</span>
        <span class="n">long_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_long</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">short_storages</span> <span class="o">!=</span> <span class="n">medium_storages</span> <span class="o">!=</span> <span class="n">long_storages</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Storages are not equal between short, medium and long term Models.&quot;</span>
            <span class="n">unique_short</span> <span class="o">=</span> <span class="n">short_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">medium_storages</span> <span class="o">|</span> <span class="n">long_storages</span><span class="p">)</span>
            <span class="n">unique_medium</span> <span class="o">=</span> <span class="n">medium_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">short_storages</span> <span class="o">|</span> <span class="n">long_storages</span><span class="p">)</span>
            <span class="n">unique_long</span> <span class="o">=</span> <span class="n">long_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">short_storages</span> <span class="o">|</span> <span class="n">medium_storages</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">unique_short</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Short Model: </span><span class="si">{</span><span class="n">unique_short</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">unique_medium</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Medium Model: </span><span class="si">{</span><span class="n">unique_medium</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">unique_long</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Long Model: </span><span class="si">{</span><span class="n">unique_long</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">aggs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">aggs</span><span class="p">:</span>
            <span class="c1"># works because aggregators should not modify the original components</span>
            <span class="c1"># except if disaggregate is called, but we shall only use aggregate</span>
            <span class="n">agg_model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">()</span>
            <span class="n">agg_model</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">get_data</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">agg_model</span> <span class="o">=</span> <span class="n">model</span>
        <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">:</span>
            <span class="n">agg</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">agg_model</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">agg_model</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">aggs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Merge aggregation maps of a list of aggregators from clearing to final.&quot;&quot;&quot;</span>
        <span class="n">clearing_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">ob</span> <span class="ow">in</span> <span class="n">clearing</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ob</span><span class="p">,</span> <span class="n">Component</span><span class="p">)]</span>
        <span class="n">full_agg_mapping</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="p">{</span><span class="n">v</span><span class="p">}</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">clearing_ids</span><span class="p">,</span> <span class="n">clearing_ids</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)}</span>

        <span class="k">for</span> <span class="n">agg</span> <span class="ow">in</span> <span class="n">aggs</span><span class="p">:</span>
            <span class="n">agg_map</span> <span class="o">=</span> <span class="n">agg</span><span class="o">.</span><span class="n">get_aggregation_map</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">detailed_id</span><span class="p">,</span> <span class="n">aggregated_ids</span> <span class="ow">in</span> <span class="n">full_agg_mapping</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">aggregated_ids</span><span class="p">:</span>  <span class="c1"># Component has been deleted by an aggregation.</span>
                    <span class="k">continue</span>

                <span class="n">new_agg_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">agg_id</span> <span class="ow">in</span> <span class="n">aggregated_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">agg_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">agg_map</span><span class="p">:</span>
                        <span class="n">new_agg_ids</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">agg_id</span><span class="p">)</span>  <span class="c1"># left as is</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">agg_map</span><span class="p">[</span><span class="n">agg_id</span><span class="p">]:</span>
                        <span class="c1"># deleted. if all agg_ids are marked deleted, so is the detailed one.</span>
                        <span class="k">continue</span>
                    <span class="n">new_agg_ids</span> <span class="o">|=</span> <span class="n">agg_map</span><span class="p">[</span><span class="n">agg_id</span><span class="p">]</span>

                <span class="n">full_agg_mapping</span><span class="p">[</span><span class="n">detailed_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_agg_ids</span>  <span class="c1"># empty set signifies deleted component</span>

        <span class="k">return</span> <span class="n">full_agg_mapping</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_graph_aggregation_map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">original_agg_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
        <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">aggregated</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">graph_aggregated</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create aggregation map with simpler Component IDs based on an original mapping from clearing to aggregated.</span>

<span class="sd">        Use get_top_parent of components to find IDs in original_agg_map then change to the Flow/Node ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            original_agg_map (dict[str, set[str]]): Mapping between Components of clearing and aggregated Models.</span>
<span class="sd">            clearing (dict[str, Component]): Clearing Model with top parents.</span>
<span class="sd">            graph_clearing (dict[str, Component]): Clearing Model version with Flows and Nodes. Derived from</span>
<span class="sd">                                                     clearing.</span>
<span class="sd">            aggregated (dict[str, Component]): Aggregated Model with top parents. Aggregated from clearing.</span>
<span class="sd">            graph_aggregated (dict[str, Component]): Aggregated Model version with Flows and Nodes. Derived from</span>
<span class="sd">                                                       aggregated.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict[str, set[str]]: Mapping between components of simpler clearing and simpler aggregated Models.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">clearing</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
            <span class="n">clearing</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">clearing</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Component</span><span class="p">)}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">aggregated</span><span class="p">,</span> <span class="n">Model</span><span class="p">):</span>
            <span class="n">aggregated</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">aggregated</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Component</span><span class="p">)}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_agg_map_compatibility</span><span class="p">(</span><span class="n">clearing</span><span class="p">,</span> <span class="n">aggregated</span><span class="p">,</span> <span class="n">original_agg_map</span><span class="p">)</span>

        <span class="n">graph_clearing_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_top_parent_to_simple</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="n">clearing</span><span class="p">,</span> <span class="n">simpler</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">)</span>
        <span class="n">graph_aggregated_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_top_parent_to_simple</span><span class="p">(</span><span class="n">original</span><span class="o">=</span><span class="n">aggregated</span><span class="p">,</span> <span class="n">simpler</span><span class="o">=</span><span class="n">graph_aggregated</span><span class="p">)</span>
        <span class="n">simple_agg_map</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">clearing_id</span><span class="p">,</span> <span class="n">agg_ids</span> <span class="ow">in</span> <span class="n">original_agg_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># the two if statements are there for if we want to map only a subset of the simpler Components.</span>
            <span class="k">if</span> <span class="n">clearing_id</span> <span class="ow">in</span> <span class="n">graph_clearing_map</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">agg_ids</span><span class="p">:</span>
                    <span class="k">continue</span>  <span class="c1"># choose not to add deleted components. May change this later.</span>
                <span class="n">simple_agg_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">agg_id</span> <span class="ow">in</span> <span class="n">agg_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">agg_id</span> <span class="ow">in</span> <span class="n">graph_aggregated_map</span><span class="p">:</span>  <span class="c1"># Again to allow subset to be mapped</span>
                        <span class="n">simple_agg_ids</span> <span class="o">|=</span> <span class="n">graph_aggregated_map</span><span class="p">[</span><span class="n">agg_id</span><span class="p">]</span>  <span class="c1"># add set if simple component ids</span>
                <span class="k">if</span> <span class="n">simple_agg_ids</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">graph_clearing_id</span> <span class="ow">in</span> <span class="n">graph_clearing_map</span><span class="p">[</span><span class="n">clearing_id</span><span class="p">]:</span>
                        <span class="n">simple_agg_map</span><span class="p">[</span><span class="n">graph_clearing_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">simple_agg_ids</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_check_agg_map_validity</span><span class="p">(</span><span class="n">graph_clearing</span><span class="p">,</span> <span class="n">graph_aggregated</span><span class="p">,</span> <span class="n">simple_agg_map</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">simple_agg_map</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_agg_map_compatibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">aggregated</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">original_agg_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">clearing</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">original_agg_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="n">missing_in_clearing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">original_agg_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">clearing</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">extra_in_clearing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">clearing</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">original_agg_map</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;clearing is incompatible with the aggregation mapping between clearing and aggregated Models.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Missing in clearing: </span><span class="si">{</span><span class="n">missing_in_clearing</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Extra in clearing: </span><span class="si">{</span><span class="n">extra_in_clearing</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">original_agg_map_values</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">original_agg_map</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">set</span><span class="p">(</span><span class="n">aggregated</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">!=</span> <span class="n">original_agg_map_values</span><span class="p">:</span>
            <span class="n">missing_in_aggregated</span> <span class="o">=</span> <span class="n">original_agg_map_values</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">aggregated</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="n">extra_in_aggregated</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">aggregated</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">original_agg_map_values</span><span class="p">)</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;aggregated is incompatible with the aggregation mapping between clearing and aggregated Models.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Missing in aggregated: </span><span class="si">{</span><span class="n">missing_in_aggregated</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Extra in aggregated: </span><span class="si">{</span><span class="n">extra_in_aggregated</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_agg_map_validity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">original_components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">aggregated_components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">agg_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check Flow and Node rules for all mappings in an aggregation map.&quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">original_id</span><span class="p">,</span> <span class="n">aggregated_ids</span> <span class="ow">in</span> <span class="n">agg_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">component</span> <span class="o">=</span> <span class="n">original_components</span><span class="p">[</span><span class="n">original_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_node_rules</span><span class="p">(</span><span class="n">original_id</span><span class="p">,</span> <span class="n">component</span><span class="p">,</span> <span class="n">aggregated_ids</span><span class="p">,</span> <span class="n">aggregated_components</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)</span> <span class="ow">and</span> <span class="n">component</span><span class="o">.</span><span class="n">get_startupcost</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_check_flow_rules</span><span class="p">(</span><span class="n">original_id</span><span class="p">,</span> <span class="n">aggregated_ids</span><span class="p">,</span> <span class="n">aggregated_components</span><span class="p">,</span> <span class="n">errors</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="p">(</span><span class="n">Flow</span><span class="p">,</span> <span class="n">Node</span><span class="p">)):</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Invalig Model of simpler Components. Must consist of only Flows and Nodes. Found: </span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_report_errors</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_node_rules</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">original_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
        <span class="n">aggregated_ids</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregated_components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">errors</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check rules for Nodes for a Component ID in an aggregation map.</span>

<span class="sd">        A Node on the disaggregated side (keys) must map to exactly one other Node. More keys are alowed to map to the</span>
<span class="sd">        same aggregated Node.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Check rules here?</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">aggregated_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Node with Storage </span><span class="si">{</span><span class="n">original_id</span><span class="si">}</span><span class="s2"> was deleted during aggregations. This is not supported in JulES.&quot;</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">aggregated_storages</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">agg_id</span> <span class="ow">in</span> <span class="n">aggregated_ids</span><span class="p">:</span>
            <span class="n">agg_component</span> <span class="o">=</span> <span class="n">aggregated_components</span><span class="p">[</span><span class="n">agg_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agg_component</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agg_component</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">aggregated_storages</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">agg_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aggregated_storages</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Node with Storage </span><span class="si">{</span><span class="n">original_id</span><span class="si">}</span><span class="s2"> must be connected to exactly one Node with Storage in the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;aggregation map in JulES. Currently connected to: </span><span class="si">{</span><span class="n">aggregated_storages</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_flow_rules</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">original_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">aggregated_ids</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggregated_components</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
        <span class="n">errors</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Check rules for Flows for a Component ID in an aggregation map.</span>

<span class="sd">        A Flow on the disaggregated side (keys) must map to exactly one other Flow. More keys are alowed to map to the</span>
<span class="sd">        same aggregated Flow.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">aggregated_ids</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">e</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Flow with StartUpCost </span><span class="si">{</span><span class="n">original_id</span><span class="si">}</span><span class="s2"> was deleted during aggregations. This is not supported in JulES.&quot;</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">aggregated_flows</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">agg_id</span> <span class="ow">in</span> <span class="n">aggregated_ids</span><span class="p">:</span>
            <span class="n">agg_component</span> <span class="o">=</span> <span class="n">aggregated_components</span><span class="p">[</span><span class="n">agg_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agg_component</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)</span> <span class="ow">and</span> <span class="n">agg_component</span><span class="o">.</span><span class="n">get_startupcost</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">aggregated_flows</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">agg_id</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aggregated_flows</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Flow with StartUpCost </span><span class="si">{</span><span class="n">original_id</span><span class="si">}</span><span class="s2"> must be connected to exactly one Flow with StartUpCost in the &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;aggregation map in JulES. Currently connected to: </span><span class="si">{</span><span class="n">aggregated_flows</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_storages</span><span class="p">(</span><span class="n">simpler</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="n">nodes_with_storages</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">simpler</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">nodes_with_storages</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nodes_with_storages</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_top_parent_to_simple</span><span class="p">(</span><span class="n">original</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">simpler</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Map simpler components to their top parent.&quot;&quot;&quot;</span>
        <span class="n">inv_original</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="n">n</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">original</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="n">simpler_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">simple_id</span><span class="p">,</span> <span class="n">component</span> <span class="ow">in</span> <span class="n">simpler</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">top_parent</span> <span class="o">=</span> <span class="n">component</span><span class="o">.</span><span class="n">get_top_parent</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">top_parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Component </span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s2"> with ID </span><span class="si">{</span><span class="n">simple_id</span><span class="si">}</span><span class="s2"> has no parents. This means it has not been &quot;</span>
                    <span class="s2">&quot;derived from original.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">top_parent_id</span> <span class="o">=</span> <span class="n">inv_original</span><span class="p">[</span><span class="n">top_parent</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Component </span><span class="si">{</span><span class="n">top_parent</span><span class="si">}</span><span class="s2"> does not exist in original Model. This means simpler has not been &quot;</span>
                    <span class="s2">&quot;derived from original.&quot;</span>
                <span class="p">)</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">e</span>
            <span class="k">if</span> <span class="n">top_parent_id</span> <span class="ow">in</span> <span class="n">simpler_map</span><span class="p">:</span>
                <span class="c1"># list has been set, wo we add the simple component id to the</span>
                <span class="n">simpler_map</span><span class="p">[</span><span class="n">top_parent_id</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">simple_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">simpler_map</span><span class="p">[</span><span class="n">top_parent_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">simple_id</span><span class="p">}</span>

        <span class="k">return</span> <span class="n">simpler_map</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">short</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span> <span class="n">medium</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span> <span class="n">long</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Initialize a JulESAggregator instance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>clearing</code>
            </td>
            <td>
                  <code><span title="framcore.Model">Model</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The clearing Model to aggregate from.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>short</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="framcore.aggregators.Aggregator">Aggregator</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of aggregations to create the short term price prognosis Model from clearing.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>medium</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="framcore.aggregators.Aggregator">Aggregator</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of aggregations to create the medium term price prognosis Model from short</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>long</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="framcore.aggregators.Aggregator">Aggregator</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of aggregations to create the long term price prognosis Model from medium.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span>
    <span class="n">short</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
    <span class="n">medium</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
    <span class="n">long</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Aggregator</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a JulESAggregator instance.</span>

<span class="sd">    Args:</span>
<span class="sd">        clearing (Model): The clearing Model to aggregate from.</span>
<span class="sd">        short (list[Aggregator]): List of aggregations to create the short term price prognosis Model from clearing.</span>
<span class="sd">        medium (list[Aggregator]): List of aggregations to create the medium term price prognosis Model from short</span>
<span class="sd">        long (list[Aggregator]): List of aggregations to create the long term price prognosis Model from medium.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span> <span class="o">=</span> <span class="n">clearing</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">=</span> <span class="n">short</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span> <span class="o">=</span> <span class="n">medium</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long</span> <span class="o">=</span> <span class="n">long</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span><span class="p">:</span> <span class="n">Model</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.assert_equal_storages" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">assert_equal_storages</span><span class="p">(</span><span class="n">simpler_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">simpler_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">simpler_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Check that all Nodes with Storages are preserved between short, medium and long term Models.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>simpler_short</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="framcore.components.Component">Component</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Short term Model Components.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>simpler_medium</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="framcore.components.Component">Component</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Medium term Model Components.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>simpler_long</code>
            </td>
            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="framcore.components.Component">Component</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Long term Model Components.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the Models have differing Storages.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">assert_equal_storages</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">simpler_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="n">simpler_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="n">simpler_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check that all Nodes with Storages are preserved between short, medium and long term Models.</span>

<span class="sd">    Args:</span>
<span class="sd">        simpler_short (dict[str, Component]): Short term Model Components.</span>
<span class="sd">        simpler_medium (dict[str, Component]): Medium term Model Components.</span>
<span class="sd">        simpler_long (dict[str, Component]): Long term Model Components.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the Models have differing Storages.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">short_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_short</span><span class="p">)</span>
    <span class="n">medium_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_medium</span><span class="p">)</span>
    <span class="n">long_storages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_storages</span><span class="p">(</span><span class="n">simpler_long</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">short_storages</span> <span class="o">!=</span> <span class="n">medium_storages</span> <span class="o">!=</span> <span class="n">long_storages</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Storages are not equal between short, medium and long term Models.&quot;</span>
        <span class="n">unique_short</span> <span class="o">=</span> <span class="n">short_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">medium_storages</span> <span class="o">|</span> <span class="n">long_storages</span><span class="p">)</span>
        <span class="n">unique_medium</span> <span class="o">=</span> <span class="n">medium_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">short_storages</span> <span class="o">|</span> <span class="n">long_storages</span><span class="p">)</span>
        <span class="n">unique_long</span> <span class="o">=</span> <span class="n">long_storages</span> <span class="o">-</span> <span class="p">(</span><span class="n">short_storages</span> <span class="o">|</span> <span class="n">medium_storages</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">unique_short</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Short Model: </span><span class="si">{</span><span class="n">unique_short</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">unique_medium</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Medium Model: </span><span class="si">{</span><span class="n">unique_medium</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">unique_long</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - Unique Nodes with Storages in Long Model: </span><span class="si">{</span><span class="n">unique_long</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_aggregation_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_term_aggregation_map</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the aggregation map of Components from clearing to long term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to long term Model.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_graph_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_term_graph_map</span><span class="p">(</span><span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">graph_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get aggregation map for version of long term Model with graph of Flows and Nodes.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_graph_map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="n">graph_long</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of long term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
        <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_long_term_aggregation_map</span><span class="p">(),</span>
        <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
        <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_long_term_model</span><span class="p">(),</span>
        <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_long</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_long_term_model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_long_term_model</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Model</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Apply defined aggregations for long term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_long_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for long term Model.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_long_model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_aggregation_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_medium_term_aggregation_map</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the aggregation map of Components from clearing to medium term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to medium term Model.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_graph_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_medium_term_graph_map</span><span class="p">(</span><span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">graph_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get aggregation map for version of medium term Model with graph of Flows and Nodes.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_graph_map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="n">graph_medium</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of medium term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
        <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_aggregation_map</span><span class="p">(),</span>
        <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
        <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">(),</span>
        <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_medium</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_medium_term_model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_medium_term_model</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Model</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Apply defined aggregations for medium term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_medium_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for medium term Model.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_medium_model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_aggregation_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_term_aggregation_map</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get the aggregation map of Components from clearing to short term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the aggregation map of Components from clearing to short term Model.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_aggregation_map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_graph_map" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_term_graph_map</span><span class="p">(</span><span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span> <span class="n">graph_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Get aggregation map for version of short term Model with graph of Flows and Nodes.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_graph_map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
    <span class="n">graph_short</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get aggregation map for version of short term Model with graph of Flows and Nodes.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_graph_aggregation_map</span><span class="p">(</span>
        <span class="n">original_agg_map</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_aggregation_map</span><span class="p">(),</span>
        <span class="n">clearing</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span>
        <span class="n">graph_clearing</span><span class="o">=</span><span class="n">graph_clearing</span><span class="p">,</span>
        <span class="n">aggregated</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">(),</span>
        <span class="n">graph_aggregated</span><span class="o">=</span><span class="n">graph_short</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESAggregator.JulESAggregator.get_short_term_model" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_short_term_model</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Model</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Apply defined aggregations for short term Model.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESAggregator.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_short_term_model</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Model</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply defined aggregations for short term Model.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_aggregate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_short_model</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.JulESNames" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>JulESNames</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.JulESNames.JulESNames" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>JulESNames</code>


</h5>


    <div class="doc doc-contents ">



        <p>Constants (both static and dynamic ones defined in <strong>init</strong>) used in JulES.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/JulESNames.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">JulESNames</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constants (both static and dynamic ones defined in __init__) used in JulES.&quot;&quot;&quot;</span>

    <span class="n">JSON_INDENT</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">YAML_INDENT</span> <span class="o">=</span> <span class="mi">4</span>

    <span class="n">OTHER_TERMS</span> <span class="o">=</span> <span class="s2">&quot;otherterms&quot;</span>
    <span class="n">VARS</span> <span class="o">=</span> <span class="s2">&quot;Vars&quot;</span>

    <span class="n">AGGREGATED</span> <span class="o">=</span> <span class="s2">&quot;aggregated&quot;</span>
    <span class="n">MACRO</span> <span class="o">=</span> <span class="s2">&quot;macro&quot;</span>
    <span class="n">BALANCE_RHSDATA</span> <span class="o">=</span> <span class="s2">&quot;balance&quot;</span>

    <span class="n">FILENAME_CONFIG</span> <span class="o">=</span> <span class="s2">&quot;config.yaml&quot;</span>
    <span class="n">FILENAME_H5_OUTPUT</span> <span class="o">=</span> <span class="s2">&quot;output.h5&quot;</span>
    <span class="n">FILENAME_STORAGE_MAPPING</span> <span class="o">=</span> <span class="s2">&quot;storage_mapping.json&quot;</span>
    <span class="n">FILENAME_START_STORAGES_AGGREGATED</span> <span class="o">=</span> <span class="s2">&quot;start_storages_aggregated.json&quot;</span>
    <span class="n">FILENAME_START_STORAGES_CLEARING</span> <span class="o">=</span> <span class="s2">&quot;start_storages_clearing.json&quot;</span>
    <span class="n">ROOT_FILENAME_DATAELEMENTS</span> <span class="o">=</span> <span class="s2">&quot;data_elements&quot;</span>
    <span class="n">FILENAME_DATAELEMENTS_TIMEVECTORS</span> <span class="o">=</span> <span class="s2">&quot;data_elements_timevectors.json&quot;</span>

    <span class="n">PY_JULES_SETTINGS_NAME</span> <span class="o">=</span> <span class="s2">&quot;python_jules_settings&quot;</span>
    <span class="n">PY_JULES_OUTPUT_NAME</span> <span class="o">=</span> <span class="s2">&quot;python_jules_output&quot;</span>

    <span class="n">MAIN</span> <span class="o">=</span> <span class="s2">&quot;main&quot;</span>
    <span class="n">MISSING_CONFIG</span> <span class="o">=</span> <span class="s2">&quot;missing_config&quot;</span>

    <span class="n">RESULTS</span> <span class="o">=</span> <span class="s2">&quot;results&quot;</span>
    <span class="n">MAINRESULTS</span> <span class="o">=</span> <span class="s2">&quot;mainresults&quot;</span>
    <span class="n">TIMES</span> <span class="o">=</span> <span class="s2">&quot;times&quot;</span>
    <span class="n">SCENARIOS</span> <span class="o">=</span> <span class="s2">&quot;scenarios&quot;</span>
    <span class="n">MEMORY</span> <span class="o">=</span> <span class="s2">&quot;memory&quot;</span>
    <span class="n">STORAGEVALUES</span> <span class="o">=</span> <span class="s2">&quot;storagevalues&quot;</span>
    <span class="n">STORAGEVALUES_ALL_PROBLEMS</span> <span class="o">=</span> <span class="s2">&quot;storagevalues_all_problems&quot;</span>
    <span class="n">ALL</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>

    <span class="n">TERM_DURATION_WEEKS</span> <span class="o">=</span> <span class="s2">&quot;termduration_weeks&quot;</span>
    <span class="n">TERM_DURATION_DAYS</span> <span class="o">=</span> <span class="s2">&quot;termduration_days&quot;</span>
    <span class="n">TERM_DURATION_HOURS</span> <span class="o">=</span> <span class="s2">&quot;termduration_hours&quot;</span>
    <span class="n">SEQUENTIAL_HORIZON</span> <span class="o">=</span> <span class="s2">&quot;SequentialHorizon&quot;</span>
    <span class="n">ADAPTIVE_HORIZON</span> <span class="o">=</span> <span class="s2">&quot;AdaptiveHorizon&quot;</span>

    <span class="n">COMMODITIES</span> <span class="o">=</span> <span class="s2">&quot;commodities&quot;</span>
    <span class="n">POWER</span> <span class="o">=</span> <span class="s2">&quot;Power&quot;</span>
    <span class="n">HYDRO</span> <span class="o">=</span> <span class="s2">&quot;Hydro&quot;</span>
    <span class="n">BATTERY</span> <span class="o">=</span> <span class="s2">&quot;Battery&quot;</span>

    <span class="n">SHRINKAFTER_DAYS</span> <span class="o">=</span> <span class="s2">&quot;startafter_days&quot;</span>
    <span class="n">SHRINKATLEAST_DAYS</span> <span class="o">=</span> <span class="s2">&quot;shrinkatleast_days&quot;</span>

    <span class="n">TWO_STORAGE_DURATION</span> <span class="o">=</span> <span class="s2">&quot;twostorageduration&quot;</span>
    <span class="n">SHORT_STOCH_DURATION_HOURS</span> <span class="o">=</span> <span class="s2">&quot;shortstochduration_hours&quot;</span>
    <span class="n">LONG_STOCH_DURATION_DAYS</span> <span class="o">=</span> <span class="s2">&quot;longstochduration_days&quot;</span>
    <span class="n">LONG_EV_DURATION_DAYS</span> <span class="o">=</span> <span class="s2">&quot;longevduration_days&quot;</span>

    <span class="n">DISTRIBUTION_METHOD_MP</span> <span class="o">=</span> <span class="s2">&quot;distribution_method_mp&quot;</span>
    <span class="n">DISTRIBUTION_METHOD_SP</span> <span class="o">=</span> <span class="s2">&quot;distribution_method_sp&quot;</span>
    <span class="n">BYSIZE</span> <span class="o">=</span> <span class="s2">&quot;bysize&quot;</span>
    <span class="n">ADVANCED</span> <span class="o">=</span> <span class="s2">&quot;advanced&quot;</span>
    <span class="n">STORAGE</span> <span class="o">=</span> <span class="s2">&quot;storage&quot;</span>
    <span class="n">GREEDY</span> <span class="o">=</span> <span class="s2">&quot;greedy&quot;</span>
    <span class="n">WITHMP</span> <span class="o">=</span> <span class="s2">&quot;withmp&quot;</span>

    <span class="n">STATEDEPENDENT_PROD</span> <span class="o">=</span> <span class="s2">&quot;statedependentprod&quot;</span>
    <span class="n">STATEDEPENDENT_PUMP</span> <span class="o">=</span> <span class="s2">&quot;statedependentpump&quot;</span>
    <span class="n">HEADLOSSCOST</span> <span class="o">=</span> <span class="s2">&quot;headlosscost&quot;</span>

    <span class="n">SUBSYSTEMS</span> <span class="o">=</span> <span class="s2">&quot;subsystems&quot;</span>
    <span class="n">RESULTS</span> <span class="o">=</span> <span class="s2">&quot;results&quot;</span>
    <span class="n">STARTSTORAGES</span> <span class="o">=</span> <span class="s2">&quot;startstorages&quot;</span>
    <span class="n">ENDVALUE</span> <span class="o">=</span> <span class="s2">&quot;endvalue&quot;</span>

    <span class="n">OUTPUT_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;outputformat&quot;</span>
    <span class="n">DATETIME_FORMAT</span> <span class="o">=</span> <span class="s2">&quot;datetimeformat&quot;</span>
    <span class="n">DATETIME_FORMAT_JULESIO</span> <span class="o">=</span> <span class="s2">&quot;yyyy-mm-ddTHH:MM:SS&quot;</span>
    <span class="n">HDF5</span> <span class="o">=</span> <span class="s2">&quot;hdf5&quot;</span>
    <span class="n">ELASTIC</span> <span class="o">=</span> <span class="s2">&quot;elastic&quot;</span>
    <span class="n">TRUE</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">FALSE</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">JULIA</span> <span class="o">=</span> <span class="s2">&quot;julia&quot;</span>
    <span class="n">INPUT</span> <span class="o">=</span> <span class="s2">&quot;input&quot;</span>
    <span class="n">OUTPUT_PATH</span> <span class="o">=</span> <span class="s2">&quot;outputpath&quot;</span>
    <span class="n">NUM_CORES</span> <span class="o">=</span> <span class="s2">&quot;numcores&quot;</span>
    <span class="n">DATA_YEARS</span> <span class="o">=</span> <span class="s2">&quot;datayears&quot;</span>
    <span class="n">SCENARIO_YEARS</span> <span class="o">=</span> <span class="s2">&quot;weatheryears&quot;</span>
    <span class="n">WEEK_START</span> <span class="o">=</span> <span class="s2">&quot;weekstart&quot;</span>
    <span class="n">NUM_SIM_YEARS</span> <span class="o">=</span> <span class="s2">&quot;simulationyears&quot;</span>
    <span class="n">EXTRA_STEPS</span> <span class="o">=</span> <span class="s2">&quot;extrasteps&quot;</span>
    <span class="n">SETTINGS</span> <span class="o">=</span> <span class="s2">&quot;settings&quot;</span>
    <span class="n">OUTPUT_NAME</span> <span class="o">=</span> <span class="s2">&quot;outputname&quot;</span>

    <span class="n">OUTPUT_INDEX</span> <span class="o">=</span> <span class="s2">&quot;outputindex&quot;</span>
    <span class="n">WEATHER_YEAR</span> <span class="o">=</span> <span class="s2">&quot;weatheryear&quot;</span>
    <span class="n">DATA_YEAR</span> <span class="o">=</span> <span class="s2">&quot;datayear&quot;</span>

    <span class="n">TIME</span> <span class="o">=</span> <span class="s2">&quot;time&quot;</span>
    <span class="n">WEATHER_YEAR_START</span> <span class="o">=</span> <span class="s2">&quot;weatheryearstart&quot;</span>
    <span class="n">WEATHER_YEAR_STOP</span> <span class="o">=</span> <span class="s2">&quot;weatheryearstop&quot;</span>
    <span class="n">PROB_TIME</span> <span class="o">=</span> <span class="s2">&quot;probtime&quot;</span>
    <span class="n">NORMAL_TIME</span> <span class="o">=</span> <span class="s2">&quot;normaltime&quot;</span>

    <span class="n">FIXED_DATA_TWO_TIME</span> <span class="o">=</span> <span class="s2">&quot;FixedDataTwoTime&quot;</span>
    <span class="n">PHASE_IN_FIXED_DATA_TWO_TIME</span> <span class="o">=</span> <span class="s2">&quot;PhaseinFixedDataTwoTime&quot;</span>

    <span class="n">PHASE_IN_TIME</span> <span class="o">=</span> <span class="s2">&quot;phaseintime&quot;</span>
    <span class="n">PHASE_IN_DELTA_DAYS</span> <span class="o">=</span> <span class="s2">&quot;phaseindelta_days&quot;</span>
    <span class="n">PHASE_IN_DELTA_STEPS</span> <span class="o">=</span> <span class="s2">&quot;phaseinsteps&quot;</span>
    <span class="n">PROBLEMS</span> <span class="o">=</span> <span class="s2">&quot;problems&quot;</span>
    <span class="n">PROGNOSIS</span> <span class="o">=</span> <span class="s2">&quot;prognosis&quot;</span>
    <span class="n">SIMULATION</span> <span class="o">=</span> <span class="s2">&quot;simulation&quot;</span>
    <span class="n">SHRINKABLE</span> <span class="o">=</span> <span class="s2">&quot;shrinkable&quot;</span>
    <span class="n">AGGZONE</span> <span class="o">=</span> <span class="s2">&quot;aggzone&quot;</span>
    <span class="n">AGGSUPPLYN</span> <span class="o">=</span> <span class="s2">&quot;aggsupplyn&quot;</span>
    <span class="n">SHORT_TERM_STORAGE_CUTOFF_HOURS</span> <span class="o">=</span> <span class="s2">&quot;shorttermstoragecutoff_hours&quot;</span>
    <span class="n">SHORTER_THAN_PROGNOSIS_MED_DAYS</span> <span class="o">=</span> <span class="s2">&quot;shorterthanprognosismed_days&quot;</span>
    <span class="n">LONG</span> <span class="o">=</span> <span class="s2">&quot;long&quot;</span>
    <span class="n">MED</span> <span class="o">=</span> <span class="s2">&quot;med&quot;</span>
    <span class="n">SHORT</span> <span class="o">=</span> <span class="s2">&quot;short&quot;</span>
    <span class="n">PROB</span> <span class="o">=</span> <span class="s2">&quot;prob&quot;</span>
    <span class="n">SOLVER</span> <span class="o">=</span> <span class="s2">&quot;solver&quot;</span>
    <span class="n">FUNCTION</span> <span class="o">=</span> <span class="s2">&quot;function&quot;</span>
    <span class="n">AGG_STARTMAG_DICT</span> <span class="o">=</span> <span class="s2">&quot;aggstartmagdict&quot;</span>
    <span class="n">STARTMAG_DICT</span> <span class="o">=</span> <span class="s2">&quot;startmagdict&quot;</span>
    <span class="n">RESIDUAL_AREA_LIST</span> <span class="o">=</span> <span class="s2">&quot;residualarealist&quot;</span>
    <span class="n">END_CONDITION</span> <span class="o">=</span> <span class="s2">&quot;endcondition&quot;</span>
    <span class="n">START_EQUAL_STOP</span> <span class="o">=</span> <span class="s2">&quot;startequalstop&quot;</span>
    <span class="n">MONTHLY_PRICE</span> <span class="o">=</span> <span class="s2">&quot;monthly_price&quot;</span>

    <span class="n">SCENARIO_GENERATION</span> <span class="o">=</span> <span class="s2">&quot;scenariogeneration&quot;</span>
    <span class="n">INFLOW_CLUSTERING_METHOD</span> <span class="o">=</span> <span class="s2">&quot;InflowClusteringMethod&quot;</span>
    <span class="n">NUM_SCEN</span> <span class="o">=</span> <span class="s2">&quot;numscen&quot;</span>
    <span class="n">SCEN_DELTA_DAYS</span> <span class="o">=</span> <span class="s2">&quot;scendelta_days&quot;</span>

    <span class="n">PARTS</span> <span class="o">=</span> <span class="s2">&quot;parts&quot;</span>

    <span class="n">SKIPMAX</span> <span class="o">=</span> <span class="s2">&quot;skipmax&quot;</span>

    <span class="n">HIGHS_PROB</span> <span class="o">=</span> <span class="s2">&quot;HiGHS_Prob()&quot;</span>
    <span class="n">HIGHS_SIMPLEX</span> <span class="o">=</span> <span class="s2">&quot;HighsSimplexMethod()&quot;</span>
    <span class="n">HIGHS_SIMPLEX_NO_WARMSTART</span> <span class="o">=</span> <span class="s2">&quot;HighsSimplexMethod(warmstart=false)&quot;</span>
    <span class="n">HIGHS_SIMPLEX_SIP_NO_WARMSTART</span> <span class="o">=</span> <span class="s2">&quot;HighsSimplexSIPMethod(warmstart=false)&quot;</span>
    <span class="n">JUMP_HIGHS</span> <span class="o">=</span> <span class="s2">&quot;JuMPHiGHSMethod()&quot;</span>

    <span class="n">STOCHASTIC</span> <span class="o">=</span> <span class="s2">&quot;stochastic&quot;</span>
    <span class="n">MAXCUTS</span> <span class="o">=</span> <span class="s2">&quot;maxcuts&quot;</span>
    <span class="n">LB</span> <span class="o">=</span> <span class="s2">&quot;lb&quot;</span>
    <span class="n">RELTOL</span> <span class="o">=</span> <span class="s2">&quot;reltol&quot;</span>
    <span class="n">ONLY_AGG_HYDRO</span> <span class="o">=</span> <span class="s2">&quot;onlyagghydro&quot;</span>
    <span class="n">MASTER</span> <span class="o">=</span> <span class="s2">&quot;master&quot;</span>
    <span class="n">SUBS</span> <span class="o">=</span> <span class="s2">&quot;subs&quot;</span>
    <span class="n">SUB</span> <span class="o">=</span> <span class="s2">&quot;sub&quot;</span>

    <span class="n">HORIZONS</span> <span class="o">=</span> <span class="s2">&quot;horizons&quot;</span>
    <span class="n">HORIZON_DURATION_WEEKS</span> <span class="o">=</span> <span class="s2">&quot;horizonduration_weeks&quot;</span>
    <span class="n">HORIZON_DURATION_HOURS</span> <span class="o">=</span> <span class="s2">&quot;horizonduration_hours&quot;</span>
    <span class="n">PERIOD_DURATION_DAYS</span> <span class="o">=</span> <span class="s2">&quot;periodduration_days&quot;</span>
    <span class="n">PERIOD_DURATION_HOURS</span> <span class="o">=</span> <span class="s2">&quot;periodduration_hours&quot;</span>
    <span class="n">POWER_PARTS</span> <span class="o">=</span> <span class="s2">&quot;powerparts&quot;</span>

    <span class="n">RHSDATA</span> <span class="o">=</span> <span class="s2">&quot;rhsdata&quot;</span>
    <span class="n">FIND_FIRST_DYNAMIC_EXOGEN_PRICE_AH_DATA</span> <span class="o">=</span> <span class="s2">&quot;FindFirstDynamicExogenPriceAHData&quot;</span>
    <span class="n">DYNAMIC_EXOGEN_PRICE_AH_DATA</span> <span class="o">=</span> <span class="s2">&quot;DynamicExogenPriceAHData&quot;</span>
    <span class="n">DYNAMIC_RHS_AH_DATA</span> <span class="o">=</span> <span class="s2">&quot;DynamicRHSAHData&quot;</span>
    <span class="n">RHSMETHOD</span> <span class="o">=</span> <span class="s2">&quot;rhsmethod&quot;</span>
    <span class="n">KMEANS_AH_METHOD</span> <span class="o">=</span> <span class="s2">&quot;KMeansAHMethod()&quot;</span>
    <span class="n">CLUSTERS</span> <span class="o">=</span> <span class="s2">&quot;clusters&quot;</span>
    <span class="n">UNIT_DURATION_HOURS</span> <span class="o">=</span> <span class="s2">&quot;unitduration_hours&quot;</span>

    <span class="n">SETTINGS_SCENARIO_YEAR_START</span> <span class="o">=</span> <span class="s2">&quot;scenarioyearstart&quot;</span>

    <span class="n">CLEARING</span> <span class="o">=</span> <span class="s2">&quot;clearing&quot;</span>
    <span class="n">SHORT_TERM</span> <span class="o">=</span> <span class="s2">&quot;short_term&quot;</span>
    <span class="n">MEDIUM_TERM</span> <span class="o">=</span> <span class="s2">&quot;medium_term&quot;</span>
    <span class="n">LONG_TERM</span> <span class="o">=</span> <span class="s2">&quot;long_term&quot;</span>

    <span class="n">MARKET</span> <span class="o">=</span> <span class="s2">&quot;Power&quot;</span>
    <span class="n">STORAGE_SYSTEM</span> <span class="o">=</span> <span class="s2">&quot;Hydro&quot;</span>
    <span class="n">SHORT_TERM_STORAGE</span> <span class="o">=</span> <span class="s2">&quot;Battery&quot;</span>

    <span class="n">DFMTin</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%S&quot;</span>

    <span class="n">FLOW</span> <span class="o">=</span> <span class="s2">&quot;Flow&quot;</span>
    <span class="n">STORAGE</span> <span class="o">=</span> <span class="s2">&quot;Storage&quot;</span>
    <span class="n">BALANCE</span> <span class="o">=</span> <span class="s2">&quot;Balance&quot;</span>
    <span class="n">COMMODITY</span> <span class="o">=</span> <span class="s2">&quot;Commodity&quot;</span>
    <span class="n">PARAM</span> <span class="o">=</span> <span class="s2">&quot;Param&quot;</span>
    <span class="n">CAPACITY</span> <span class="o">=</span> <span class="s2">&quot;Capacity&quot;</span>
    <span class="n">RHSTERM</span> <span class="o">=</span> <span class="s2">&quot;RHSTerm&quot;</span>
    <span class="n">TIMEVECTOR</span> <span class="o">=</span> <span class="s2">&quot;TimeVector&quot;</span>
    <span class="n">TIMEINDEX</span> <span class="o">=</span> <span class="s2">&quot;TimeIndex&quot;</span>
    <span class="n">TABLE</span> <span class="o">=</span> <span class="s2">&quot;Table&quot;</span>
    <span class="n">TIMEDELTA</span> <span class="o">=</span> <span class="s2">&quot;TimeDelta&quot;</span>
    <span class="n">TIMEVALUES</span> <span class="o">=</span> <span class="s2">&quot;TimeValues&quot;</span>
    <span class="n">ARROW</span> <span class="o">=</span> <span class="s2">&quot;Arrow&quot;</span>
    <span class="n">LOSS</span> <span class="o">=</span> <span class="s2">&quot;Loss&quot;</span>
    <span class="n">PRICE</span> <span class="o">=</span> <span class="s2">&quot;Price&quot;</span>
    <span class="n">CONVERSION</span> <span class="o">=</span> <span class="s2">&quot;Conversion&quot;</span>
    <span class="n">COST</span> <span class="o">=</span> <span class="s2">&quot;Cost&quot;</span>
    <span class="n">STARTUPCOST</span> <span class="o">=</span> <span class="s2">&quot;StartUpCost&quot;</span>

    <span class="n">BASEFLOW</span> <span class="o">=</span> <span class="s2">&quot;BaseFlow&quot;</span>
    <span class="n">BASEBALANCE</span> <span class="o">=</span> <span class="s2">&quot;BaseBalance&quot;</span>
    <span class="n">EXOGENBALANCE</span> <span class="o">=</span> <span class="s2">&quot;ExogenBalance&quot;</span>
    <span class="n">BASESTORAGE</span> <span class="o">=</span> <span class="s2">&quot;BaseStorage&quot;</span>
    <span class="n">MWTOGWHPARAM</span> <span class="o">=</span> <span class="s2">&quot;MWToGWhParam&quot;</span>
    <span class="n">M3STOMM3PARAM</span> <span class="o">=</span> <span class="s2">&quot;M3SToMM3Param&quot;</span>
    <span class="n">MEANSERIESPARAM</span> <span class="o">=</span> <span class="s2">&quot;MeanSeriesParam&quot;</span>
    <span class="n">MSTIMEDELTA</span> <span class="o">=</span> <span class="s2">&quot;MsTimeDelta&quot;</span>
    <span class="n">INFINITETIMEVECTOR</span> <span class="o">=</span> <span class="s2">&quot;InfiniteTimeVector&quot;</span>
    <span class="n">ROTATINGTIMEVECTOR</span> <span class="o">=</span> <span class="s2">&quot;RotatingTimeVector&quot;</span>
    <span class="n">ONEYEARTIMEVECTOR</span> <span class="o">=</span> <span class="s2">&quot;OneYearTimeVector&quot;</span>
    <span class="n">CONSTANTTIMEVECTOR</span> <span class="o">=</span> <span class="s2">&quot;ConstantTimeVector&quot;</span>
    <span class="n">RANGETIMEINDEX</span> <span class="o">=</span> <span class="s2">&quot;RangeTimeIndex&quot;</span>
    <span class="n">VECTORTIMEINDEX</span> <span class="o">=</span> <span class="s2">&quot;VectorTimeIndex&quot;</span>
    <span class="n">BASETABLE</span> <span class="o">=</span> <span class="s2">&quot;BaseTable&quot;</span>
    <span class="n">COLUMNTIMEVALUES</span> <span class="o">=</span> <span class="s2">&quot;ColumnTimeValues&quot;</span>
    <span class="n">VECTORTIMEVALUES</span> <span class="o">=</span> <span class="s2">&quot;VectorTimeValues&quot;</span>
    <span class="n">LOWERZEROCAPACITY</span> <span class="o">=</span> <span class="s2">&quot;LowerZeroCapacity&quot;</span>
    <span class="n">POSITIVECAPACITY</span> <span class="o">=</span> <span class="s2">&quot;PositiveCapacity&quot;</span>
    <span class="n">BASERHSTERM</span> <span class="o">=</span> <span class="s2">&quot;BaseRHSTerm&quot;</span>
    <span class="n">BASEARROW</span> <span class="o">=</span> <span class="s2">&quot;BaseArrow&quot;</span>
    <span class="n">SEGMENTEDARROW</span> <span class="o">=</span> <span class="s2">&quot;SegmentedArrow&quot;</span>
    <span class="n">SIMPLELOSS</span> <span class="o">=</span> <span class="s2">&quot;SimpleLoss&quot;</span>
    <span class="n">COSTTERM</span> <span class="o">=</span> <span class="s2">&quot;CostTerm&quot;</span>
    <span class="n">SIMPLESTARTUPCOST</span> <span class="o">=</span> <span class="s2">&quot;SimpleStartUpCost&quot;</span>

    <span class="n">LOSSFACTORKEY</span> <span class="o">=</span> <span class="s2">&quot;LossFactor&quot;</span>
    <span class="n">UTILIZATIONKEY</span> <span class="o">=</span> <span class="s2">&quot;Utilization&quot;</span>
    <span class="n">FALLBACK_UTILIZATION</span> <span class="o">=</span> <span class="mf">0.5</span>

    <span class="n">STARTCOSTKEY</span> <span class="o">=</span> <span class="s2">&quot;StartCost&quot;</span>
    <span class="n">MINSTABLELOADKEY</span> <span class="o">=</span> <span class="s2">&quot;MinStableLoad&quot;</span>

    <span class="n">WHICHCONCEPT</span> <span class="o">=</span> <span class="s2">&quot;WhichConcept&quot;</span>
    <span class="n">WHICHINSTANCE</span> <span class="o">=</span> <span class="s2">&quot;WhichInstance&quot;</span>

    <span class="n">DIRECTIONKEY</span> <span class="o">=</span> <span class="s2">&quot;Direction&quot;</span>
    <span class="n">DIRECTIONIN</span> <span class="o">=</span> <span class="s2">&quot;In&quot;</span>
    <span class="n">DIRECTIONOUT</span> <span class="o">=</span> <span class="s2">&quot;Out&quot;</span>

    <span class="n">BOUNDKEY</span> <span class="o">=</span> <span class="s2">&quot;Bound&quot;</span>
    <span class="n">BOUNDUPPER</span> <span class="o">=</span> <span class="s2">&quot;Upper&quot;</span>
    <span class="n">BOUNDLOWER</span> <span class="o">=</span> <span class="s2">&quot;Lower&quot;</span>

    <span class="n">LEVEL</span> <span class="o">=</span> <span class="s2">&quot;Level&quot;</span>
    <span class="n">PROFILE</span> <span class="o">=</span> <span class="s2">&quot;Profile&quot;</span>
    <span class="n">VALUE</span> <span class="o">=</span> <span class="s2">&quot;Value&quot;</span>
    <span class="n">START</span> <span class="o">=</span> <span class="s2">&quot;Start&quot;</span>
    <span class="n">STEPS</span> <span class="o">=</span> <span class="s2">&quot;Steps&quot;</span>
    <span class="n">DELTA</span> <span class="o">=</span> <span class="s2">&quot;Delta&quot;</span>
    <span class="n">PERIOD</span> <span class="o">=</span> <span class="s2">&quot;Period&quot;</span>
    <span class="n">VECTOR</span> <span class="o">=</span> <span class="s2">&quot;Vector&quot;</span>
    <span class="n">MATRIX</span> <span class="o">=</span> <span class="s2">&quot;Matrix&quot;</span>
    <span class="n">NAMES</span> <span class="o">=</span> <span class="s2">&quot;Names&quot;</span>
    <span class="n">NAME</span> <span class="o">=</span> <span class="s2">&quot;Name&quot;</span>

    <span class="n">METADATA</span> <span class="o">=</span> <span class="s2">&quot;Metadata&quot;</span>
    <span class="n">GLOBALENEQ</span> <span class="o">=</span> <span class="s2">&quot;GlobalEneq&quot;</span>
    <span class="n">RESIDUALHINT</span> <span class="o">=</span> <span class="s2">&quot;Residualhint&quot;</span>
    <span class="n">STORAGEHINT</span> <span class="o">=</span> <span class="s2">&quot;Storagehint&quot;</span>

    <span class="n">JULES_CONFIG</span> <span class="o">=</span> <span class="s2">&quot;config.yaml&quot;</span>
    <span class="n">OUTPUT_FOLDER</span> <span class="o">=</span> <span class="s2">&quot;output&quot;</span>
    <span class="n">JULIA_ENV_NAME</span> <span class="o">=</span> <span class="s2">&quot;JulES_julia_env&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamically settable names for JulES.&quot;&quot;&quot;</span>
        <span class="c1"># This is set in BuildHandler when we build data elements</span>
        <span class="c1"># for the clearing model. It is used in ConfigHandler in</span>
        <span class="c1"># connection with using AdaptiveHorizon</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_exogenous_balance_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dummy_exogenous_profile_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.JulESNames.JulESNames.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Dynamically settable names for JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/JulESNames.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dynamically settable names for JulES.&quot;&quot;&quot;</span>
    <span class="c1"># This is set in BuildHandler when we build data elements</span>
    <span class="c1"># for the clearing model. It is used in ConfigHandler in</span>
    <span class="c1"># connection with using AdaptiveHorizon</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dummy_exogenous_balance_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dummy_exogenous_profile_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.SolveHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>SolveHandler</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.SolveHandler.SolveHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SolveHandler</code>


</h5>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.Base">Base</span></code></p>



        <p>Common data methods for different simulation modes.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SolveHandler</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Common data methods for different simulation modes.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">clearing_model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Hold all data and methods needed to solve JulES.&quot;&quot;&quot;</span>
        <span class="n">names</span> <span class="o">=</span> <span class="n">JulESNames</span><span class="p">()</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">short_aggregations</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_short_term_aggregations</span><span class="p">()</span>  <span class="c1"># list of Aggregators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_short_term_aggregations time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">mid_aggregations</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># config.get_mid_term_aggregations()  # not supported yet</span>
        <span class="n">long_aggregations</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># config.get_long_term_aggregations()  # not supported yet</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">aggregator</span> <span class="o">=</span> <span class="n">JulESAggregator</span><span class="p">(</span>
            <span class="n">clearing</span><span class="o">=</span><span class="n">clearing_model</span><span class="p">,</span>
            <span class="n">short</span><span class="o">=</span><span class="n">short_aggregations</span><span class="p">,</span>
            <span class="n">medium</span><span class="o">=</span><span class="n">mid_aggregations</span><span class="p">,</span>
            <span class="n">long</span><span class="o">=</span><span class="n">long_aggregations</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JulESAggregator init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">short_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_short_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">medium_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_medium_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">long_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_long_term_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_long_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">domain_models</span> <span class="o">=</span> <span class="n">DomainModels</span><span class="p">(</span>
            <span class="n">clearing</span><span class="o">=</span><span class="n">clearing_model</span><span class="p">,</span>
            <span class="n">short_term</span><span class="o">=</span><span class="n">short_term_model</span><span class="p">,</span>
            <span class="n">medium_term</span><span class="o">=</span><span class="n">medium_term_model</span><span class="p">,</span>
            <span class="n">long_term</span><span class="o">=</span><span class="n">long_term_model</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DomainModels init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">supported_types</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span>
        <span class="n">forbidden_types</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
        <span class="n">graphs</span> <span class="o">=</span> <span class="n">NodeFlowGraphs</span><span class="p">(</span>
            <span class="n">clearing</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">clearing_model</span><span class="p">),</span>
                <span class="n">supported_types</span><span class="p">,</span>
                <span class="n">forbidden_types</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">short_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">short_term_model</span><span class="p">),</span>
                <span class="n">supported_types</span><span class="p">,</span>
                <span class="n">forbidden_types</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">medium_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">medium_term_model</span><span class="p">),</span>
                <span class="n">supported_types</span><span class="p">,</span>
                <span class="n">forbidden_types</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">long_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">long_term_model</span><span class="p">),</span>
                <span class="n">supported_types</span><span class="p">,</span>
                <span class="n">forbidden_types</span><span class="p">,</span>
            <span class="p">),</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NodeFlowGraphs init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">graph_infos</span> <span class="o">=</span> <span class="n">GraphInfos</span><span class="p">(</span>
            <span class="n">clearing</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">},</span>
            <span class="n">short_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">},</span>
            <span class="n">medium_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">},</span>
            <span class="n">long_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GraphInfos init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="c1"># we check that that aggregated models don&#39;t have different storages</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">aggregator</span><span class="o">.</span><span class="n">assert_equal_storages</span><span class="p">(</span>
            <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span>
            <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span>
            <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;assert_equal_storages time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="n">constructor</span> <span class="o">=</span> <span class="n">CacheDB</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">is_cache_db</span><span class="p">()</span> <span class="k">else</span> <span class="n">ModelDB</span>
        <span class="n">db</span> <span class="o">=</span> <span class="n">constructor</span><span class="p">(</span>
            <span class="n">domain_models</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span>
            <span class="n">domain_models</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span>
            <span class="n">domain_models</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span>
            <span class="n">domain_models</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DB init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_graph_infos</span><span class="p">(</span><span class="n">graph_infos</span><span class="p">,</span> <span class="n">graphs</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">aggregator</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fill_graph_infos time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="c1"># Finally, we set the member data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span> <span class="o">=</span> <span class="n">names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span> <span class="o">=</span> <span class="n">domain_models</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span> <span class="o">=</span> <span class="n">graphs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span> <span class="o">=</span> <span class="n">graph_infos</span>
        <span class="c1"># NB! will be freed after self.configure()</span>
        <span class="c1"># so we don&#39;t hold up memory during run</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span> <span class="o">=</span> <span class="n">db</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build input files for JulES.&quot;&quot;&quot;</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_build_handler</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build configuration file for JulES.&quot;&quot;&quot;</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_config_handler</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run Julia-JulES.&quot;&quot;&quot;</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_run_handler</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set results from Julia-JulES run into domain models.&quot;&quot;&quot;</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_results_handler</span><span class="p">()</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">set_results</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_build_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BuildHandler</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create specialized BuildHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
            <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialBuildHandler</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
            <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
            <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
            <span class="n">domain_models</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span><span class="p">,</span>
            <span class="n">graphs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">,</span>
            <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_config_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConfigHandler</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create specialized ConfigHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
            <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialConfigHandler</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
            <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
            <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
            <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_run_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SerialRunHandler</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create specialized RunHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
        <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">tulipa_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_tulipa_version</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tulipa_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">tulipa_version</span><span class="p">)):</span>
                <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tulipa_version</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;https://github.com/NVE/TuLiPa.git&quot;</span><span class="p">,</span> <span class="n">tulipa_version</span><span class="p">))</span>

        <span class="n">jules_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_jules_version</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">jules_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">Path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">jules_version</span><span class="p">)):</span>
                <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jules_version</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;https://github.com/NVE/JulES.git&quot;</span><span class="p">,</span> <span class="n">jules_version</span><span class="p">))</span>

        <span class="n">dependencies</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;YAML&quot;</span><span class="p">,</span> <span class="s2">&quot;HDF5&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">,</span> <span class="s2">&quot;PythonCall&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
            <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialRunHandler</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;JulES Parallel simulation mode is not yet supported.&quot;</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">handler_constructor</span><span class="o">.</span><span class="n">ENV_NAME</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">JULIA_ENV_NAME</span>
        <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="n">dependencies</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_results_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SerialResultsHandler</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a SerialResultsHandler.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
            <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialResultsHandler</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;JulES Parallel simulation mode is not yet supported.&quot;</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
            <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
            <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
            <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
            <span class="n">graphs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">,</span>
            <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">:</span> <span class="n">Model</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Component</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Component</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fill_graph_infos</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
        <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
        <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Fill graph_info with derived info.&quot;&quot;&quot;</span>
        <span class="c1"># Intent is to gather complex derivations in just one place</span>

        <span class="c1"># NB! Order of below method calls matter</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_basic_node_flow_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_agg_storage_node_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">aggregator</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_agg_storage_node_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>  <span class="c1"># opposite order to check if higher level is short term sss</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_info</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_info</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_market_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="c1"># self.set_agg_market_node_info(graph_infos.clearing, aggregator, graphs.clearing, graphs.short_term)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_jules_id_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">is_aggregated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_jules_id_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">is_aggregated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_jules_id_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_unit_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_unit_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_unit_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_global_eneq_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_global_eneq_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_global_eneq_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_initial_storage</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_agg_initial_storage</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_initial_storage time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="c1"># assert that graph_infos has expected content</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;validation time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_basic_node_flow_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Info directly accessible from Node and Flow API.</span>

<span class="sd">        We also set domain_commodity for Flow as main_node.get_commodity().</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">out_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>

            <span class="n">info</span><span class="o">.</span><span class="n">is_node</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span> <span class="o">=</span> <span class="n">component_id</span>
                <span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span>

            <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_main_node</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span>
                <span class="n">info</span><span class="o">.</span><span class="n">num_arrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">())</span>

            <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">is_short_term_storage</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># TODO: Should be based on storage duration # noqa FIX002</span>

            <span class="n">info</span><span class="o">.</span><span class="n">is_exogenous</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_agg_storage_node_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
        <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Aggregate storages and update info.agg_storage_node_id.&quot;&quot;&quot;</span>
        <span class="n">agg_storage_node_ids</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">n</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">aggregated_graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="n">graph_map</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_short_term_graph_map</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">agg_storage_node_ids</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">member_id</span><span class="p">,</span> <span class="n">agg_node_ids</span> <span class="ow">in</span> <span class="n">graph_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">agg_node_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="k">assert</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="ow">in</span> <span class="n">agg_storage_node_ids</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">agg_node_ids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">member_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">agg_node_id</span> <span class="ow">in</span> <span class="n">agg_node_ids</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">agg_node_id</span> <span class="ow">in</span> <span class="n">agg_storage_node_ids</span><span class="p">:</span>
                        <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span> <span class="o">=</span> <span class="n">agg_node_id</span>
                        <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_agg_market_node_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
        <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Aggregate market nodes and update info.agg_market_node_id.&quot;&quot;&quot;</span>
        <span class="n">market_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">aggregated_graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">out</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">}</span>
        <span class="n">graph_map</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_medium_term_graph_map</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">market_nodes</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">agg_market_node_id</span><span class="p">,</span> <span class="n">member_node_ids</span> <span class="ow">in</span> <span class="n">graph_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">agg_component</span> <span class="o">=</span> <span class="n">aggregated_graph</span><span class="p">[</span><span class="n">agg_market_node_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agg_component</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">agg_component</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">member_node_ids</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">agg_market_node_id</span> <span class="o">=</span> <span class="n">agg_market_node_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_sss_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">detailed_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Storage SubSystem (sss) info.&quot;&quot;&quot;</span>
        <span class="n">include_boundaries</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># so market nodes at the boundary is not incorrectly classified</span>
        <span class="n">subsystems</span> <span class="o">=</span> <span class="n">get_one_commodity_storage_subsystems</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">include_boundaries</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">detailed_graph_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">subsystem_id</span><span class="p">,</span> <span class="p">(</span><span class="n">__</span><span class="p">,</span> <span class="n">subsystem</span><span class="p">,</span> <span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="ow">in</span> <span class="n">subsystems</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">is_short_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_short_term_storage_subsystem</span><span class="p">(</span><span class="n">subsystem</span><span class="p">,</span> <span class="n">detailed_graph_info</span><span class="p">,</span> <span class="n">agg_graph_info</span><span class="p">)</span>

            <span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">SHORT_TERM_STORAGE</span> <span class="k">if</span> <span class="n">is_short_term</span> <span class="k">else</span> <span class="n">names</span><span class="o">.</span><span class="n">STORAGE_SYSTEM</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Warning! No boundary domain commodity found for storage subsystem </span><span class="si">{</span><span class="n">subsystem_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;with members </span><span class="si">{</span><span class="n">subsystem</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
                    <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">jules_commodity</span>
                <span class="k">continue</span>
            <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
            <span class="n">market_commodity</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">))</span>

            <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>

                <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">info</span><span class="o">.</span><span class="n">sss_id</span> <span class="o">=</span> <span class="n">subsystem_id</span>
                <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span> <span class="o">=</span> <span class="n">is_short_term</span>
                <span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span> <span class="o">=</span> <span class="n">market_commodity</span>
                <span class="n">info</span><span class="o">.</span><span class="n">sss_members</span> <span class="o">=</span> <span class="n">subsystem</span>

                <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">jules_commodity</span>

            <span class="c1"># all nodes in subsystem get True below since include_boundaries = False</span>
            <span class="c1"># Flow get False if any arrow points to market commodity</span>
            <span class="k">assert</span> <span class="n">include_boundaries</span> <span class="ow">is</span> <span class="kc">False</span>
            <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
                <span class="n">component</span> <span class="o">=</span> <span class="n">detailed_graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Flow</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                        <span class="n">node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>
                        <span class="n">node_info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">==</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span><span class="p">:</span>
                            <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="kc">False</span>
                            <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_is_short_term_storage_subsystem</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subsystem</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">detailed_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return True if all storage nodes in subsystem are short term.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_short_term_storage</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span> <span class="ow">and</span> <span class="n">agg_graph_info</span><span class="p">:</span>
                <span class="n">agg_info</span> <span class="o">=</span> <span class="n">agg_graph_info</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">agg_info</span><span class="o">.</span><span class="n">is_short_term_storage</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Detailed storages in subsystem are short term but aggregated is not for </span><span class="si">{</span><span class="n">component_id</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">,</span>
                        <span class="s2">&quot; Set storage system to long term. This is a limitation in JulES.jl where detailed and&quot;</span><span class="p">,</span>
                        <span class="s2">&quot; aggregated models must have the same storage system type to be able to interact.&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                    <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_market_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set is_market_node and if so, also set jules_commodity to market.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span>

            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">MARKET</span>

        <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow_to_exogenous</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">:</span>
                <span class="n">flow</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                    <span class="n">node_info</span> <span class="o">=</span> <span class="n">out_graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
                    <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
                        <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">:</span>
                            <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow_to_exogenous</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_jules_id_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">is_aggregated</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add jules ids in compliance with required format. Warning! Julia-JulES currently requires this format.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span><span class="o">.</span><span class="n">jules_global_eneq_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">names</span><span class="o">.</span><span class="n">GLOBALENEQ</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">is_aggregated</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">_hydro_reservoir&quot;</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Reservoir_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">_hydro_reservoir&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Reservoir_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">elif</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_unit_info</span><span class="p">(</span>  <span class="c1"># noqa: C901</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate all types of target units.</span>

<span class="sd">        Need from config:</span>
<span class="sd">        - unit_money</span>
<span class="sd">        - unit_stock per commodity for each storage_node</span>
<span class="sd">        - unit_flow per commodity for each flow</span>

<span class="sd">        Will derive:</span>
<span class="sd">        - unit_price per commodity for each market_node</span>
<span class="sd">        - unit_cost for each flow</span>
<span class="sd">        - unit_coeffs for each flow</span>
<span class="sd">        - unit_eneq for each sss_member in each sss</span>

<span class="sd">        And also for each flow, we derive:</span>
<span class="sd">        - unit_param_type</span>
<span class="sd">        - unit_param_flow_unit</span>
<span class="sd">        - unit_param_flow_unit</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">unit_money</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_currency</span><span class="p">()</span>

        <span class="n">node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">}</span>
        <span class="n">flow_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span>
        <span class="n">market_node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">}</span>
        <span class="n">storage_node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">}</span>
        <span class="n">sss_member_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span><span class="p">}</span>

        <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">market_node_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_money</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">storage_node_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">unit_flow</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_flow</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="o">=</span> <span class="n">unit_flow</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="o">=</span> <span class="n">unit_stock</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="n">flow_info</span><span class="p">,</span> <span class="n">storage_node_info</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">unit_flow</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_flow</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
                <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="o">=</span> <span class="n">unit_flow</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="o">=</span> <span class="n">unit_stock</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_money</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span> <span class="s2">&quot;MW&quot;</span><span class="p">):</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">MWTOGWHPARAM</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_flow</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_stock</span> <span class="o">=</span> <span class="s2">&quot;GWh&quot;</span>
                <span class="k">elif</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span> <span class="s2">&quot;m3/s&quot;</span><span class="p">):</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">M3STOMM3PARAM</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_flow</span> <span class="o">=</span> <span class="s2">&quot;m3/s&quot;</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_stock</span> <span class="o">=</span> <span class="s2">&quot;Mm3&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unsupported unit_flow: </span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span><span class="p">:</span>
                    <span class="n">seconds</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">seconds</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_storage_minutes</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_flow_result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">/(</span><span class="si">{</span><span class="n">seconds</span><span class="si">}</span><span class="s2"> * s)&quot;</span>

        <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                <span class="n">from_node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>
                <span class="n">unit_coeff</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">from_node_id</span> <span class="o">!=</span> <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">:</span>
                    <span class="n">from_node_unit</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">from_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
                    <span class="n">unit_coeff</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">from_node_unit</span> <span class="o">==</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">from_node_unit</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">from_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">unit_coeff</span>

        <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">sss_member_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">unit_market</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span><span class="p">)</span>
            <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">unit_eneq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_market</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_members</span><span class="p">:</span>
                <span class="n">member_info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                <span class="n">member_info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span> <span class="o">=</span> <span class="n">unit_eneq</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_sss_global_eneq_info</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set global_energy_coefficient using metadata. Convert to usable unit.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">):</span>
                <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="o">=</span> <span class="mf">1.0</span>
                <span class="k">continue</span>

            <span class="n">data_dim</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span>

            <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>
            <span class="n">scen_dim</span> <span class="o">=</span> <span class="n">AverageYearRange</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span><span class="p">)</span>

            <span class="n">metakeys</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_meta_keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;EnergyEqDownstream&quot;</span> <span class="ow">in</span> <span class="n">metakeys</span><span class="p">:</span>
                <span class="n">metadata</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_meta</span><span class="p">(</span><span class="s2">&quot;EnergyEqDownstream&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Missing metadata EnergyEqDownstream for </span><span class="si">{</span><span class="n">component_id</span><span class="si">}</span><span class="s2">, only metadata keys </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">metakeys</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; Object info: </span><span class="si">{</span><span class="n">info</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="n">expr</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

            <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="o">=</span> <span class="n">get_level_value</span><span class="p">(</span>
                <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span><span class="p">,</span>
                <span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>
                <span class="n">data_dim</span><span class="o">=</span><span class="n">data_dim</span><span class="p">,</span>
                <span class="n">scen_dim</span><span class="o">=</span><span class="n">scen_dim</span><span class="p">,</span>
                <span class="n">is_max</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_sss_initial_storage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set sss_initial_storage. Convert to usable unit.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">percentage</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span><span class="o">.</span><span class="n">get_initial_storage_percentage</span><span class="p">()</span>
                <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">percentage</span> <span class="o">&lt;=</span> <span class="mi">1</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">percentage</span> <span class="o">=</span> <span class="mf">0.6</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Missing initial storage for </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">. Using 60 % of capacity.&quot;</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="n">info</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_initial_storage_capacity</span><span class="p">(</span>
                <span class="n">node_id</span><span class="p">,</span>
                <span class="n">node</span><span class="p">,</span>
                <span class="n">info</span><span class="p">,</span>
                <span class="n">percentage</span><span class="p">,</span>
                <span class="n">db</span><span class="p">,</span>
                <span class="n">config</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_initial_storage_capacity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">node_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
        <span class="n">percentage</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">data_dim</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">data_dim</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span>

        <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>
        <span class="n">scen_dim</span> <span class="o">=</span> <span class="n">AverageYearRange</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span><span class="p">)</span>

        <span class="n">capacity</span><span class="p">:</span> <span class="n">StockVolume</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span><span class="o">.</span><span class="n">get_capacity</span><span class="p">()</span>
        <span class="n">data_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">capacity</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span>
            <span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>
            <span class="n">level_period</span><span class="o">=</span><span class="n">data_dim</span><span class="p">,</span>
            <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">scen_dim</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span><span class="p">,</span>
            <span class="n">is_max_level</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">data_value</span> <span class="o">*</span> <span class="n">percentage</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_agg_initial_storage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">det_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set global_eneq and initial_storage in aggregated graph_info from detailed graph_info.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">det_id</span><span class="p">,</span> <span class="n">det</span> <span class="ow">in</span> <span class="n">det_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">det</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">det</span><span class="o">.</span><span class="n">agg_storage_node_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">agg</span> <span class="o">=</span> <span class="n">agg_graph_info</span><span class="p">[</span><span class="n">det</span><span class="o">.</span><span class="n">agg_storage_node_id</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">=</span> <span class="mf">0.0</span>

            <span class="n">add_value</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_initial_storage</span>
            <span class="k">if</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_global_eneq_value</span><span class="p">:</span>
                <span class="n">add_value</span> <span class="o">*=</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_global_eneq_value</span>

            <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">+=</span> <span class="n">add_value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">clearing_model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Hold all data and methods needed to solve JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">clearing_model</span><span class="p">:</span> <span class="n">Model</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hold all data and methods needed to solve JulES.&quot;&quot;&quot;</span>
    <span class="n">names</span> <span class="o">=</span> <span class="n">JulESNames</span><span class="p">()</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">short_aggregations</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_short_term_aggregations</span><span class="p">()</span>  <span class="c1"># list of Aggregators</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_short_term_aggregations time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">mid_aggregations</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># config.get_mid_term_aggregations()  # not supported yet</span>
    <span class="n">long_aggregations</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># config.get_long_term_aggregations()  # not supported yet</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">aggregator</span> <span class="o">=</span> <span class="n">JulESAggregator</span><span class="p">(</span>
        <span class="n">clearing</span><span class="o">=</span><span class="n">clearing_model</span><span class="p">,</span>
        <span class="n">short</span><span class="o">=</span><span class="n">short_aggregations</span><span class="p">,</span>
        <span class="n">medium</span><span class="o">=</span><span class="n">mid_aggregations</span><span class="p">,</span>
        <span class="n">long</span><span class="o">=</span><span class="n">long_aggregations</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;JulESAggregator init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">short_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_short_term_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_short_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">medium_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_medium_term_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_medium_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">long_term_model</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_long_term_model</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;get_long_term_model init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">domain_models</span> <span class="o">=</span> <span class="n">DomainModels</span><span class="p">(</span>
        <span class="n">clearing</span><span class="o">=</span><span class="n">clearing_model</span><span class="p">,</span>
        <span class="n">short_term</span><span class="o">=</span><span class="n">short_term_model</span><span class="p">,</span>
        <span class="n">medium_term</span><span class="o">=</span><span class="n">medium_term_model</span><span class="p">,</span>
        <span class="n">long_term</span><span class="o">=</span><span class="n">long_term_model</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DomainModels init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">supported_types</span> <span class="o">=</span> <span class="p">(</span><span class="n">Flow</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span>
    <span class="n">forbidden_types</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">()</span>
    <span class="n">graphs</span> <span class="o">=</span> <span class="n">NodeFlowGraphs</span><span class="p">(</span>
        <span class="n">clearing</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">clearing_model</span><span class="p">),</span>
            <span class="n">supported_types</span><span class="p">,</span>
            <span class="n">forbidden_types</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">short_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">short_term_model</span><span class="p">),</span>
            <span class="n">supported_types</span><span class="p">,</span>
            <span class="n">forbidden_types</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">medium_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">medium_term_model</span><span class="p">),</span>
            <span class="n">supported_types</span><span class="p">,</span>
            <span class="n">forbidden_types</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">long_term</span><span class="o">=</span><span class="n">get_supported_components</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_components</span><span class="p">(</span><span class="n">long_term_model</span><span class="p">),</span>
            <span class="n">supported_types</span><span class="p">,</span>
            <span class="n">forbidden_types</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;NodeFlowGraphs init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">graph_infos</span> <span class="o">=</span> <span class="n">GraphInfos</span><span class="p">(</span>
        <span class="n">clearing</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">},</span>
        <span class="n">short_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">},</span>
        <span class="n">medium_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">},</span>
        <span class="n">long_term</span><span class="o">=</span><span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">()</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">},</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;GraphInfos init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="c1"># we check that that aggregated models don&#39;t have different storages</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">aggregator</span><span class="o">.</span><span class="n">assert_equal_storages</span><span class="p">(</span>
        <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span>
        <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span>
        <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;assert_equal_storages time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="n">constructor</span> <span class="o">=</span> <span class="n">CacheDB</span> <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">is_cache_db</span><span class="p">()</span> <span class="k">else</span> <span class="n">ModelDB</span>
    <span class="n">db</span> <span class="o">=</span> <span class="n">constructor</span><span class="p">(</span>
        <span class="n">domain_models</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DB init time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fill_graph_infos</span><span class="p">(</span><span class="n">graph_infos</span><span class="p">,</span> <span class="n">graphs</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">aggregator</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fill_graph_infos time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="c1"># Finally, we set the member data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">folder</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span> <span class="o">=</span> <span class="n">names</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span> <span class="o">=</span> <span class="n">domain_models</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span> <span class="o">=</span> <span class="n">graphs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span> <span class="o">=</span> <span class="n">graph_infos</span>
    <span class="c1"># NB! will be freed after self.configure()</span>
    <span class="c1"># so we don&#39;t hold up memory during run</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span> <span class="o">=</span> <span class="n">db</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.build" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Build input files for JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build input files for JulES.&quot;&quot;&quot;</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_build_handler</span><span class="p">()</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.configure" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">configure</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Build configuration file for JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build configuration file for JulES.&quot;&quot;&quot;</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_config_handler</span><span class="p">()</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">configure</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.create_build_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_build_handler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">BuildHandler</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Create specialized BuildHandler for the chosen simulation mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_build_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BuildHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create specialized BuildHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
        <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialBuildHandler</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
        <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
        <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span><span class="p">,</span>
        <span class="n">graphs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
        <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.create_config_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_config_handler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">ConfigHandler</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Create specialized ConfigHandler for the chosen simulation mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_config_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConfigHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create specialized ConfigHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
        <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialConfigHandler</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
        <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
        <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.create_results_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_results_handler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SerialResultsHandler</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Create a SerialResultsHandler.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_results_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SerialResultsHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a SerialResultsHandler.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
        <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialResultsHandler</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;JulES Parallel simulation mode is not yet supported.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span>
        <span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span>
        <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span>
        <span class="n">graphs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.create_run_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">create_run_handler</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">SerialRunHandler</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Create specialized RunHandler for the chosen simulation mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">create_run_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SerialRunHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create specialized RunHandler for the chosen simulation mode.&quot;&quot;&quot;</span>
    <span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">tulipa_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_tulipa_version</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">tulipa_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">tulipa_version</span><span class="p">)):</span>
            <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tulipa_version</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;https://github.com/NVE/TuLiPa.git&quot;</span><span class="p">,</span> <span class="n">tulipa_version</span><span class="p">))</span>

    <span class="n">jules_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_jules_version</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">jules_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">Path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="n">jules_version</span><span class="p">)):</span>
            <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">jules_version</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dependencies</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s2">&quot;https://github.com/NVE/JulES.git&quot;</span><span class="p">,</span> <span class="n">jules_version</span><span class="p">))</span>

    <span class="n">dependencies</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="s2">&quot;YAML&quot;</span><span class="p">,</span> <span class="s2">&quot;HDF5&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">,</span> <span class="s2">&quot;PythonCall&quot;</span><span class="p">])</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">():</span>
        <span class="n">handler_constructor</span> <span class="o">=</span> <span class="n">SerialRunHandler</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;JulES Parallel simulation mode is not yet supported.&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="n">handler_constructor</span><span class="o">.</span><span class="n">ENV_NAME</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">JULIA_ENV_NAME</span>
    <span class="k">return</span> <span class="n">handler_constructor</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span> <span class="n">dependencies</span><span class="o">=</span><span class="n">dependencies</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.fill_graph_infos" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">fill_graph_infos</span><span class="p">(</span><span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span> <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span> <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Fill graph_info with derived info.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fill_graph_infos</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
    <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fill graph_info with derived info.&quot;&quot;&quot;</span>
    <span class="c1"># Intent is to gather complex derivations in just one place</span>

    <span class="c1"># NB! Order of below method calls matter</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_basic_node_flow_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_agg_storage_node_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">aggregator</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_agg_storage_node_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>  <span class="c1"># opposite order to check if higher level is short term sss</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_info</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_info</span><span class="p">(</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">medium_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_market_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">long_term</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_market_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="c1"># self.set_agg_market_node_info(graph_infos.clearing, aggregator, graphs.clearing, graphs.short_term)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_jules_id_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">is_aggregated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_jules_id_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">is_aggregated</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_jules_id_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_unit_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_unit_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_unit_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_global_eneq_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_global_eneq_info</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_global_eneq_info time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_sss_initial_storage</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_agg_initial_storage</span><span class="p">(</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set_sss_initial_storage time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="c1"># assert that graph_infos has expected content</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">medium_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">assert</span> <span class="nb">all</span><span class="p">({</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">}</span> <span class="o">==</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">is_node</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">graph_infos</span><span class="o">.</span><span class="n">long_term</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;validation time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.run" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Run Julia-JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run Julia-JulES.&quot;&quot;&quot;</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_run_handler</span><span class="p">()</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_agg_initial_storage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_agg_initial_storage</span><span class="p">(</span><span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">det_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set global_eneq and initial_storage in aggregated graph_info from detailed graph_info.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_agg_initial_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">det_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set global_eneq and initial_storage in aggregated graph_info from detailed graph_info.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">det_id</span><span class="p">,</span> <span class="n">det</span> <span class="ow">in</span> <span class="n">det_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">det</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">det</span><span class="o">.</span><span class="n">agg_storage_node_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">agg</span> <span class="o">=</span> <span class="n">agg_graph_info</span><span class="p">[</span><span class="n">det</span><span class="o">.</span><span class="n">agg_storage_node_id</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">add_value</span> <span class="o">=</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_initial_storage</span>
        <span class="k">if</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_global_eneq_value</span><span class="p">:</span>
            <span class="n">add_value</span> <span class="o">*=</span> <span class="n">det</span><span class="o">.</span><span class="n">sss_global_eneq_value</span>

        <span class="n">agg</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">+=</span> <span class="n">add_value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_agg_market_node_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_agg_market_node_info</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span> <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Aggregate market nodes and update info.agg_market_node_id.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_agg_market_node_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
    <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate market nodes and update info.agg_market_node_id.&quot;&quot;&quot;</span>
    <span class="n">market_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">aggregated_graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">out</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">}</span>
    <span class="n">graph_map</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_medium_term_graph_map</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">market_nodes</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">agg_market_node_id</span><span class="p">,</span> <span class="n">member_node_ids</span> <span class="ow">in</span> <span class="n">graph_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">agg_component</span> <span class="o">=</span> <span class="n">aggregated_graph</span><span class="p">[</span><span class="n">agg_market_node_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">agg_component</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">agg_component</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">for</span> <span class="n">node_id</span> <span class="ow">in</span> <span class="n">member_node_ids</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">agg_market_node_id</span> <span class="o">=</span> <span class="n">agg_market_node_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_agg_storage_node_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_agg_storage_node_info</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span> <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Aggregate storages and update info.agg_storage_node_id.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_agg_storage_node_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">aggregator</span><span class="p">:</span> <span class="n">JulESAggregator</span><span class="p">,</span>
    <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">aggregated_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Aggregate storages and update info.agg_storage_node_id.&quot;&quot;&quot;</span>
    <span class="n">agg_storage_node_ids</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">n</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">aggregated_graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">}</span>
    <span class="n">graph_map</span> <span class="o">=</span> <span class="n">aggregator</span><span class="o">.</span><span class="n">get_short_term_graph_map</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">agg_storage_node_ids</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">member_id</span><span class="p">,</span> <span class="n">agg_node_ids</span> <span class="ow">in</span> <span class="n">graph_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">agg_node_ids</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span> <span class="ow">in</span> <span class="n">agg_storage_node_ids</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">agg_node_ids</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">member_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">agg_node_id</span> <span class="ow">in</span> <span class="n">agg_node_ids</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">agg_node_id</span> <span class="ow">in</span> <span class="n">agg_storage_node_ids</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span> <span class="o">=</span> <span class="n">agg_node_id</span>
                    <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_basic_node_flow_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_basic_node_flow_info</span><span class="p">(</span><span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Info directly accessible from Node and Flow API.</p>
<p>We also set domain_commodity for Flow as main_node.get_commodity().</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_basic_node_flow_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Info directly accessible from Node and Flow API.</span>

<span class="sd">    We also set domain_commodity for Flow as main_node.get_commodity().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">out_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>

        <span class="n">info</span><span class="o">.</span><span class="n">is_node</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span> <span class="o">=</span> <span class="n">component_id</span>
            <span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span>

        <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get_main_node</span><span class="p">()</span>
            <span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span>
            <span class="n">info</span><span class="o">.</span><span class="n">num_arrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">())</span>

        <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">is_short_term_storage</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># TODO: Should be based on storage duration # noqa FIX002</span>

        <span class="n">info</span><span class="o">.</span><span class="n">is_exogenous</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_jules_id_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_jules_id_info</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">is_aggregated</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Add jules ids in compliance with required format. Warning! Julia-JulES currently requires this format.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_jules_id_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">is_aggregated</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add jules ids in compliance with required format. Warning! Julia-JulES currently requires this format.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span><span class="o">.</span><span class="n">jules_global_eneq_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">names</span><span class="o">.</span><span class="n">GLOBALENEQ</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">is_aggregated</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">_hydro_reservoir&quot;</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Reservoir_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">_hydro_reservoir&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Reservoir_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">elif</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="si">}</span><span class="s2">Balance_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_market_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_market_info</span><span class="p">(</span><span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set is_market_node and if so, also set jules_commodity to market.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_market_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set is_market_node and if so, also set jules_commodity to market.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span>

        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
            <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">MARKET</span>

    <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out_graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow_to_exogenous</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">:</span>
            <span class="n">flow</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                <span class="n">node_info</span> <span class="o">=</span> <span class="n">out_graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
                <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
                    <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">:</span>
                        <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow_to_exogenous</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_results" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_results</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set results from Julia-JulES run into domain models.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set results from Julia-JulES run into domain models.&quot;&quot;&quot;</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_results_handler</span><span class="p">()</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">set_results</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_sss_global_eneq_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_sss_global_eneq_info</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set global_energy_coefficient using metadata. Convert to usable unit.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_sss_global_eneq_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set global_energy_coefficient using metadata. Convert to usable unit.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">component_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">):</span>
            <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="k">continue</span>

        <span class="n">data_dim</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span>

        <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>
        <span class="n">scen_dim</span> <span class="o">=</span> <span class="n">AverageYearRange</span><span class="p">(</span><span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span><span class="p">)</span>

        <span class="n">metakeys</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_meta_keys</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;EnergyEqDownstream&quot;</span> <span class="ow">in</span> <span class="n">metakeys</span><span class="p">:</span>
            <span class="n">metadata</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span><span class="o">.</span><span class="n">get_meta</span><span class="p">(</span><span class="s2">&quot;EnergyEqDownstream&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Missing metadata EnergyEqDownstream for </span><span class="si">{</span><span class="n">component_id</span><span class="si">}</span><span class="s2">, only metadata keys </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">metakeys</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">message</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot; Object info: </span><span class="si">{</span><span class="n">info</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">expr</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

        <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="o">=</span> <span class="n">get_level_value</span><span class="p">(</span>
            <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span><span class="p">,</span>
            <span class="n">db</span><span class="o">=</span><span class="n">db</span><span class="p">,</span>
            <span class="n">data_dim</span><span class="o">=</span><span class="n">data_dim</span><span class="p">,</span>
            <span class="n">scen_dim</span><span class="o">=</span><span class="n">scen_dim</span><span class="p">,</span>
            <span class="n">is_max</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_sss_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_sss_info</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">detailed_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Storage SubSystem (sss) info.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_sss_info</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">detailed_graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">detailed_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">agg_graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Storage SubSystem (sss) info.&quot;&quot;&quot;</span>
    <span class="n">include_boundaries</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># so market nodes at the boundary is not incorrectly classified</span>
    <span class="n">subsystems</span> <span class="o">=</span> <span class="n">get_one_commodity_storage_subsystems</span><span class="p">(</span><span class="n">detailed_graph</span><span class="p">,</span> <span class="n">include_boundaries</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">detailed_graph_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">for</span> <span class="n">subsystem_id</span><span class="p">,</span> <span class="p">(</span><span class="n">__</span><span class="p">,</span> <span class="n">subsystem</span><span class="p">,</span> <span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="ow">in</span> <span class="n">subsystems</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">is_short_term</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_short_term_storage_subsystem</span><span class="p">(</span><span class="n">subsystem</span><span class="p">,</span> <span class="n">detailed_graph_info</span><span class="p">,</span> <span class="n">agg_graph_info</span><span class="p">)</span>

        <span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">SHORT_TERM_STORAGE</span> <span class="k">if</span> <span class="n">is_short_term</span> <span class="k">else</span> <span class="n">names</span><span class="o">.</span><span class="n">STORAGE_SYSTEM</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Warning! No boundary domain commodity found for storage subsystem </span><span class="si">{</span><span class="n">subsystem_id</span><span class="si">}</span><span class="s2"> &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;with members </span><span class="si">{</span><span class="n">subsystem</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
                <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">jules_commodity</span>
            <span class="k">continue</span>
        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="n">market_commodity</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">boundary_domain_commodities</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>

            <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="n">info</span><span class="o">.</span><span class="n">sss_id</span> <span class="o">=</span> <span class="n">subsystem_id</span>
            <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span> <span class="o">=</span> <span class="n">is_short_term</span>
            <span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span> <span class="o">=</span> <span class="n">market_commodity</span>
            <span class="n">info</span><span class="o">.</span><span class="n">sss_members</span> <span class="o">=</span> <span class="n">subsystem</span>

            <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">=</span> <span class="n">jules_commodity</span>

        <span class="c1"># all nodes in subsystem get True below since include_boundaries = False</span>
        <span class="c1"># Flow get False if any arrow points to market commodity</span>
        <span class="k">assert</span> <span class="n">include_boundaries</span> <span class="ow">is</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">subsystem</span><span class="p">:</span>
            <span class="n">component</span> <span class="o">=</span> <span class="n">detailed_graph</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">Flow</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                    <span class="n">node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>
                    <span class="n">node_info</span> <span class="o">=</span> <span class="n">detailed_graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">node_info</span><span class="o">.</span><span class="n">jules_commodity</span> <span class="o">==</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span><span class="p">:</span>
                        <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_sss_initial_storage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_sss_initial_storage</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Set sss_initial_storage. Convert to usable unit.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_sss_initial_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set sss_initial_storage. Convert to usable unit.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">node</span><span class="p">:</span> <span class="n">Node</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">percentage</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span><span class="o">.</span><span class="n">get_initial_storage_percentage</span><span class="p">()</span>
            <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">percentage</span> <span class="o">&lt;=</span> <span class="mi">1</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">percentage</span> <span class="o">=</span> <span class="mf">0.6</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Missing initial storage for </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">. Using 60 % of capacity.&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">info</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_initial_storage_capacity</span><span class="p">(</span>
            <span class="n">node_id</span><span class="p">,</span>
            <span class="n">node</span><span class="p">,</span>
            <span class="n">info</span><span class="p">,</span>
            <span class="n">percentage</span><span class="p">,</span>
            <span class="n">db</span><span class="p">,</span>
            <span class="n">config</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="framjules.solve_handler.SolveHandler.SolveHandler.set_unit_info" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_unit_info</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h6>


    <div class="doc doc-contents ">

        <p>Calculate all types of target units.</p>
<p>Need from config:
- unit_money
- unit_stock per commodity for each storage_node
- unit_flow per commodity for each flow</p>
<p>Will derive:
- unit_price per commodity for each market_node
- unit_cost for each flow
- unit_coeffs for each flow
- unit_eneq for each sss_member in each sss</p>
<p>And also for each flow, we derive:
- unit_param_type
- unit_param_flow_unit
- unit_param_flow_unit</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/SolveHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_unit_info</span><span class="p">(</span>  <span class="c1"># noqa: C901</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate all types of target units.</span>

<span class="sd">    Need from config:</span>
<span class="sd">    - unit_money</span>
<span class="sd">    - unit_stock per commodity for each storage_node</span>
<span class="sd">    - unit_flow per commodity for each flow</span>

<span class="sd">    Will derive:</span>
<span class="sd">    - unit_price per commodity for each market_node</span>
<span class="sd">    - unit_cost for each flow</span>
<span class="sd">    - unit_coeffs for each flow</span>
<span class="sd">    - unit_eneq for each sss_member in each sss</span>

<span class="sd">    And also for each flow, we derive:</span>
<span class="sd">    - unit_param_type</span>
<span class="sd">    - unit_param_flow_unit</span>
<span class="sd">    - unit_param_flow_unit</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">unit_money</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_currency</span><span class="p">()</span>

    <span class="n">node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_node</span><span class="p">}</span>
    <span class="n">flow_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">}</span>
    <span class="n">market_node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">}</span>
    <span class="n">storage_node_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">}</span>
    <span class="n">sss_member_info</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">info</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">node_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_sss_member</span><span class="p">}</span>

    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">market_node_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_money</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">storage_node_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">unit_flow</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_flow</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
        <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
        <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="o">=</span> <span class="n">unit_flow</span>
        <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="o">=</span> <span class="n">unit_stock</span>

    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="n">flow_info</span><span class="p">,</span> <span class="n">storage_node_info</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">unit_flow</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_flow</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="o">=</span> <span class="n">unit_flow</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="o">=</span> <span class="n">unit_stock</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_money</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span> <span class="s2">&quot;MW&quot;</span><span class="p">):</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">MWTOGWHPARAM</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_flow</span> <span class="o">=</span> <span class="s2">&quot;MW&quot;</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_stock</span> <span class="o">=</span> <span class="s2">&quot;GWh&quot;</span>
            <span class="k">elif</span> <span class="n">is_convertable</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span> <span class="s2">&quot;m3/s&quot;</span><span class="p">):</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="n">M3STOMM3PARAM</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_flow</span> <span class="o">=</span> <span class="s2">&quot;m3/s&quot;</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_unit_stock</span> <span class="o">=</span> <span class="s2">&quot;Mm3&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Unsupported unit_flow: </span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_flow</span><span class="p">:</span>
                <span class="n">seconds</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">seconds</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_storage_minutes</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_flow_result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">/(</span><span class="si">{</span><span class="n">seconds</span><span class="si">}</span><span class="s2"> * s)&quot;</span>

    <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span> <span class="o">=</span> <span class="n">graph</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>
        <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
            <span class="n">from_node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>
            <span class="n">unit_coeff</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">from_node_id</span> <span class="o">!=</span> <span class="n">info</span><span class="o">.</span><span class="n">main_node_id</span><span class="p">:</span>
                <span class="n">from_node_unit</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">out</span><span class="p">[</span><span class="n">from_node_id</span><span class="p">]</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
                <span class="n">unit_coeff</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">from_node_unit</span> <span class="o">==</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">from_node_unit</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">from_node_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">unit_coeff</span>

    <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">sss_member_info</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">unit_market</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_market_commodity</span><span class="p">)</span>
        <span class="n">unit_stock</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get_unit_stock</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">domain_commodity</span><span class="p">)</span>
        <span class="n">unit_eneq</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">unit_market</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">unit_stock</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">component_id</span> <span class="ow">in</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_members</span><span class="p">:</span>
            <span class="n">member_info</span> <span class="o">=</span> <span class="n">out</span><span class="p">[</span><span class="n">component_id</span><span class="p">]</span>
            <span class="n">member_info</span><span class="o">.</span><span class="n">sss_global_eneq_unit</span> <span class="o">=</span> <span class="n">unit_eneq</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.build_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>build_handler</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h5 id="framjules.solve_handler.build_handler.BuildHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>BuildHandler</code>


</h5>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h6 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>BuildHandler</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.Base">Base</span></code>, <code><span title="abc.ABC">ABC</span></code></p>



        <p>Responsible for implementing shared functionality in build method.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BuildHandler</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Responsible for implementing shared functionality in build method.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span>
        <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize handler.</span>

<span class="sd">        Use inputs passed down from SolveHandler</span>

<span class="sd">        and create extra fields only relevant for</span>
<span class="sd">        the build phase.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">=</span> <span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="n">names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span> <span class="o">=</span> <span class="n">domain_models</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">=</span> <span class="n">graphs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span> <span class="o">=</span> <span class="n">graph_infos</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span> <span class="o">=</span> <span class="n">DataElementAppender</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">FixedFrequencyTimeIndex</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build input and configuration files for JulES.&quot;&quot;&quot;</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_data_elements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CLEARING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_data_elements clearing time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_data_elements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">AGGREGATED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_data_elements aggregated time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="c1"># Intent is to build data elements for aggregated models. Pending changes in Julia-JulES</span>
        <span class="c1"># self.build_data_elements(self.names.SHORT_TERM, self.graphs.short_term, self.graph_infos.short_term)</span>
        <span class="c1"># self.build_data_elements(self.names.MEDIUM_TERM, self.graphs.medium_term, self.graph_infos.medium_term)</span>
        <span class="c1"># self.build_data_elements(self.names.LONG_TERM, self.graphs.long_term, self.graph_infos.long_term)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_time_vectors</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_time_vectors time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_storage_mapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_storage_mapping time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_start_storage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_START_STORAGES_CLEARING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_start_storage clearing time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">build_start_storage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_START_STORAGES_AGGREGATED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_start_storage aggregated time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_start_storage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write start storag json file to folder.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_data_elements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write json file with data elements for a graph belonging to a given model_id.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fill_data_elements</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stop_if_errors</span><span class="p">()</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">stop_if_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Throw RunTimeError if any errors.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
            <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Errors found:</span><span class="se">\n</span><span class="si">{</span><span class="n">error_string</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_time_vectors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write json file with time vector data elements and csv file for each unique time index.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">timeindex</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">time_index_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;timeindex_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">milliseconds</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
            <span class="n">time_delta_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">_timedelta&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">ms_time_delta</span><span class="p">(</span><span class="n">time_delta_id</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">range_time_index</span><span class="p">(</span>
                <span class="n">time_index_id</span><span class="p">,</span>
                <span class="n">timeindex</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">(),</span>
                <span class="n">timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">(),</span>
                <span class="n">time_delta_id</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">table_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">_table&quot;</span>
            <span class="n">path_table</span><span class="p">,</span> <span class="n">column_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">time_index_id</span><span class="p">,</span> <span class="n">timeindex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_table</span><span class="p">(</span><span class="n">table_id</span><span class="p">,</span> <span class="n">path_table</span><span class="p">,</span> <span class="n">column_names</span><span class="p">)</span>

            <span class="n">is_one_year</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">is_one_year</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">column_name</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">:</span>
                <span class="n">time_vector_id</span> <span class="o">=</span> <span class="n">column_name</span>
                <span class="n">time_values_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_vector_id</span><span class="si">}</span><span class="s2">_values&quot;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">column_time_values</span><span class="p">(</span><span class="n">time_values_id</span><span class="p">,</span> <span class="n">table_id</span><span class="p">,</span> <span class="n">column_name</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">is_one_year</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">one_year_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">rotating_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_DATAELEMENTS_TIMEVECTORS</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_time_index_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return id that works in file name.&quot;&quot;&quot;</span>
        <span class="n">type_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">timeindex</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">num_periods</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">()</span>
        <span class="n">resolution</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timeindex</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span><span class="p">)</span>
        <span class="n">is_52</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">is_52_week_years</span><span class="p">()</span>
        <span class="n">extr_first</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">extrapolate_first_point</span><span class="p">()</span>
        <span class="n">extr_last</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">extrapolate_last_point</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;timeindex_</span><span class="si">{</span><span class="n">type_name</span><span class="si">}</span><span class="s2">_periods_</span><span class="si">{</span><span class="n">num_periods</span><span class="si">}</span><span class="s2">_ms_</span><span class="si">{</span><span class="n">resolution</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">is_52</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">extr_first</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">extr_last</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write all vectors corresponding to time_index_id to a csv file.&quot;&quot;&quot;</span>
        <span class="n">vectors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">]</span>
        <span class="n">column_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">vectors</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">vectors</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">])</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># quick fix for negative values in time vectors</span>
        <span class="c1"># if negative values give warning</span>
        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">matrix</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Negative values found in time vector for </span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">. This might cause issues.&quot;</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;timevector_</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">.csv&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">/</span> <span class="n">filename</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">path</span><span class="p">,</span> <span class="n">column_names</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_storage_mapping</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write the mapping of storages from Clearing to Aggregated Model to json.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_STORAGE_MAPPING</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">fill_data_elements</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset and fill self.append.data_elements with data element json data.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Important to reset the list</span>

        <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Node</span><span class="p">)}</span>
        <span class="n">flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)}</span>

        <span class="n">exogenous_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
        <span class="n">exogenous_flows</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">flows</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
        <span class="n">endogenous_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
        <span class="n">endogenous_flows</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">flows</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_exogenous_nodes</span><span class="p">(</span><span class="n">exogenous_nodes</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_exogenous_nodes time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_exogenous_flows</span><span class="p">(</span><span class="n">exogenous_flows</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_exogenous_flows time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_endogenous_nodes</span><span class="p">(</span><span class="n">endogenous_nodes</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">,</span> <span class="n">model_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_endogenous_nodes time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_endogenous_flows</span><span class="p">(</span><span class="n">endogenous_flows</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_endogenous_flows time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_dummy_exogenous_balance</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_dummy_exogenous_balance time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_dummy_exogenous_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a dummy exogenous Node for JulES.&quot;&quot;&quot;</span>
        <span class="n">balance_id</span> <span class="o">=</span> <span class="s2">&quot;PowerBalance_DummyNode&quot;</span>
        <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_Profile&quot;</span>
        <span class="c1"># Find longest name.</span>
        <span class="n">longest_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">):</span>
                <span class="n">longest_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">balance_id</span><span class="p">):</span>
            <span class="n">unique_postfix</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="s2">&quot;x&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">balance_id</span><span class="p">))</span>  <span class="c1"># Fill to guarantee uniqueness.</span>
            <span class="n">balance_id</span> <span class="o">+=</span> <span class="n">unique_postfix</span>
            <span class="n">profile_id</span> <span class="o">+=</span> <span class="n">unique_postfix</span>

        <span class="c1"># Set balance and profile ids in names so other parts of system have access to them.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">dummy_exogenous_balance_name</span> <span class="o">=</span> <span class="n">balance_id</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">dummy_exogenous_profile_id</span> <span class="o">=</span> <span class="n">profile_id</span>

        <span class="n">price_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_price_param&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">exogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MARKET</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">profile_id</span><span class="p">)</span>

        <span class="c1"># Set index and vector so they are added to the dataset in build_time_vectors.</span>

        <span class="n">first_scenario_year</span><span class="p">,</span> <span class="n">num_scenario_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>

        <span class="n">period_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">())</span>

        <span class="n">dummy_timeindex</span> <span class="o">=</span> <span class="n">ProfileTimeIndex</span><span class="p">(</span>
            <span class="n">start_year</span><span class="o">=</span><span class="n">first_scenario_year</span><span class="p">,</span>
            <span class="n">num_years</span><span class="o">=</span><span class="n">num_scenario_years</span><span class="p">,</span>
            <span class="n">period_duration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="n">period_duration</span><span class="p">),</span>
            <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">dummy_timeindex</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">:</span>
            <span class="n">default_vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dummy_timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">default_vector</span><span class="p">,</span> <span class="n">default_vector</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">out</span><span class="o">=</span><span class="n">default_vector</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">dummy_timeindex</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">profile_id</span><span class="p">:</span> <span class="n">default_vector</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_exogenous_nodes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append exogenous balance related data elements for exogenous node.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">exogenous_nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

            <span class="n">balance_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span>

            <span class="n">price_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_price_param&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">exogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">)</span>

            <span class="n">price</span><span class="p">:</span> <span class="n">Price</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_price</span><span class="p">()</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">price</span><span class="o">.</span><span class="n">has_level</span><span class="p">():</span>
                <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2"> is exogenous but has not price.&quot;</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">price</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
                <span class="n">units</span> <span class="o">=</span> <span class="n">get_units_from_expr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span> <span class="n">price</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span>
                <span class="k">if</span> <span class="n">units</span><span class="p">:</span>
                    <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2"> has exogenous price profile with units </span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

            <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_price_level</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
            <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_price_profile</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_endogenous_nodes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">endogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
        <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append endogenous balance related data elements for endogenous node.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">endogenous_nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">endogenous_balance</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="p">)</span>

            <span class="n">storage</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_storage</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">storage</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_exogenous_flows</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">exogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append data elements related to an exogenous flow.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">exogenous_flows</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
                <span class="n">node_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_rhs_term</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">node_info</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_endogenous_flows</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">endogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append data elements for endogenous flows and related attributes.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">endogenous_flows</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_flow</span><span class="p">(</span><span class="n">flow_id</span><span class="p">)</span>

            <span class="n">flow_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_lower_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_upper_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_arrows</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_costs</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_storage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append data elements related to a storage.&quot;&quot;&quot;</span>
        <span class="n">storage_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span>
        <span class="n">balance_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_storage</span><span class="p">(</span><span class="n">storage_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">)</span>

        <span class="n">capacity</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get_capacity</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">storage_id</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">_upper_bound&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">lower_zero_capacity</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">_lower_bound&quot;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">model_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CLEARING</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">global_eneq</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">jules_global_eneq_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">is_short_term_storage</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">storage_hint</span><span class="p">(</span>
                    <span class="n">storage_id</span><span class="p">,</span>
                    <span class="nb">round</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_storage_duration</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_rhs_term</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">node_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append data elements related to rhs term.&quot;&quot;&quot;</span>
        <span class="n">node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>

        <span class="n">rhs_term_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;exogenous_flow_</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">unit_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_unit_param&quot;</span>
        <span class="n">series_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_series_param&quot;</span>
        <span class="n">balance_id</span> <span class="o">=</span> <span class="n">node_info</span><span class="o">.</span><span class="n">jules_balance_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_rhs_term</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">,</span> <span class="n">arrow</span><span class="o">.</span><span class="n">is_ingoing</span><span class="p">(),</span> <span class="n">unit_param_id</span><span class="p">)</span>

        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rhs_term_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rhs_term_profile</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

        <span class="c1"># unit is actually flipped from main to target node</span>
        <span class="c1"># using conversion factor inside get_rhs_term_level</span>
        <span class="c1"># so the jules unit param might say GWh but the values</span>
        <span class="c1"># have been converted so that the result will become e.g. Mm3</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">unit_param</span><span class="p">(</span><span class="n">unit_param_id</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_flow_lower_bound</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append lower bound related data elements for a flow.&quot;&quot;&quot;</span>
        <span class="n">capacity</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_min_capacity</span><span class="p">()</span>
        <span class="n">bound_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_lower_bound&quot;</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">capacity</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">capacity</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">profile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">lower_zero_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="o">=</span><span class="n">flow_id</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">bound_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_flow_upper_bound</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append upper bound related data elements for a flow.&quot;&quot;&quot;</span>
        <span class="n">capacity</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">capacity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">bound_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_upper_bound&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">bound_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_flow_arrows</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append arrow related data elements for each arrow in flow.&quot;&quot;&quot;</span>
        <span class="n">flow_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
            <span class="k">assert</span> <span class="n">arrow</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Currently not supported, will be implemented later&quot;</span>

            <span class="n">arrow_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_arrow_</span><span class="si">{</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span><span class="si">}</span><span class="s2">-&gt;</span><span class="si">{</span><span class="n">flow_info</span><span class="o">.</span><span class="n">main_node_id</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">arrow_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

            <span class="n">balance_id</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span><span class="o">.</span><span class="n">jules_balance_id</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_arrow</span><span class="p">(</span><span class="n">arrow_id</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">,</span> <span class="n">arrow</span><span class="o">.</span><span class="n">is_ingoing</span><span class="p">(),</span> <span class="n">level</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_flow_costs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append cost data element for each cost in flow.&quot;&quot;&quot;</span>
        <span class="n">cost_terms</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_cost_terms</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span> <span class="ow">in</span> <span class="n">cost_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cost_term_level</span><span class="p">(</span><span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

            <span class="n">has_profile</span> <span class="o">=</span> <span class="n">cost_term</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>

            <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cost_term_profile</span><span class="p">(</span><span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span> <span class="k">if</span> <span class="n">has_profile</span> <span class="k">else</span> <span class="mf">1.0</span>

            <span class="n">extended_cost_term_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">cost_term_id</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extended_cost_term_id</span><span class="si">}</span><span class="s2">_param&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">cost_term</span><span class="p">(</span><span class="n">extended_cost_term_id</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">cost_term</span><span class="o">.</span><span class="n">is_cost</span><span class="p">(),</span> <span class="n">param_id</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_positive_capacity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
        <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
        <span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append data elements related to positive capacity.&quot;&quot;&quot;</span>
        <span class="n">series_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bound_id</span><span class="si">}</span><span class="s2">_series_param&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">FlowVolume</span><span class="p">):</span>
            <span class="n">unit_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bound_id</span><span class="si">}</span><span class="s2">_unit_param&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">unit_param</span><span class="p">(</span><span class="n">unit_param_id</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">positive_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">,</span> <span class="n">unit_param_id</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">StockVolume</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">positive_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">)</span>

        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_capacity_level</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_capacity_profile</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Write data to json.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">Path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">/</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">JSON_INDENT</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">period_duration</span><span class="p">:</span> <span class="n">timedelta</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">timedelta</span><span class="p">:</span>
        <span class="n">input_seconds</span> <span class="o">=</span> <span class="n">period_duration</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span> <span class="o">*</span> <span class="mi">3600</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">168</span><span class="p">,</span> <span class="mi">84</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">profile_seconds</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">profile_seconds</span> <span class="o">&lt;=</span> <span class="n">input_seconds</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">profile_seconds</span><span class="p">)</span>

    <span class="c1"># Must be implemented for each simulation mode</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_price_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query price level.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_price_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query price profile.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query capacity level.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query capacity profile.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_coefficient_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query arrow coefficient level.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query cost term level.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query cost term profile.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_level</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query rhs term level.&quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query rhs term profile.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span> <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span> <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span> <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Initialize handler.</p>
<p>Use inputs passed down from SolveHandler</p>
<p>and create extra fields only relevant for
the build phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span>
    <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
    <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize handler.</span>

<span class="sd">    Use inputs passed down from SolveHandler</span>

<span class="sd">    and create extra fields only relevant for</span>
<span class="sd">    the build phase.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">=</span> <span class="n">folder</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span> <span class="o">=</span> <span class="n">names</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">domain_models</span> <span class="o">=</span> <span class="n">domain_models</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">=</span> <span class="n">graphs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span> <span class="o">=</span> <span class="n">graph_infos</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">db</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span> <span class="o">=</span> <span class="n">DataElementAppender</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">FixedFrequencyTimeIndex</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">NDArray</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_dummy_exogenous_balance" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_dummy_exogenous_balance</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Add a dummy exogenous Node for JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_dummy_exogenous_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a dummy exogenous Node for JulES.&quot;&quot;&quot;</span>
    <span class="n">balance_id</span> <span class="o">=</span> <span class="s2">&quot;PowerBalance_DummyNode&quot;</span>
    <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_Profile&quot;</span>
    <span class="c1"># Find longest name.</span>
    <span class="n">longest_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">):</span>
            <span class="n">longest_name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">balance_id</span><span class="p">):</span>
        <span class="n">unique_postfix</span> <span class="o">=</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="s2">&quot;x&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">longest_name</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">balance_id</span><span class="p">))</span>  <span class="c1"># Fill to guarantee uniqueness.</span>
        <span class="n">balance_id</span> <span class="o">+=</span> <span class="n">unique_postfix</span>
        <span class="n">profile_id</span> <span class="o">+=</span> <span class="n">unique_postfix</span>

    <span class="c1"># Set balance and profile ids in names so other parts of system have access to them.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">dummy_exogenous_balance_name</span> <span class="o">=</span> <span class="n">balance_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">dummy_exogenous_profile_id</span> <span class="o">=</span> <span class="n">profile_id</span>

    <span class="n">price_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_price_param&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">exogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MARKET</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">profile_id</span><span class="p">)</span>

    <span class="c1"># Set index and vector so they are added to the dataset in build_time_vectors.</span>

    <span class="n">first_scenario_year</span><span class="p">,</span> <span class="n">num_scenario_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>

    <span class="n">period_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">())</span>

    <span class="n">dummy_timeindex</span> <span class="o">=</span> <span class="n">ProfileTimeIndex</span><span class="p">(</span>
        <span class="n">start_year</span><span class="o">=</span><span class="n">first_scenario_year</span><span class="p">,</span>
        <span class="n">num_years</span><span class="o">=</span><span class="n">num_scenario_years</span><span class="p">,</span>
        <span class="n">period_duration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="n">period_duration</span><span class="p">),</span>
        <span class="n">is_52_week_years</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">dummy_timeindex</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">:</span>
        <span class="n">default_vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dummy_timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">divide</span><span class="p">(</span><span class="n">default_vector</span><span class="p">,</span> <span class="n">default_vector</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">out</span><span class="o">=</span><span class="n">default_vector</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">dummy_timeindex</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">profile_id</span><span class="p">:</span> <span class="n">default_vector</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_endogenous_flows" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_endogenous_flows</span><span class="p">(</span><span class="n">endogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append data elements for endogenous flows and related attributes.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_endogenous_flows</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append data elements for endogenous flows and related attributes.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">endogenous_flows</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_flow</span><span class="p">(</span><span class="n">flow_id</span><span class="p">)</span>

        <span class="n">flow_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_lower_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_upper_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_arrows</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_flow_costs</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_endogenous_nodes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_endogenous_nodes</span><span class="p">(</span><span class="n">endogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span> <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append endogenous balance related data elements for endogenous node.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_endogenous_nodes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append endogenous balance related data elements for endogenous node.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">endogenous_nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">endogenous_balance</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="p">)</span>

        <span class="n">storage</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">storage</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_storage</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">storage</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_exogenous_flows" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_exogenous_flows</span><span class="p">(</span><span class="n">exogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append data elements related to an exogenous flow.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_exogenous_flows</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exogenous_flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append data elements related to an exogenous flow.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span> <span class="ow">in</span> <span class="n">exogenous_flows</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
            <span class="n">node_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">node_info</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_rhs_term</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">node_info</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_exogenous_nodes" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_exogenous_nodes</span><span class="p">(</span><span class="n">exogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append exogenous balance related data elements for exogenous node.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_exogenous_nodes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">exogenous_nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append exogenous balance related data elements for exogenous node.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">node_id</span><span class="p">,</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">exogenous_nodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">node_id</span><span class="p">]</span>

        <span class="n">balance_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span>

        <span class="n">price_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">balance_id</span><span class="si">}</span><span class="s2">_price_param&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">exogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_commodity</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">)</span>

        <span class="n">price</span><span class="p">:</span> <span class="n">Price</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_price</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">price</span><span class="o">.</span><span class="n">has_level</span><span class="p">():</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2"> is exogenous but has not price.&quot;</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">price</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
            <span class="n">units</span> <span class="o">=</span> <span class="n">get_units_from_expr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span> <span class="n">price</span><span class="o">.</span><span class="n">get_profile</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">units</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Node </span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2"> has exogenous price profile with units </span><span class="si">{</span><span class="n">units</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_price_level</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_price_profile</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">price_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_flow_arrows" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_flow_arrows</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append arrow related data elements for each arrow in flow.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_flow_arrows</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append arrow related data elements for each arrow in flow.&quot;&quot;&quot;</span>
    <span class="n">flow_info</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">flow_id</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">arrow</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrows</span><span class="p">():</span>
        <span class="k">assert</span> <span class="n">arrow</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;Currently not supported, will be implemented later&quot;</span>

        <span class="n">arrow_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_arrow_</span><span class="si">{</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span><span class="si">}</span><span class="s2">-&gt;</span><span class="si">{</span><span class="n">flow_info</span><span class="o">.</span><span class="n">main_node_id</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">arrow_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

        <span class="n">balance_id</span> <span class="o">=</span> <span class="n">graph_info</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span><span class="o">.</span><span class="n">jules_balance_id</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_arrow</span><span class="p">(</span><span class="n">arrow_id</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">,</span> <span class="n">arrow</span><span class="o">.</span><span class="n">is_ingoing</span><span class="p">(),</span> <span class="n">level</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_flow_costs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_flow_costs</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append cost data element for each cost in flow.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_flow_costs</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append cost data element for each cost in flow.&quot;&quot;&quot;</span>
    <span class="n">cost_terms</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_cost_terms</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span> <span class="ow">in</span> <span class="n">cost_terms</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cost_term_level</span><span class="p">(</span><span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

        <span class="n">has_profile</span> <span class="o">=</span> <span class="n">cost_term</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>

        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cost_term_profile</span><span class="p">(</span><span class="n">cost_term_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span> <span class="k">if</span> <span class="n">has_profile</span> <span class="k">else</span> <span class="mf">1.0</span>

        <span class="n">extended_cost_term_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">cost_term_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">extended_cost_term_id</span><span class="si">}</span><span class="s2">_param&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">cost_term</span><span class="p">(</span><span class="n">extended_cost_term_id</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">cost_term</span><span class="o">.</span><span class="n">is_cost</span><span class="p">(),</span> <span class="n">param_id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_flow_lower_bound" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_flow_lower_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append lower bound related data elements for a flow.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_flow_lower_bound</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append lower bound related data elements for a flow.&quot;&quot;&quot;</span>
    <span class="n">capacity</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_min_capacity</span><span class="p">()</span>
    <span class="n">bound_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_lower_bound&quot;</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">capacity</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">capacity</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">profile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">lower_zero_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="o">=</span><span class="n">flow_id</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">bound_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_flow_upper_bound" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_flow_upper_bound</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append upper bound related data elements for a flow.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_flow_upper_bound</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append upper bound related data elements for a flow.&quot;&quot;&quot;</span>
    <span class="n">capacity</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">capacity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">bound_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_upper_bound&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">flow_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">bound_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_positive_capacity" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append data elements related to positive capacity.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_positive_capacity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
    <span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append data elements related to positive capacity.&quot;&quot;&quot;</span>
    <span class="n">series_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bound_id</span><span class="si">}</span><span class="s2">_series_param&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">FlowVolume</span><span class="p">):</span>
        <span class="n">unit_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">bound_id</span><span class="si">}</span><span class="s2">_unit_param&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">unit_param</span><span class="p">(</span><span class="n">unit_param_id</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">positive_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">,</span> <span class="n">unit_param_id</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">capacity</span><span class="p">,</span> <span class="n">StockVolume</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">positive_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">)</span>

    <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_capacity_level</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
    <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_capacity_profile</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_rhs_term" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_rhs_term</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">node_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append data elements related to rhs term.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_rhs_term</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">node_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append data elements related to rhs term.&quot;&quot;&quot;</span>
    <span class="n">node_id</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>

    <span class="n">rhs_term_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;exogenous_flow_</span><span class="si">{</span><span class="n">flow_id</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">node_id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">unit_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_unit_param&quot;</span>
    <span class="n">series_param_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_series_param&quot;</span>
    <span class="n">balance_id</span> <span class="o">=</span> <span class="n">node_info</span><span class="o">.</span><span class="n">jules_balance_id</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_rhs_term</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">,</span> <span class="n">arrow</span><span class="o">.</span><span class="n">is_ingoing</span><span class="p">(),</span> <span class="n">unit_param_id</span><span class="p">)</span>

    <span class="n">level</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rhs_term_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

    <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_rhs_term_profile</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

    <span class="c1"># unit is actually flipped from main to target node</span>
    <span class="c1"># using conversion factor inside get_rhs_term_level</span>
    <span class="c1"># so the jules unit param might say GWh but the values</span>
    <span class="c1"># have been converted so that the result will become e.g. Mm3</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">unit_param</span><span class="p">(</span><span class="n">unit_param_id</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">mean_series_param</span><span class="p">(</span><span class="n">series_param_id</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">profile</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.add_storage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">add_storage</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append data elements related to a storage.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">storage</span><span class="p">:</span> <span class="n">Storage</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append data elements related to a storage.&quot;&quot;&quot;</span>
    <span class="n">storage_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span>
    <span class="n">balance_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_storage</span><span class="p">(</span><span class="n">storage_id</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">)</span>

    <span class="n">capacity</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get_capacity</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_positive_capacity</span><span class="p">(</span><span class="n">storage_id</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">_upper_bound&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">lower_zero_capacity</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">_lower_bound&quot;</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">model_id</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CLEARING</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">global_eneq</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">jules_global_eneq_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">jules_balance_id</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_global_eneq_value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_is_short_term</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">is_short_term_storage</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">storage_hint</span><span class="p">(</span>
                <span class="n">storage_id</span><span class="p">,</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">sss_storage_duration</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">),</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.build" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Build input and configuration files for JulES.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build input and configuration files for JulES.&quot;&quot;&quot;</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_data_elements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CLEARING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_data_elements clearing time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_data_elements</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">AGGREGATED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">short_term</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_data_elements aggregated time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="c1"># Intent is to build data elements for aggregated models. Pending changes in Julia-JulES</span>
    <span class="c1"># self.build_data_elements(self.names.SHORT_TERM, self.graphs.short_term, self.graph_infos.short_term)</span>
    <span class="c1"># self.build_data_elements(self.names.MEDIUM_TERM, self.graphs.medium_term, self.graph_infos.medium_term)</span>
    <span class="c1"># self.build_data_elements(self.names.LONG_TERM, self.graphs.long_term, self.graph_infos.long_term)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_time_vectors</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_time_vectors time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_storage_mapping</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_storage_mapping time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_start_storage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_START_STORAGES_CLEARING</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_start_storage clearing time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">build_start_storage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_START_STORAGES_AGGREGATED</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">short_term</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;build_start_storage aggregated time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.build_data_elements" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build_data_elements</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write json file with data elements for a graph belonging to a given model_id.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_data_elements</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write json file with data elements for a graph belonging to a given model_id.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fill_data_elements</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stop_if_errors</span><span class="p">()</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2">.json&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.build_start_storage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build_start_storage</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write start storag json file to folder.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_start_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write start storag json file to folder.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">sss_initial_storage</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.build_storage_mapping" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build_storage_mapping</span><span class="p">(</span><span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write the mapping of storages from Clearing to Aggregated Model to json.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_storage_mapping</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write the mapping of storages from Clearing to Aggregated Model to json.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="n">graph_info</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">agg_storage_node_id</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_STORAGE_MAPPING</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.build_time_vectors" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">build_time_vectors</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write json file with time vector data elements and csv file for each unique time index.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_time_vectors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write json file with time vector data elements and csv file for each unique time index.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">timeindex</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">time_index_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;timeindex_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="n">milliseconds</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span>
        <span class="n">time_delta_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">_timedelta&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">ms_time_delta</span><span class="p">(</span><span class="n">time_delta_id</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">range_time_index</span><span class="p">(</span>
            <span class="n">time_index_id</span><span class="p">,</span>
            <span class="n">timeindex</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">(),</span>
            <span class="n">timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">(),</span>
            <span class="n">time_delta_id</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">table_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">_table&quot;</span>
        <span class="n">path_table</span><span class="p">,</span> <span class="n">column_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">time_index_id</span><span class="p">,</span> <span class="n">timeindex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">base_table</span><span class="p">(</span><span class="n">table_id</span><span class="p">,</span> <span class="n">path_table</span><span class="p">,</span> <span class="n">column_names</span><span class="p">)</span>

        <span class="n">is_one_year</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">is_one_year</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">column_name</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">:</span>
            <span class="n">time_vector_id</span> <span class="o">=</span> <span class="n">column_name</span>
            <span class="n">time_values_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">time_vector_id</span><span class="si">}</span><span class="s2">_values&quot;</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">column_time_values</span><span class="p">(</span><span class="n">time_values_id</span><span class="p">,</span> <span class="n">table_id</span><span class="p">,</span> <span class="n">column_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">is_one_year</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">one_year_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">rotating_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FILENAME_DATAELEMENTS_TIMEVECTORS</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.fill_data_elements" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">fill_data_elements</span><span class="p">(</span><span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span> <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Reset and fill self.append.data_elements with data element json data.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fill_data_elements</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">graph</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span> <span class="o">|</span> <span class="n">Node</span><span class="p">],</span>
    <span class="n">graph_info</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset and fill self.append.data_elements with data element json data.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">append</span><span class="o">.</span><span class="n">data_elements</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Important to reset the list</span>

    <span class="n">nodes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Node</span><span class="p">)}</span>
    <span class="n">flows</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Flow</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">Flow</span><span class="p">)}</span>

    <span class="n">exogenous_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
    <span class="n">exogenous_flows</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">flows</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
    <span class="n">endogenous_nodes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">nodes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>
    <span class="n">endogenous_flows</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">flows</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">()}</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_exogenous_nodes</span><span class="p">(</span><span class="n">exogenous_nodes</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_exogenous_nodes time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_exogenous_flows</span><span class="p">(</span><span class="n">exogenous_flows</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_exogenous_flows time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_endogenous_nodes</span><span class="p">(</span><span class="n">endogenous_nodes</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">,</span> <span class="n">model_id</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_endogenous_nodes time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_endogenous_flows</span><span class="p">(</span><span class="n">endogenous_flows</span><span class="p">,</span> <span class="n">graph_info</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_endogenous_flows time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>

    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_dummy_exogenous_balance</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">send_debug_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add_dummy_exogenous_balance time: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">time</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_capacity_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_capacity_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query capacity level.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query capacity level.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_capacity_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_capacity_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query capacity profile.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query capacity profile.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_coefficient_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query arrow coefficient level.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_coefficient_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query arrow coefficient level.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_cost_term_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_cost_term_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query cost term level.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query cost term level.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_cost_term_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_cost_term_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query cost term profile.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query cost term profile.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_price_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_price_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query price level.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_price_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query price level.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_price_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_price_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query price profile.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_price_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query price profile.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_rhs_term_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rhs_term_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query rhs term level.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_level</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query rhs term level.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_rhs_term_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rhs_term_profile</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h7>


    <div class="doc doc-contents ">

        <p>Query rhs term profile.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Query rhs term profile.&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.get_time_index_id" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_time_index_id</span><span class="p">(</span><span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Return id that works in file name.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_time_index_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return id that works in file name.&quot;&quot;&quot;</span>
    <span class="n">type_name</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">timeindex</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">num_periods</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">get_num_periods</span><span class="p">()</span>
    <span class="n">resolution</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">timeindex</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">*</span> <span class="mf">1000.0</span><span class="p">)</span>
    <span class="n">is_52</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">is_52_week_years</span><span class="p">()</span>
    <span class="n">extr_first</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">extrapolate_first_point</span><span class="p">()</span>
    <span class="n">extr_last</span> <span class="o">=</span> <span class="n">timeindex</span><span class="o">.</span><span class="n">extrapolate_last_point</span><span class="p">()</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;timeindex_</span><span class="si">{</span><span class="n">type_name</span><span class="si">}</span><span class="s2">_periods_</span><span class="si">{</span><span class="n">num_periods</span><span class="si">}</span><span class="s2">_ms_</span><span class="si">{</span><span class="n">resolution</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">is_52</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">extr_first</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">extr_last</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.stop_if_errors" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">stop_if_errors</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Throw RunTimeError if any errors.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">stop_if_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Throw RunTimeError if any errors.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
        <span class="n">error_string</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Errors found:</span><span class="se">\n</span><span class="si">{</span><span class="n">error_string</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.write_json_file" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">write_json_file</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write data to json.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_json_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">object</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write data to json.&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">Path</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">/</span> <span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">JSON_INDENT</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.BuildHandler.BuildHandler.write_table" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">write_table</span><span class="p">(</span><span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Write all vectors corresponding to time_index_id to a csv file.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/BuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_table</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">timeindex</span><span class="p">:</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write all vectors corresponding to time_index_id to a csv file.&quot;&quot;&quot;</span>
    <span class="n">vectors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">]</span>
    <span class="n">column_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">vectors</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">([</span><span class="n">vectors</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">column_names</span><span class="p">])</span>
    <span class="n">matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># quick fix for negative values in time vectors</span>
    <span class="c1"># if negative values give warning</span>
    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">matrix</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Negative values found in time vector for </span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">. This might cause issues.&quot;</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;timevector_</span><span class="si">{</span><span class="n">time_index_id</span><span class="si">}</span><span class="s2">.csv&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">/</span> <span class="n">filename</span>
    <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">matrix</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">path</span><span class="p">,</span> <span class="n">column_names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h5 id="framjules.solve_handler.build_handler.DataElementAppender" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>DataElementAppender</code>


</h5>

    <div class="doc doc-contents ">

        <p>Functionality to reate data element to JulES.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h6 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DataElementAppender</code>


</h6>


    <div class="doc doc-contents ">



        <p>Used to generate list of data elements for JulES.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DataElementAppender</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Used to generate list of data elements for JulES.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize new DataElementAppender.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span> <span class="o">=</span> <span class="n">names</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">exogenous_balance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">price_param_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append exogenous balance data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">EXOGENBALANCE</span><span class="p">,</span>
                <span class="n">balance_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COMMODITY</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PRICE</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">endogenous_balance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append endogenous balance data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEBALANCE</span><span class="p">,</span>
                <span class="n">balance_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COMMODITY</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">mean_series_param</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append mean series param data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MEANSERIESPARAM</span><span class="p">,</span>
                <span class="n">param_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">LEVEL</span><span class="p">,</span> <span class="n">level</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">,</span> <span class="n">profile</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">base_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append base flow data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEFLOW</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">lower_zero_capacity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lower_bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append zero lower capacity data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CAPACITY</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">LOWERZEROCAPACITY</span><span class="p">,</span>
                <span class="n">lower_bound_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">positive_capacity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append positive capacity data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CAPACITY</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">POSITIVECAPACITY</span><span class="p">,</span>
                <span class="n">bound_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDLOWER</span> <span class="k">if</span> <span class="n">is_lower_bound</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDUPPER</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">param_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">unit_param</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">series_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append unit param data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span>
                <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span><span class="p">,</span>
                <span class="n">unit_param_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">base_arrow</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">arrow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">conversion</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append base arrow data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ARROW</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEARROW</span><span class="p">,</span>
                <span class="n">arrow_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_ingoing</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CONVERSION</span><span class="p">,</span> <span class="n">conversion</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cost_term</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">cost_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_flow</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_cost</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append cost term data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COST</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COSTTERM</span><span class="p">,</span>
                <span class="n">cost_term_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_cost</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">cost</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">base_rhs_term</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
        <span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append base rhs term data element.&quot;&quot;&quot;</span>
        <span class="c1"># TODO: Add residualhint # noqa FIX002</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">RHSTERM</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASERHSTERM</span><span class="p">,</span>
                <span class="n">rhs_term_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_ingoing</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">unit_param_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">base_storage</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append base storage data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASESTORAGE</span><span class="p">,</span>
                <span class="n">storage_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">global_eneq</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">global_eneq_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append global energy equivalent data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">METADATA</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">GLOBALENEQ</span><span class="p">,</span>
                <span class="n">global_eneq_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">VALUE</span><span class="p">,</span> <span class="n">value</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">storage_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append storage hint data element to indicate storage duration in milliseconds.&quot;&quot;&quot;</span>
        <span class="n">storage_hint_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;StorageHint_</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">METADATA</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGEHINT</span><span class="p">,</span>
                <span class="n">storage_hint_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PERIOD</span><span class="p">,</span> <span class="n">period</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">ms_time_delta</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">milliseconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append ms time delta data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEDELTA</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MSTIMEDELTA</span><span class="p">,</span>
                <span class="n">time_delta_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PERIOD</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">range_time_index</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">start_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span>
        <span class="n">num_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append range time index data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">RANGETIMEINDEX</span><span class="p">,</span>
                <span class="n">time_index_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">START</span><span class="p">,</span> <span class="n">start_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STEPS</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DELTA</span><span class="p">,</span> <span class="n">time_delta_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">base_table</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">path_table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append base table data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TABLE</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASETABLE</span><span class="p">,</span>
                <span class="n">table_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MATRIX</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path_table</span><span class="p">)],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">NAMES</span><span class="p">,</span> <span class="n">column_names</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">column_time_values</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">column_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append column time values data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COLUMNTIMEVALUES</span><span class="p">,</span>
                <span class="n">time_values_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TABLE</span><span class="p">,</span> <span class="n">table_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">column_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">rotating_time_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append rotating time vector data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVECTOR</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ROTATINGTIMEVECTOR</span><span class="p">,</span>
                <span class="n">time_vector_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">one_year_time_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Append one year time vector data element.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVECTOR</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ONEYEARTIMEVECTOR</span><span class="p">,</span>
                <span class="n">time_vector_id</span><span class="p">,</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">],</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">],</span>
            <span class="p">],</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Initialize new DataElementAppender.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize new DataElementAppender.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="p">:</span> <span class="nb">list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span> <span class="o">=</span> <span class="n">names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.base_arrow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">base_arrow</span><span class="p">(</span><span class="n">arrow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">conversion</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append base arrow data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">base_arrow</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">arrow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">conversion</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append base arrow data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ARROW</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEARROW</span><span class="p">,</span>
            <span class="n">arrow_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_ingoing</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CONVERSION</span><span class="p">,</span> <span class="n">conversion</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.base_flow" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">base_flow</span><span class="p">(</span><span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append base flow data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">base_flow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append base flow data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEFLOW</span><span class="p">,</span> <span class="n">flow_id</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.base_rhs_term" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">base_rhs_term</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append base rhs term data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">base_rhs_term</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_ingoing</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append base rhs term data element.&quot;&quot;&quot;</span>
    <span class="c1"># TODO: Add residualhint # noqa FIX002</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">RHSTERM</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASERHSTERM</span><span class="p">,</span>
            <span class="n">rhs_term_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_ingoing</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">unit_param_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.base_storage" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">base_storage</span><span class="p">(</span><span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append base storage data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">base_storage</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append base storage data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASESTORAGE</span><span class="p">,</span>
            <span class="n">storage_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.base_table" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">base_table</span><span class="p">(</span><span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">path_table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span> <span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append base table data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">base_table</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">path_table</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">column_names</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append base table data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TABLE</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASETABLE</span><span class="p">,</span>
            <span class="n">table_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MATRIX</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">path_table</span><span class="p">)],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">NAMES</span><span class="p">,</span> <span class="n">column_names</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.column_time_values" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">column_time_values</span><span class="p">(</span><span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">column_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append column time values data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">column_time_values</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">table_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">column_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append column time values data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COLUMNTIMEVALUES</span><span class="p">,</span>
            <span class="n">time_values_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TABLE</span><span class="p">,</span> <span class="n">table_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span> <span class="n">column_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.cost_term" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">cost_term</span><span class="p">(</span><span class="n">cost_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_flow</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_cost</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">cost</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append cost term data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cost_term</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">cost_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_flow</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_cost</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">cost</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append cost term data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COST</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COSTTERM</span><span class="p">,</span>
            <span class="n">cost_term_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONIN</span> <span class="k">if</span> <span class="n">is_cost</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DIRECTIONOUT</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">cost</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.endogenous_balance" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">endogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append endogenous balance data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">endogenous_balance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append endogenous balance data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BASEBALANCE</span><span class="p">,</span>
            <span class="n">balance_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COMMODITY</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.exogenous_balance" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">exogenous_balance</span><span class="p">(</span><span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append exogenous balance data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exogenous_balance</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">commodiy</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">price_param_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append exogenous balance data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">EXOGENBALANCE</span><span class="p">,</span>
            <span class="n">balance_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">COMMODITY</span><span class="p">,</span> <span class="n">commodiy</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PRICE</span><span class="p">,</span> <span class="n">price_param_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.global_eneq" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">global_eneq</span><span class="p">(</span><span class="n">global_eneq_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append global energy equivalent data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">global_eneq</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">global_eneq_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">balance_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append global energy equivalent data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">METADATA</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">GLOBALENEQ</span><span class="p">,</span>
            <span class="n">global_eneq_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BALANCE</span><span class="p">,</span> <span class="n">balance_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">VALUE</span><span class="p">,</span> <span class="n">value</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.lower_zero_capacity" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">lower_zero_capacity</span><span class="p">(</span><span class="n">lower_bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append zero lower capacity data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lower_zero_capacity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lower_bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append zero lower capacity data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CAPACITY</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">LOWERZEROCAPACITY</span><span class="p">,</span>
            <span class="n">lower_bound_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.mean_series_param" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">mean_series_param</span><span class="p">(</span><span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span> <span class="n">profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append mean series param data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">mean_series_param</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">profile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append mean series param data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MEANSERIESPARAM</span><span class="p">,</span>
            <span class="n">param_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">LEVEL</span><span class="p">,</span> <span class="n">level</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PROFILE</span><span class="p">,</span> <span class="n">profile</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.ms_time_delta" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">ms_time_delta</span><span class="p">(</span><span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append ms time delta data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ms_time_delta</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">milliseconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append ms time delta data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEDELTA</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">MSTIMEDELTA</span><span class="p">,</span>
            <span class="n">time_delta_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PERIOD</span><span class="p">,</span> <span class="n">milliseconds</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.one_year_time_vector" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">one_year_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append one year time vector data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">one_year_time_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append one year time vector data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVECTOR</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ONEYEARTIMEVECTOR</span><span class="p">,</span>
            <span class="n">time_vector_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.positive_capacity" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">positive_capacity</span><span class="p">(</span><span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append positive capacity data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">positive_capacity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">bound_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">flow_or_storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">is_lower_bound</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append positive capacity data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">CAPACITY</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">POSITIVECAPACITY</span><span class="p">,</span>
            <span class="n">bound_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHCONCEPT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">FLOW</span> <span class="k">if</span> <span class="n">is_flow</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">WHICHINSTANCE</span><span class="p">,</span> <span class="n">flow_or_storage_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDKEY</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDLOWER</span> <span class="k">if</span> <span class="n">is_lower_bound</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">BOUNDUPPER</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">param_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.range_time_index" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">range_time_index</span><span class="p">(</span><span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append range time index data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">range_time_index</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">start_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span>
    <span class="n">num_steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">time_delta_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append range time index data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">RANGETIMEINDEX</span><span class="p">,</span>
            <span class="n">time_index_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">START</span><span class="p">,</span> <span class="n">start_time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STEPS</span><span class="p">,</span> <span class="n">num_steps</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">DELTA</span><span class="p">,</span> <span class="n">time_delta_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.rotating_time_vector" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">rotating_time_vector</span><span class="p">(</span><span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append rotating time vector data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rotating_time_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">time_vector_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">time_index_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">time_values_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append rotating time vector data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVECTOR</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">ROTATINGTIMEVECTOR</span><span class="p">,</span>
            <span class="n">time_vector_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEINDEX</span><span class="p">,</span> <span class="n">time_index_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">TIMEVALUES</span><span class="p">,</span> <span class="n">time_values_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.storage_hint" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">storage_hint</span><span class="p">(</span><span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append storage hint data element to indicate storage duration in milliseconds.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">storage_hint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">period</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append storage hint data element to indicate storage duration in milliseconds.&quot;&quot;&quot;</span>
    <span class="n">storage_hint_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;StorageHint_</span><span class="si">{</span><span class="n">storage_id</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">METADATA</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGEHINT</span><span class="p">,</span>
            <span class="n">storage_hint_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">STORAGE</span><span class="p">,</span> <span class="n">storage_id</span><span class="p">],</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PERIOD</span><span class="p">,</span> <span class="n">period</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.DataElementAppender.DataElementAppender.unit_param" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">unit_param</span><span class="p">(</span><span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Append unit param data element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/DataElementAppender.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">unit_param</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">unit_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">series_param_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append unit param data element.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span>
            <span class="n">info</span><span class="o">.</span><span class="n">unit_param_type</span><span class="p">,</span>
            <span class="n">unit_param_id</span><span class="p">,</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="o">.</span><span class="n">PARAM</span><span class="p">,</span> <span class="n">series_param_id</span><span class="p">],</span>
        <span class="p">],</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h5 id="framjules.solve_handler.build_handler.SerialBuildHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>SerialBuildHandler</code>


</h5>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h6 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SerialBuildHandler</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="            BuildHandler (framjules.solve_handler.build_handler.BuildHandler.BuildHandler)" href="#framjules.solve_handler.build_handler.BuildHandler.BuildHandler">BuildHandler</a></code></p>



        <p>Specialized methods for serial simulation.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SerialBuildHandler</span><span class="p">(</span><span class="n">BuildHandler</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Specialized methods for serial simulation.&quot;&quot;&quot;</span>

    <span class="n">_PROFILE_VALUE_WHEN_ZERO</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
        <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span>
        <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
        <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;See BuildHandler.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">domain_models</span><span class="p">,</span> <span class="n">graphs</span><span class="p">,</span> <span class="n">graph_infos</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>

        <span class="c1"># some validations spesific to serial simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span> <span class="n">SinglePeriodTimeIndex</span><span class="p">)</span>

        <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span> <span class="o">=</span> <span class="n">AverageYearRange</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span><span class="o">=</span><span class="n">num_years</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span><span class="o">.</span><span class="n">is_52_week_years</span><span class="p">():</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Expected AverageYearRange to have is_52_week_years() == False.&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_float32</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_level</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span><span class="p">,</span>
        <span class="n">target_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get level value.&quot;&quot;&quot;</span>
        <span class="n">is_max_level</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">target_unit</span><span class="p">,</span>
            <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
            <span class="n">scenario_horizon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span><span class="p">,</span>
            <span class="n">is_max_level</span><span class="o">=</span><span class="n">is_max_level</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attribute </span><span class="si">{</span><span class="n">root_id</span><span class="si">}</span><span class="s2"> of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> returned </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span> <span class="o">|</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">default</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add profile vector to timevectors and return profile_id.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attribute</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">default</span>

        <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_id</span><span class="si">}</span><span class="s2">_profile&quot;</span>

        <span class="n">timeindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">)</span>

        <span class="n">vector</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
            <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
            <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
            <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># avoid very small numerical noise, e.g negative prices from jules run</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Profile </span><span class="si">{</span><span class="n">profile_id</span><span class="si">}</span><span class="s2"> in time index </span><span class="si">{</span><span class="n">timeindex</span><span class="si">}</span><span class="s2"> contains NaN values. &quot;</span>
                <span class="s2">&quot;This may indicate a problem with the data or the configuration.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Profile </span><span class="si">{</span><span class="n">profile_id</span><span class="si">}</span><span class="s2"> in time index </span><span class="si">{</span><span class="n">timeindex</span><span class="si">}</span><span class="s2"> has negative values. &quot;</span>
                <span class="s2">&quot;This may indicate a problem with the data or the configuration.&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="n">denominator</span> <span class="o">=</span> <span class="n">vector</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">vector</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_PROFILE_VALUE_WHEN_ZERO</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">vector</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">][</span><span class="n">profile_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span>

        <span class="k">return</span> <span class="n">profile_id</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_find_profile_timeindex</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span> <span class="o">|</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">has_storage_resolution</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProfileTimeIndex</span><span class="p">:</span>
        <span class="n">is_52_week_years</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">has_storage_resolution</span><span class="p">:</span>
            <span class="n">period_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_storage_minutes</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">period_duration</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_time_resolution</span><span class="p">()</span><span class="o">.</span><span class="n">get_clearing_market_minutes</span><span class="p">())</span>

        <span class="n">fallback</span> <span class="o">=</span> <span class="n">ProfileTimeIndex</span><span class="p">(</span>
            <span class="n">start_year</span><span class="p">,</span>
            <span class="n">num_years</span><span class="p">,</span>
            <span class="n">period_duration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="n">period_duration</span><span class="p">),</span>
            <span class="n">is_52_week_years</span><span class="o">=</span><span class="n">is_52_week_years</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">ix_set</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="n">FixedFrequencyTimeIndex</span><span class="p">]</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">get_profile_timeindex_set</span><span class="p">(</span><span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">ix</span><span class="p">,</span> <span class="n">FixedFrequencyTimeIndex</span><span class="p">)</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">ix_set</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">fallback</span>

        <span class="n">is_one_year</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="n">ix</span><span class="o">.</span><span class="n">is_one_year</span><span class="p">()</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">ix_set</span><span class="p">)</span>

        <span class="n">candidate</span> <span class="o">=</span> <span class="nb">min</span><span class="p">((</span><span class="n">ix</span> <span class="k">for</span> <span class="n">ix</span> <span class="ow">in</span> <span class="n">ix_set</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">ix</span><span class="p">:</span> <span class="n">ix</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">())</span>

        <span class="n">s_fallback</span> <span class="o">=</span> <span class="n">fallback</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">s_candidate</span> <span class="o">=</span> <span class="n">candidate</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>
        <span class="n">best_duration</span> <span class="o">=</span> <span class="p">(</span><span class="n">candidate</span> <span class="k">if</span> <span class="n">s_fallback</span> <span class="o">&lt;</span> <span class="n">s_candidate</span> <span class="k">else</span> <span class="n">fallback</span><span class="p">)</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">is_one_year</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ProfileTimeIndex</span><span class="p">(</span>
                <span class="n">start_year</span><span class="o">=</span><span class="n">candidate</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">()</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                <span class="n">num_years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">period_duration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="n">best_duration</span><span class="p">),</span>
                <span class="n">is_52_week_years</span><span class="o">=</span><span class="n">is_52_week_years</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">ProfileTimeIndex</span><span class="p">(</span>
            <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="n">num_years</span><span class="o">=</span><span class="n">num_years</span><span class="p">,</span>
            <span class="n">period_duration</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_closest_valid_profile_duration</span><span class="p">(</span><span class="n">best_duration</span><span class="p">),</span>
            <span class="n">is_52_week_years</span><span class="o">=</span><span class="n">is_52_week_years</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_price_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_price_level for serial simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_cost_term_level for serial simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">StockVolume</span> <span class="o">|</span> <span class="n">FlowVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_capacity_level for serial simulation. Handles stock or flow based on info.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="k">else</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_coefficient_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_coefficient_level for serial simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_price_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_price_profile for serial simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_cost_term_profile for serial simulation.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get_capacity_profile for serial simulation.&quot;&quot;&quot;</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="k">else</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_level</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert volume (main node) to target node volume.</span>

<span class="sd">        This may scale the volume using arrow coefficient,</span>
<span class="sd">        e.g. due to transportation loss.</span>

<span class="sd">        This may also change unit, if target node belongs to</span>
<span class="sd">        different commodity than main node, such as for hydropower.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coeff_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

        <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_level</span><span class="p">():</span>
            <span class="n">volume_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span>
                <span class="n">root_id</span><span class="o">=</span><span class="n">rhs_term_id</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span>
                <span class="n">target_unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">max_cap</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>
            <span class="n">min_cap</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_min_capacity</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">max_cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_cap</span> <span class="o">==</span> <span class="n">min_cap</span><span class="p">:</span>
                <span class="n">volume_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span>
                    <span class="n">root_id</span><span class="o">=</span><span class="n">rhs_term_id</span><span class="p">,</span>
                    <span class="n">attribute</span><span class="o">=</span><span class="n">max_cap</span><span class="p">,</span>
                    <span class="n">target_unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2"> is not exogenous&quot;</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">coeff_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Got zero coeff_value for </span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;volume_value = </span><span class="si">{</span><span class="n">volume_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;coeff_value = </span><span class="si">{</span><span class="n">coeff_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;flow.get_main_node() = </span><span class="si">{</span><span class="n">flow</span><span class="o">.</span><span class="n">get_main_node</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;arrow.get_node() = </span><span class="si">{</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">volume_value</span> <span class="o">/</span> <span class="n">coeff_value</span>  <span class="c1"># convert from main_unit to target_unit</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_rank_profile_timeindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ix</span><span class="p">:</span> <span class="n">ProfileTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">ix</span><span class="o">.</span><span class="n">is_one_year</span><span class="p">(),</span> <span class="n">ix</span><span class="o">.</span><span class="n">get_period_duration</span><span class="p">()</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_select_profile_timeindex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">candidates</span><span class="p">:</span> <span class="n">ProfileTimeIndex</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ProfileTimeIndex</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Select the one with not-is_one_year (if any) and finest period duration.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">candidates</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rank_profile_timeindex</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
        <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create profile (possibly) representing volume_profile * coefficient_profile.&quot;&quot;&quot;</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>

        <span class="n">not_volume_profile</span> <span class="o">=</span> <span class="n">volume</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span>
        <span class="n">not_arrow_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">arrow</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span>
        <span class="n">has_volume_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">not_volume_profile</span>
        <span class="n">has_arrow_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">not_arrow_profile</span>

        <span class="k">if</span> <span class="n">not_volume_profile</span> <span class="ow">and</span> <span class="n">not_arrow_profile</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">1.0</span>

        <span class="k">if</span> <span class="n">has_volume_profile</span> <span class="ow">and</span> <span class="n">not_arrow_profile</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span>
                <span class="n">rhs_term_id</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
                <span class="n">info</span><span class="o">=</span><span class="n">flow_info</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">not_volume_profile</span> <span class="ow">and</span> <span class="n">has_arrow_profile</span><span class="p">:</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span>
                <span class="n">rhs_term_id</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">arrow</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
                <span class="n">info</span><span class="o">=</span><span class="n">flow_info</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># Here we get both profiles (volume and coefficient) and muliply them</span>
        <span class="c1"># together and store the resulting product profile in self.timevectors</span>

        <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_profile&quot;</span>

        <span class="n">timeindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_profile_timeindex</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">volume</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">),</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">x</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
            <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
            <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
            <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">y</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
            <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
            <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
            <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
            <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()],</span>
        <span class="p">)</span>

        <span class="n">x_mean</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="n">y_mean</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x_mean</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y_mean</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_PROFILE_VALUE_WHEN_ZERO</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">x</span>

        <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x_mean</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
        <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">y_mean</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

        <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">][</span><span class="n">profile_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>

        <span class="k">return</span> <span class="n">profile_id</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span> <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span> <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span> <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span> <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>See BuildHandler.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="n">domain_models</span><span class="p">:</span> <span class="n">DomainModels</span><span class="p">,</span>
    <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
    <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
    <span class="n">db</span><span class="p">:</span> <span class="n">QueryDB</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;See BuildHandler.&quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">domain_models</span><span class="p">,</span> <span class="n">graphs</span><span class="p">,</span> <span class="n">graph_infos</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>

    <span class="c1"># some validations spesific to serial simulation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span> <span class="n">SinglePeriodTimeIndex</span><span class="p">)</span>

    <span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span> <span class="o">=</span> <span class="n">AverageYearRange</span><span class="p">(</span><span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span> <span class="n">num_years</span><span class="o">=</span><span class="n">num_years</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span><span class="o">.</span><span class="n">is_52_week_years</span><span class="p">():</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Expected AverageYearRange to have is_52_week_years() == False.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">is_float32</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_attribute_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span><span class="p">,</span> <span class="n">target_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Get level value.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_level</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span><span class="p">,</span>
    <span class="n">target_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get level value.&quot;&quot;&quot;</span>
    <span class="n">is_max_level</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">get_data_value</span><span class="p">(</span>
        <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="n">target_unit</span><span class="p">,</span>
        <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
        <span class="n">scenario_horizon</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_avg_year_range</span><span class="p">,</span>
        <span class="n">is_max_level</span><span class="o">=</span><span class="n">is_max_level</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_warning_event</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Attribute </span><span class="si">{</span><span class="n">root_id</span><span class="si">}</span><span class="s2"> of type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">attribute</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> returned </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_attribute_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span> <span class="o">|</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">default</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Add profile vector to timevectors and return profile_id.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_attribute_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">attribute</span><span class="p">:</span> <span class="n">LevelProfile</span> <span class="o">|</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">default</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add profile vector to timevectors and return profile_id.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">attribute</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">default</span>

    <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">root_id</span><span class="si">}</span><span class="s2">_profile&quot;</span>

    <span class="n">timeindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">)</span>

    <span class="n">vector</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">attribute</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
        <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
        <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
        <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>  <span class="c1"># avoid very small numerical noise, e.g negative prices from jules run</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Profile </span><span class="si">{</span><span class="n">profile_id</span><span class="si">}</span><span class="s2"> in time index </span><span class="si">{</span><span class="n">timeindex</span><span class="si">}</span><span class="s2"> contains NaN values. &quot;</span>
            <span class="s2">&quot;This may indicate a problem with the data or the configuration.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">vector</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Profile </span><span class="si">{</span><span class="n">profile_id</span><span class="si">}</span><span class="s2"> in time index </span><span class="si">{</span><span class="n">timeindex</span><span class="si">}</span><span class="s2"> has negative values. &quot;</span>
            <span class="s2">&quot;This may indicate a problem with the data or the configuration.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="n">denominator</span> <span class="o">=</span> <span class="n">vector</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">denominator</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">vector</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_PROFILE_VALUE_WHEN_ZERO</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">vector</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">denominator</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">vector</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">][</span><span class="n">profile_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">vector</span>

    <span class="k">return</span> <span class="n">profile_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_capacity_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_capacity_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">StockVolume</span> <span class="o">|</span> <span class="n">FlowVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_capacity_level for serial simulation. Handles stock or flow based on info.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">StockVolume</span> <span class="o">|</span> <span class="n">FlowVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_capacity_level for serial simulation. Handles stock or flow based on info.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="k">else</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_capacity_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_capacity_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_capacity_profile for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_capacity_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">capacity</span><span class="p">:</span> <span class="n">FlowVolume</span> <span class="o">|</span> <span class="n">StockVolume</span><span class="p">,</span>
    <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_capacity_profile for serial simulation.&quot;&quot;&quot;</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_flow</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span> <span class="k">else</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">capacity</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">unit</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_coefficient_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_coefficient_level for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_coefficient_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_coefficient_level for serial simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_cost_term_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_cost_term_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_cost_term_level for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_cost_term_level for serial simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_cost_term_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_cost_term_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_cost_term_profile for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_cost_term_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">:</span> <span class="n">Cost</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_cost_term_profile for serial simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">cost_term</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_price_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_price_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_price_level for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_price_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_price_level for serial simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_price_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_price_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>get_price_profile for serial simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_price_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">Price</span><span class="p">,</span> <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get_price_profile for serial simulation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span><span class="n">root_id</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span><span class="p">,</span> <span class="n">info</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_rhs_term_level" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rhs_term_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Convert volume (main node) to target node volume.</p>
<p>This may scale the volume using arrow coefficient,
e.g. due to transportation loss.</p>
<p>This may also change unit, if target node belongs to
different commodity than main node, such as for hydropower.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_level</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert volume (main node) to target node volume.</span>

<span class="sd">    This may scale the volume using arrow coefficient,</span>
<span class="sd">    e.g. due to transportation loss.</span>

<span class="sd">    This may also change unit, if target node belongs to</span>
<span class="sd">    different commodity than main node, such as for hydropower.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coeff_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_coefficient_level</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">,</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">)</span>

    <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_level</span><span class="p">():</span>
        <span class="n">volume_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span>
            <span class="n">root_id</span><span class="o">=</span><span class="n">rhs_term_id</span><span class="p">,</span>
            <span class="n">attribute</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span>
            <span class="n">target_unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_cap</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>
        <span class="n">min_cap</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_min_capacity</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">max_cap</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_cap</span> <span class="o">==</span> <span class="n">min_cap</span><span class="p">:</span>
            <span class="n">volume_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_level</span><span class="p">(</span>
                <span class="n">root_id</span><span class="o">=</span><span class="n">rhs_term_id</span><span class="p">,</span>
                <span class="n">attribute</span><span class="o">=</span><span class="n">max_cap</span><span class="p">,</span>
                <span class="n">target_unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2"> is not exogenous&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">coeff_value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">message</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Got zero coeff_value for </span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;volume_value = </span><span class="si">{</span><span class="n">volume_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;coeff_value = </span><span class="si">{</span><span class="n">coeff_value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;flow.get_main_node() = </span><span class="si">{</span><span class="n">flow</span><span class="o">.</span><span class="n">get_main_node</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="sa">f</span><span class="s2">&quot;arrow.get_node() = </span><span class="si">{</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">volume_value</span> <span class="o">/</span> <span class="n">coeff_value</span>  <span class="c1"># convert from main_unit to target_unit</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.build_handler.SerialBuildHandler.SerialBuildHandler.get_rhs_term_profile" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">get_rhs_term_profile</span><span class="p">(</span><span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span> <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Create profile (possibly) representing volume_profile * coefficient_profile.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/build_handler/SerialBuildHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_rhs_term_profile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">rhs_term_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
    <span class="n">arrow</span><span class="p">:</span> <span class="n">Arrow</span><span class="p">,</span>
    <span class="n">flow_info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create profile (possibly) representing volume_profile * coefficient_profile.&quot;&quot;&quot;</span>
    <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_profile</span><span class="p">():</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>

    <span class="n">not_volume_profile</span> <span class="o">=</span> <span class="n">volume</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">volume</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span>
    <span class="n">not_arrow_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">arrow</span><span class="o">.</span><span class="n">has_profile</span><span class="p">()</span>
    <span class="n">has_volume_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">not_volume_profile</span>
    <span class="n">has_arrow_profile</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">not_arrow_profile</span>

    <span class="k">if</span> <span class="n">not_volume_profile</span> <span class="ow">and</span> <span class="n">not_arrow_profile</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">1.0</span>

    <span class="k">if</span> <span class="n">has_volume_profile</span> <span class="ow">and</span> <span class="n">not_arrow_profile</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span>
            <span class="n">rhs_term_id</span><span class="p">,</span>
            <span class="n">attribute</span><span class="o">=</span><span class="n">volume</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
            <span class="n">info</span><span class="o">=</span><span class="n">flow_info</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">not_volume_profile</span> <span class="ow">and</span> <span class="n">has_arrow_profile</span><span class="p">:</span>
        <span class="n">unit</span> <span class="o">=</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attribute_profile</span><span class="p">(</span>
            <span class="n">rhs_term_id</span><span class="p">,</span>
            <span class="n">attribute</span><span class="o">=</span><span class="n">arrow</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
            <span class="n">info</span><span class="o">=</span><span class="n">flow_info</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># Here we get both profiles (volume and coefficient) and muliply them</span>
    <span class="c1"># together and store the resulting product profile in self.timevectors</span>

    <span class="n">profile_id</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rhs_term_id</span><span class="si">}</span><span class="s2">_profile&quot;</span>

    <span class="n">timeindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_profile_timeindex</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">volume</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">),</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_find_profile_timeindex</span><span class="p">(</span><span class="n">arrow</span><span class="p">,</span> <span class="n">flow_info</span><span class="o">.</span><span class="n">has_storage_resolution</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">x</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">volume</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
        <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
        <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
        <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_flow</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">y</span><span class="p">:</span> <span class="n">NDArray</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_scenario_vector</span><span class="p">(</span>
        <span class="n">db</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">,</span>
        <span class="n">level_period</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_period</span><span class="p">,</span>
        <span class="n">scenario_horizon</span><span class="o">=</span><span class="n">timeindex</span><span class="p">,</span>
        <span class="n">is_float32</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_float32</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="n">flow_info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()],</span>
    <span class="p">)</span>

    <span class="n">x_mean</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">y_mean</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">x_mean</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y_mean</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_PROFILE_VALUE_WHEN_ZERO</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span>

    <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">x_mean</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
    <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">y_mean</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>

    <span class="n">np</span><span class="o">.</span><span class="n">multiply</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">timevectors</span><span class="p">[</span><span class="n">timeindex</span><span class="p">][</span><span class="n">profile_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span>

    <span class="k">return</span> <span class="n">profile_id</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.dataclasses" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>dataclasses</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.dataclasses.ComponentInfo" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>ComponentInfo</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">



        <p>All derived info we need during solve.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/dataclasses.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ComponentInfo</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;All derived info we need during solve.&quot;&quot;&quot;</span>

    <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_node</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_storage_node</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_short_term_storage</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># used to find if the whole subsystem should be short term</span>
    <span class="n">is_market_node</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_market_flow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_market_flow_to_exogenous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_sss_member</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_exogenous</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">has_storage_resolution</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">jules_commodity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">domain_commodity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># sss = storage subsystem</span>
    <span class="n">sss_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_market_commodity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_members</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_is_short_term</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_storage_duration</span><span class="p">:</span> <span class="n">timedelta</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_global_eneq_value</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_global_eneq_unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sss_initial_storage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">jules_balance_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">jules_storage_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">jules_global_eneq_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">main_node_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">num_arrows</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">unit_price</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_stock</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_flow</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_flow_result</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_cost</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_coeffs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_param_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_param_unit_flow</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">unit_param_unit_stock</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">agg_storage_node_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">agg_market_node_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.dataclasses.DomainModels" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>DomainModels</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">



        <p>Model instance for each term.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/dataclasses.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">DomainModels</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Model instance for each term.&quot;&quot;&quot;</span>

    <span class="n">clearing</span><span class="p">:</span> <span class="n">Model</span>
    <span class="n">short_term</span><span class="p">:</span> <span class="n">Model</span>
    <span class="n">medium_term</span><span class="p">:</span> <span class="n">Model</span>
    <span class="n">long_term</span><span class="p">:</span> <span class="n">Model</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.dataclasses.GraphInfos" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>GraphInfos</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">



        <p>Hold all component info for all graphs.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/dataclasses.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GraphInfos</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Hold all component info for all graphs.&quot;&quot;&quot;</span>

    <span class="n">clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span>
    <span class="n">short_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span>
    <span class="n">medium_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span>
    <span class="n">long_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ComponentInfo</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h5 id="framjules.solve_handler.dataclasses.NodeFlowGraphs" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>NodeFlowGraphs</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h5>


    <div class="doc doc-contents ">



        <p>Node-Flow representation of domain model components via get_supported_components.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/dataclasses.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">NodeFlowGraphs</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Node-Flow representation of domain model components via get_supported_components.&quot;&quot;&quot;</span>

    <span class="n">clearing</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="n">Flow</span><span class="p">]</span>
    <span class="n">short_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="n">Flow</span><span class="p">]</span>
    <span class="n">medium_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="n">Flow</span><span class="p">]</span>
    <span class="n">long_term</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Node</span> <span class="o">|</span> <span class="n">Flow</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.results_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>results_handler</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h5 id="framjules.solve_handler.results_handler.SerialResultsHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>SerialResultsHandler</code>


</h5>

    <div class="doc doc-contents ">

        <p>Handling of results produced by running JulES in Serial mode.</p>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h6 id="framjules.solve_handler.results_handler.SerialResultsHandler.SerialResultsHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SerialResultsHandler</code>


</h6>


    <div class="doc doc-contents ">



        <p>Set serial simulation results.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/results_handler/SerialResultsHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SerialResultsHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set serial simulation results.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
        <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
        <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle retrieval of results from a JulES Serial simulation.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder (Path | str): Path to folder of the JulES simulation.</span>
<span class="sd">            config (JulESConfig): Simulation config.</span>
<span class="sd">            names (JulESNames): JulES namespace.</span>
<span class="sd">            graphs (NodeFlowGraphs): Graphs used in the simulation.</span>
<span class="sd">            graph_infos (GraphInfos): JulES specific info of each Component in the graphs.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="n">names</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">=</span> <span class="n">graphs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span> <span class="o">=</span> <span class="n">graph_infos</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_units</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set JulES results of all Components in the clearing graph.&quot;&quot;&quot;</span>
        <span class="n">is_whole_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">()</span>

        <span class="n">loader</span> <span class="o">=</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
            <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
            <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
            <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">supply_loader</span> <span class="o">=</span> <span class="n">SupplyJulESH5TimeVectorLoader</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
            <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
            <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
            <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">demand_loader</span> <span class="o">=</span> <span class="n">DemandJulESH5TimeVectorLoader</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
            <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
            <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
            <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">power_nodes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">name</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span> <span class="o">==</span> <span class="n">JulESNames</span><span class="o">.</span><span class="n">POWER</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">():</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_node_results</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">loader</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Flow</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_set_flow_results</span><span class="p">(</span>
                    <span class="n">c</span><span class="p">,</span>
                    <span class="n">info</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">loader</span><span class="p">,</span>
                    <span class="n">power_nodes</span><span class="p">,</span>
                    <span class="n">supply_loader</span><span class="o">=</span><span class="n">supply_loader</span><span class="p">,</span>
                    <span class="n">demand_loader</span><span class="o">=</span><span class="n">demand_loader</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_node_results</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Node</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">loader</span><span class="p">:</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">:</span>
            <span class="n">level</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_decomposed_level_profile</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">loader</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
            <span class="n">price</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_price</span><span class="p">()</span>
            <span class="n">price</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">price</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
            <span class="n">price</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span><span class="p">:</span>
            <span class="n">level</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_decomposed_level_profile</span><span class="p">(</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span><span class="p">,</span>
                <span class="n">loader</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span><span class="p">],</span>
                <span class="n">is_stock</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">storage</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_storage</span><span class="p">()</span>
            <span class="n">volume</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
            <span class="n">volume</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">volume</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
            <span class="n">volume</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>

            <span class="n">level</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_decomposed_level_profile</span><span class="p">(</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">+</span> <span class="s2">&quot;_sv&quot;</span><span class="p">,</span>
                <span class="n">loader</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">+</span> <span class="s2">&quot;_sv&quot;</span><span class="p">],</span>
            <span class="p">)</span>
            <span class="n">price</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">get_price</span><span class="p">()</span>
            <span class="n">price</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">price</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
            <span class="n">price</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_flow_results</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">flow</span><span class="p">:</span> <span class="n">Flow</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">loader</span><span class="p">:</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">,</span>
        <span class="n">power_nodes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">supply_loader</span><span class="p">:</span> <span class="n">SupplyJulESH5TimeVectorLoader</span><span class="p">,</span>
        <span class="n">demand_loader</span><span class="p">:</span> <span class="n">DemandJulESH5TimeVectorLoader</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_exogenous</span> <span class="ow">and</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span><span class="o">.</span><span class="n">get_level</span><span class="p">():</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">:</span>
            <span class="n">max_capacity</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_max_capacity</span><span class="p">()</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">max_capacity</span><span class="o">.</span><span class="n">get_level</span><span class="p">()</span>
            <span class="n">profile</span> <span class="o">=</span> <span class="n">max_capacity</span><span class="o">.</span><span class="n">get_profile</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">level</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_decomposed_level_profile</span><span class="p">(</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">loader</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">name</span><span class="p">],</span>
                <span class="n">is_flow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_volume</span><span class="p">()</span>
        <span class="n">volume</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">volume</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
        <span class="n">volume</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>

        <span class="c1"># temporary workaround, will be fixed in future versions</span>
        <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arrow</span><span class="p">,</span> <span class="n">volume</span> <span class="ow">in</span> <span class="n">flow</span><span class="o">.</span><span class="n">get_arrow_volumes</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">arrow_node</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">arrow_node</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">power_nodes</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="n">is_supply</span> <span class="o">=</span> <span class="n">arrow</span><span class="o">.</span><span class="n">is_ingoing</span><span class="p">()</span>
            <span class="n">loader</span> <span class="o">=</span> <span class="n">supply_loader</span> <span class="k">if</span> <span class="n">is_supply</span> <span class="k">else</span> <span class="n">demand_loader</span>

            <span class="n">unit_flow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">unit_coeff</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_coeffs</span><span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">get_node</span><span class="p">()]</span>
            <span class="n">unit</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="n">unit_flow</span><span class="si">}</span><span class="s2">)*(</span><span class="si">{</span><span class="n">unit_coeff</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">unit_coeff</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">unit_flow</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="n">subname</span> <span class="o">=</span> <span class="n">name</span><span class="p">[:</span> <span class="n">n</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
                <span class="n">level</span><span class="p">,</span> <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_decomposed_level_profile</span><span class="p">(</span>
                    <span class="n">subname</span><span class="p">,</span>
                    <span class="n">loader</span><span class="p">,</span>
                    <span class="n">unit</span><span class="p">,</span>
                    <span class="n">is_flow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">volume</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="n">volume</span><span class="o">.</span><span class="n">set_level</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
                <span class="n">volume</span><span class="o">.</span><span class="n">set_profile</span><span class="p">(</span><span class="n">profile</span><span class="p">)</span>
                <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_decomposed_level_profile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">loader</span><span class="p">:</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">,</span>
        <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_flow</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">is_stock</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Expr</span><span class="p">,</span> <span class="n">Expr</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Decompose result vector into level and profile expressions.</span>

<span class="sd">        Note! Support for negative prices will come in the next version.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">timevector</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_timevector</span><span class="p">(</span><span class="n">jules_id</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">loader</span><span class="p">)</span>

        <span class="n">mean_value</span> <span class="o">=</span> <span class="n">timevector</span><span class="o">.</span><span class="n">get_vector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_float32</span><span class="p">())</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

        <span class="n">scale</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">mean_value</span><span class="p">)</span> <span class="k">if</span> <span class="n">mean_value</span> <span class="o">!=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mf">1.0</span>
        <span class="n">mean_one_profile_timevector</span> <span class="o">=</span> <span class="n">LinearTransformTimeVector</span><span class="p">(</span>
            <span class="n">timevector</span><span class="o">=</span><span class="n">timevector</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="n">shift</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">is_zero_one_profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">profile_expr</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">reference_period</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">mean_value</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">reference_period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_reference_period</span><span class="p">()</span>
            <span class="n">profile_expr</span> <span class="o">=</span> <span class="n">ensure_expr</span><span class="p">(</span><span class="n">mean_one_profile_timevector</span><span class="p">,</span> <span class="n">is_profile</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">level_timevector</span> <span class="o">=</span> <span class="n">ConstantTimeVector</span><span class="p">(</span>
                <span class="n">scalar</span><span class="o">=</span><span class="n">mean_value</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
                <span class="n">is_max_level</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">reference_period</span><span class="o">=</span><span class="n">reference_period</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">level_timevector</span> <span class="o">=</span> <span class="n">ConstantTimeVector</span><span class="p">(</span>
                <span class="n">scalar</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">,</span>
                <span class="n">is_max_level</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">profile_expr</span> <span class="o">=</span> <span class="n">ensure_expr</span><span class="p">(</span>
                <span class="n">ConstantTimeVector</span><span class="p">(</span>
                    <span class="n">scalar</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                    <span class="n">is_zero_one_profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">is_profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="n">level_expr</span> <span class="o">=</span> <span class="n">ensure_expr</span><span class="p">(</span>
            <span class="n">level_timevector</span><span class="p">,</span>
            <span class="n">is_level</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">is_flow</span><span class="o">=</span><span class="n">is_flow</span><span class="p">,</span>
            <span class="n">is_stock</span><span class="o">=</span><span class="n">is_stock</span><span class="p">,</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">profile_expr</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">level_expr</span><span class="p">,</span> <span class="n">profile_expr</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_units</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]:</span>
        <span class="n">units</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_price</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_market_node</span><span class="p">}</span>
        <span class="n">units</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_stock</span>
                <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span>
            <span class="p">},</span>
        <span class="p">)</span>
        <span class="n">units</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="n">info</span><span class="o">.</span><span class="n">jules_storage_id</span> <span class="o">+</span> <span class="s2">&quot;_sv&quot;</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span>
                <span class="k">for</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_storage_node</span> <span class="ow">and</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_cost</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">},</span>
        <span class="p">)</span>
        <span class="n">units</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">info</span><span class="o">.</span><span class="n">unit_flow_result</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">info</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">is_flow</span><span class="p">},</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">units</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_reference_period</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ReferencePeriod</span><span class="p">:</span>
        <span class="n">first_year</span><span class="p">,</span> <span class="n">num_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_simulation_years</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ReferencePeriod</span><span class="p">(</span><span class="n">first_year</span><span class="p">,</span> <span class="n">num_years</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_timevector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jules_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">loader</span><span class="p">:</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LoadedTimeVector</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LoadedTimeVector</span><span class="p">(</span><span class="n">vector_id</span><span class="o">=</span><span class="n">jules_id</span><span class="p">,</span> <span class="n">loader</span><span class="o">=</span><span class="n">loader</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span> <span class="kn">from</span><span class="w"> </span><span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.results_handler.SerialResultsHandler.SerialResultsHandler.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span> <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span> <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Handle retrieval of results from a JulES Serial simulation.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>folder</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span> | <span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Path to folder of the JulES simulation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            JulESConfig (framjules.JulESConfig.JulESConfig)" href="#framjules.JulESConfig.JulESConfig">JulESConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Simulation config.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            JulESNames (framjules.solve_handler.JulESNames.JulESNames)" href="#framjules.solve_handler.JulESNames.JulESNames">JulESNames</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JulES namespace.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>graphs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            NodeFlowGraphs


  
      dataclass
   (framjules.solve_handler.dataclasses.NodeFlowGraphs)" href="#framjules.solve_handler.dataclasses.NodeFlowGraphs">NodeFlowGraphs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Graphs used in the simulation.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>graph_infos</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            GraphInfos


  
      dataclass
   (framjules.solve_handler.dataclasses.GraphInfos)" href="#framjules.solve_handler.dataclasses.GraphInfos">GraphInfos</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JulES specific info of each Component in the graphs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/results_handler/SerialResultsHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="n">graphs</span><span class="p">:</span> <span class="n">NodeFlowGraphs</span><span class="p">,</span>
    <span class="n">graph_infos</span><span class="p">:</span> <span class="n">GraphInfos</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle retrieval of results from a JulES Serial simulation.</span>

<span class="sd">    Args:</span>
<span class="sd">        folder (Path | str): Path to folder of the JulES simulation.</span>
<span class="sd">        config (JulESConfig): Simulation config.</span>
<span class="sd">        names (JulESNames): JulES namespace.</span>
<span class="sd">        graphs (NodeFlowGraphs): Graphs used in the simulation.</span>
<span class="sd">        graph_infos (GraphInfos): JulES specific info of each Component in the graphs.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="n">names</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span> <span class="o">=</span> <span class="n">graphs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span> <span class="o">=</span> <span class="n">graph_infos</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_units</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.results_handler.SerialResultsHandler.SerialResultsHandler.set_results" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">set_results</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Set JulES results of all Components in the clearing graph.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/results_handler/SerialResultsHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set JulES results of all Components in the clearing graph.&quot;&quot;&quot;</span>
    <span class="n">is_whole_years</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_simulation_mode_serial</span><span class="p">()</span>

    <span class="n">loader</span> <span class="o">=</span> <span class="n">JulESH5TimeVectorLoader</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
        <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
        <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
        <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">supply_loader</span> <span class="o">=</span> <span class="n">SupplyJulESH5TimeVectorLoader</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
        <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
        <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
        <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">demand_loader</span> <span class="o">=</span> <span class="n">DemandJulESH5TimeVectorLoader</span><span class="p">(</span>
        <span class="n">source</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_folder</span><span class="p">,</span>
        <span class="n">units</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">,</span>
        <span class="n">relative_loc</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span><span class="p">,</span>
        <span class="n">is_whole_years</span><span class="o">=</span><span class="n">is_whole_years</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">power_nodes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">name</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">)</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">get_commodity</span><span class="p">()</span> <span class="o">==</span> <span class="n">JulESNames</span><span class="o">.</span><span class="n">POWER</span>
    <span class="p">]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">graphs</span><span class="o">.</span><span class="n">clearing</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">info</span><span class="p">:</span> <span class="n">ComponentInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph_infos</span><span class="o">.</span><span class="n">clearing</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Node</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">is_exogenous</span><span class="p">():</span>
                <span class="k">continue</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_node_results</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">loader</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">Flow</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_flow_results</span><span class="p">(</span>
                <span class="n">c</span><span class="p">,</span>
                <span class="n">info</span><span class="p">,</span>
                <span class="n">name</span><span class="p">,</span>
                <span class="n">loader</span><span class="p">,</span>
                <span class="n">power_nodes</span><span class="p">,</span>
                <span class="n">supply_loader</span><span class="o">=</span><span class="n">supply_loader</span><span class="p">,</span>
                <span class="n">demand_loader</span><span class="o">=</span><span class="n">demand_loader</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h4 id="framjules.solve_handler.run_handler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>run_handler</code>


</h4>

    <div class="doc doc-contents ">










  <div class="doc doc-children">











<div class="doc doc-object doc-module">



<h5 id="framjules.solve_handler.run_handler.SerialRunHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-module"></code>            <code>SerialRunHandler</code>


</h5>

    <div class="doc doc-contents ">










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h6 id="framjules.solve_handler.run_handler.SerialRunHandler.SerialRunHandler" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <code>SerialRunHandler</code>


</h6>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="framcore.juliamodels.JuliaModel">JuliaModel</span></code></p>



        <p>Handle running the JulES solver in serial simulation mode.</p>








              <details class="mkdocstrings-source">
                <summary>Source code in <code>framjules/solve_handler/run_handler/SerialRunHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SerialRunHandler</span><span class="p">(</span><span class="n">JuliaModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle running the JulES solver in serial simulation mode.&quot;&quot;&quot;</span>

    <span class="c1"># ENV_NAME = &quot;JulES_julia_env&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
        <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
        <span class="n">dependencies</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize JulES serial folder.</span>

<span class="sd">        The three parameters env_path, depot_path and julia_path sets environment variables for locations of your Julia</span>
<span class="sd">        environment, packages and language.</span>
<span class="sd">            - If user has not specified locations, the default is to use the current python/conda environment.</span>
<span class="sd">            - If a system installation of Python is used, the default is set to the current user location.</span>

<span class="sd">        Args:</span>
<span class="sd">            folder (Path): Location of JulES model dataset.</span>
<span class="sd">            config (JulESConfig): Simulaiton config.</span>
<span class="sd">            names (JulESNames): JulES namespace object.</span>
<span class="sd">            dependencies (list[str]): Julia packages dependencies. List of str, either package names or urls.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">=</span> <span class="n">folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="n">names</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ENV_NAME</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">JULIA_ENV_NAME</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">julia_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_exe_path</span><span class="p">(),</span>
            <span class="n">env_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_env_path</span><span class="p">(),</span>
            <span class="n">depot_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_depot_path</span><span class="p">(),</span>
            <span class="n">dependencies</span><span class="o">=</span><span class="n">dependencies</span><span class="p">,</span>
            <span class="n">skip_install_dependencies</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">is_skip_install_dependencies</span><span class="p">(),</span>
            <span class="n">force_julia_install</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_force_julia_install</span><span class="p">(),</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run JulES in Series mode.&quot;&quot;&quot;</span>
        <span class="n">data_year</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">()</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
        <span class="n">weather_year</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">config_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">JULES_CONFIG</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">get_all_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>  <span class="c1"># noqa: ANN001</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">result</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">v</span><span class="p">)},</span>
            <span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>

        <span class="n">names_dict</span> <span class="o">=</span> <span class="n">get_all_attrs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">)</span>
        <span class="n">filename_clearing</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">CLEARING</span><span class="si">}</span><span class="s2">.json&quot;</span>
        <span class="n">filename_aggregated</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">AGGREGATED</span><span class="si">}</span><span class="s2">.json&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_jl</span><span class="o">.</span><span class="n">seval</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        using Distributed, YAML, HDF5</span>
<span class="s2">        config = YAML.load_file(</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">config_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">)</span>
<span class="s2">        println(&quot;Add cores&quot;)</span>
<span class="s2">        const numcores = config[&quot;main&quot;][&quot;numcores&quot;]</span>
<span class="s2">        if nprocs() &lt; numcores</span>
<span class="s2">            addprocs(numcores - nprocs())</span>
<span class="s2">        end</span>
<span class="s2">        @show nprocs()</span>
<span class="s2">        println(&quot;Load JulES&quot;)</span>
<span class="s2">        @time @everywhere using JulES</span>
<span class="s2">        using Pkg; Pkg.status()</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_jl</span><span class="o">.</span><span class="n">JulES</span><span class="o">.</span><span class="n">run_jules</span><span class="p">(</span>
            <span class="n">config_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
            <span class="n">data_year</span><span class="p">,</span>
            <span class="n">weather_year</span><span class="p">,</span>
            <span class="n">output_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
            <span class="n">names_dict</span><span class="p">,</span>
            <span class="n">filename_clearing</span><span class="p">,</span>
            <span class="n">filename_aggregated</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.run_handler.SerialRunHandler.SerialRunHandler.__init__" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span> <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Initialize JulES serial folder.</p>
<p>The three parameters env_path, depot_path and julia_path sets environment variables for locations of your Julia
environment, packages and language.
    - If user has not specified locations, the default is to use the current python/conda environment.
    - If a system installation of Python is used, the default is set to the current user location.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>folder</code>
            </td>
            <td>
                  <code><span title="pathlib.Path">Path</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Location of JulES model dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            JulESConfig (framjules.JulESConfig)" href="#framjules.JulESConfig">JulESConfig</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Simulaiton config.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>names</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="            JulESNames (framjules.solve_handler.JulESNames.JulESNames)" href="#framjules.solve_handler.JulESNames.JulESNames">JulESNames</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>JulES namespace object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dependencies</code>
            </td>
            <td>
                  <code><span title="list">list</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Julia packages dependencies. List of str, either package names or urls.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/run_handler/SerialRunHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">JulESConfig</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">JulESNames</span><span class="p">,</span>
    <span class="n">dependencies</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize JulES serial folder.</span>

<span class="sd">    The three parameters env_path, depot_path and julia_path sets environment variables for locations of your Julia</span>
<span class="sd">    environment, packages and language.</span>
<span class="sd">        - If user has not specified locations, the default is to use the current python/conda environment.</span>
<span class="sd">        - If a system installation of Python is used, the default is set to the current user location.</span>

<span class="sd">    Args:</span>
<span class="sd">        folder (Path): Location of JulES model dataset.</span>
<span class="sd">        config (JulESConfig): Simulaiton config.</span>
<span class="sd">        names (JulESNames): JulES namespace object.</span>
<span class="sd">        dependencies (list[str]): Julia packages dependencies. List of str, either package names or urls.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">=</span> <span class="n">folder</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_names</span> <span class="o">=</span> <span class="n">names</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ENV_NAME</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">JULIA_ENV_NAME</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">julia_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_exe_path</span><span class="p">(),</span>
        <span class="n">env_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_env_path</span><span class="p">(),</span>
        <span class="n">depot_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_julia_depot_path</span><span class="p">(),</span>
        <span class="n">dependencies</span><span class="o">=</span><span class="n">dependencies</span><span class="p">,</span>
        <span class="n">skip_install_dependencies</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">is_skip_install_dependencies</span><span class="p">(),</span>
        <span class="n">force_julia_install</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">get_force_julia_install</span><span class="p">(),</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h7 id="framjules.solve_handler.run_handler.SerialRunHandler.SerialRunHandler.run" class="doc doc-heading">
<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

</h7>


    <div class="doc doc-contents ">

        <p>Run JulES in Series mode.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>framjules/solve_handler/run_handler/SerialRunHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run JulES in Series mode.&quot;&quot;&quot;</span>
    <span class="n">data_year</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_data_period</span><span class="p">()</span><span class="o">.</span><span class="n">get_start_time</span><span class="p">()</span><span class="o">.</span><span class="n">isocalendar</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
    <span class="n">weather_year</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">get_weather_years</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">config_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">JULES_CONFIG</span>
    <span class="n">output_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_folder</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">FILENAME_H5_OUTPUT</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_attrs</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>  <span class="c1"># noqa: ANN001</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">result</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
            <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">v</span><span class="p">)},</span>
        <span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="n">names_dict</span> <span class="o">=</span> <span class="n">get_all_attrs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="p">)</span>
    <span class="n">filename_clearing</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">CLEARING</span><span class="si">}</span><span class="s2">.json&quot;</span>
    <span class="n">filename_aggregated</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">ROOT_FILENAME_DATAELEMENTS</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_names</span><span class="o">.</span><span class="n">AGGREGATED</span><span class="si">}</span><span class="s2">.json&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_jl</span><span class="o">.</span><span class="n">seval</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    using Distributed, YAML, HDF5</span>
<span class="s2">    config = YAML.load_file(</span><span class="se">\&quot;</span><span class="si">{</span><span class="n">config_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">)</span>
<span class="s2">    println(&quot;Add cores&quot;)</span>
<span class="s2">    const numcores = config[&quot;main&quot;][&quot;numcores&quot;]</span>
<span class="s2">    if nprocs() &lt; numcores</span>
<span class="s2">        addprocs(numcores - nprocs())</span>
<span class="s2">    end</span>
<span class="s2">    @show nprocs()</span>
<span class="s2">    println(&quot;Load JulES&quot;)</span>
<span class="s2">    @time @everywhere using JulES</span>
<span class="s2">    using Pkg; Pkg.status()</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_jl</span><span class="o">.</span><span class="n">JulES</span><span class="o">.</span><span class="n">run_jules</span><span class="p">(</span>
        <span class="n">config_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
        <span class="n">data_year</span><span class="p">,</span>
        <span class="n">weather_year</span><span class="p">,</span>
        <span class="n">output_path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
        <span class="n">names_dict</span><span class="p">,</span>
        <span class="n">filename_clearing</span><span class="p">,</span>
        <span class="n">filename_aggregated</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>